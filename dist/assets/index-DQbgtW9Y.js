var Gv=Object.defineProperty;var Vv=(i,t,l)=>t in i?Gv(i,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[t]=l;var Qe=(i,t,l)=>Vv(i,typeof t!="symbol"?t+"":t,l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function l(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=l(r);fetch(r.href,c)}})();var cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ku={exports:{}},ks={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh;function Bv(){if(Mh)return ks;Mh=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function l(o,r,c){var h=null;if(c!==void 0&&(h=""+c),r.key!==void 0&&(h=""+r.key),"key"in r){c={};for(var m in r)m!=="key"&&(c[m]=r[m])}else c=r;return r=c.ref,{$$typeof:i,type:o,key:h,ref:r!==void 0?r:null,props:c}}return ks.Fragment=t,ks.jsx=l,ks.jsxs=l,ks}var Ih;function Fv(){return Ih||(Ih=1,Ku.exports=Bv()),Ku.exports}var v=Fv(),Qu={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh;function Ov(){if(Dh)return Ae;Dh=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),E=Symbol.iterator;function A(_){return _===null||typeof _!="object"?null:(_=E&&_[E]||_["@@iterator"],typeof _=="function"?_:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,R={};function I(_,q,W){this.props=_,this.context=q,this.refs=R,this.updater=W||D}I.prototype.isReactComponent={},I.prototype.setState=function(_,q){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,q,"setState")},I.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function H(){}H.prototype=I.prototype;function V(_,q,W){this.props=_,this.context=q,this.refs=R,this.updater=W||D}var B=V.prototype=new H;B.constructor=V,N(B,I.prototype),B.isPureReactComponent=!0;var Y=Array.isArray;function ee(){}var ne={H:null,A:null,T:null,S:null},he=Object.prototype.hasOwnProperty;function ae(_,q,W){var j=W.ref;return{$$typeof:i,type:_,key:q,ref:j!==void 0?j:null,props:W}}function te(_,q){return ae(_.type,q,_.props)}function re(_){return typeof _=="object"&&_!==null&&_.$$typeof===i}function me(_){var q={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(W){return q[W]})}var Ie=/\/+/g;function ie(_,q){return typeof _=="object"&&_!==null&&_.key!=null?me(""+_.key):q.toString(36)}function ce(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(ee,ee):(_.status="pending",_.then(function(q){_.status==="pending"&&(_.status="fulfilled",_.value=q)},function(q){_.status==="pending"&&(_.status="rejected",_.reason=q)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function U(_,q,W,j,xe){var Ee=typeof _;(Ee==="undefined"||Ee==="boolean")&&(_=null);var we=!1;if(_===null)we=!0;else switch(Ee){case"bigint":case"string":case"number":we=!0;break;case"object":switch(_.$$typeof){case i:case t:we=!0;break;case x:return we=_._init,U(we(_._payload),q,W,j,xe)}}if(we)return xe=xe(_),we=j===""?"."+ie(_,0):j,Y(xe)?(W="",we!=null&&(W=we.replace(Ie,"$&/")+"/"),U(xe,q,W,"",function(st){return st})):xe!=null&&(re(xe)&&(xe=te(xe,W+(xe.key==null||_&&_.key===xe.key?"":(""+xe.key).replace(Ie,"$&/")+"/")+we)),q.push(xe)),1;we=0;var pt=j===""?".":j+":";if(Y(_))for(var tt=0;tt<_.length;tt++)j=_[tt],Ee=pt+ie(j,tt),we+=U(j,q,W,Ee,xe);else if(tt=A(_),typeof tt=="function")for(_=tt.call(_),tt=0;!(j=_.next()).done;)j=j.value,Ee=pt+ie(j,tt++),we+=U(j,q,W,Ee,xe);else if(Ee==="object"){if(typeof _.then=="function")return U(ce(_),q,W,j,xe);throw q=String(_),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return we}function Z(_,q,W){if(_==null)return _;var j=[],xe=0;return U(_,j,"","",function(Ee){return q.call(W,Ee,xe++)}),j}function de(_){if(_._status===-1){var q=_._result;q=q(),q.then(function(W){(_._status===0||_._status===-1)&&(_._status=1,_._result=W)},function(W){(_._status===0||_._status===-1)&&(_._status=2,_._result=W)}),_._status===-1&&(_._status=0,_._result=q)}if(_._status===1)return _._result.default;throw _._result}var _e=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},Re={map:Z,forEach:function(_,q,W){Z(_,function(){q.apply(this,arguments)},W)},count:function(_){var q=0;return Z(_,function(){q++}),q},toArray:function(_){return Z(_,function(q){return q})||[]},only:function(_){if(!re(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Ae.Activity=S,Ae.Children=Re,Ae.Component=I,Ae.Fragment=l,Ae.Profiler=r,Ae.PureComponent=V,Ae.StrictMode=o,Ae.Suspense=y,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ne,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(_){return ne.H.useMemoCache(_)}},Ae.cache=function(_){return function(){return _.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(_,q,W){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var j=N({},_.props),xe=_.key;if(q!=null)for(Ee in q.key!==void 0&&(xe=""+q.key),q)!he.call(q,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&q.ref===void 0||(j[Ee]=q[Ee]);var Ee=arguments.length-2;if(Ee===1)j.children=W;else if(1<Ee){for(var we=Array(Ee),pt=0;pt<Ee;pt++)we[pt]=arguments[pt+2];j.children=we}return ae(_.type,xe,j)},Ae.createContext=function(_){return _={$$typeof:h,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:c,_context:_},_},Ae.createElement=function(_,q,W){var j,xe={},Ee=null;if(q!=null)for(j in q.key!==void 0&&(Ee=""+q.key),q)he.call(q,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(xe[j]=q[j]);var we=arguments.length-2;if(we===1)xe.children=W;else if(1<we){for(var pt=Array(we),tt=0;tt<we;tt++)pt[tt]=arguments[tt+2];xe.children=pt}if(_&&_.defaultProps)for(j in we=_.defaultProps,we)xe[j]===void 0&&(xe[j]=we[j]);return ae(_,Ee,xe)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(_){return{$$typeof:m,render:_}},Ae.isValidElement=re,Ae.lazy=function(_){return{$$typeof:x,_payload:{_status:-1,_result:_},_init:de}},Ae.memo=function(_,q){return{$$typeof:p,type:_,compare:q===void 0?null:q}},Ae.startTransition=function(_){var q=ne.T,W={};ne.T=W;try{var j=_(),xe=ne.S;xe!==null&&xe(W,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(ee,_e)}catch(Ee){_e(Ee)}finally{q!==null&&W.types!==null&&(q.types=W.types),ne.T=q}},Ae.unstable_useCacheRefresh=function(){return ne.H.useCacheRefresh()},Ae.use=function(_){return ne.H.use(_)},Ae.useActionState=function(_,q,W){return ne.H.useActionState(_,q,W)},Ae.useCallback=function(_,q){return ne.H.useCallback(_,q)},Ae.useContext=function(_){return ne.H.useContext(_)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(_,q){return ne.H.useDeferredValue(_,q)},Ae.useEffect=function(_,q){return ne.H.useEffect(_,q)},Ae.useEffectEvent=function(_){return ne.H.useEffectEvent(_)},Ae.useId=function(){return ne.H.useId()},Ae.useImperativeHandle=function(_,q,W){return ne.H.useImperativeHandle(_,q,W)},Ae.useInsertionEffect=function(_,q){return ne.H.useInsertionEffect(_,q)},Ae.useLayoutEffect=function(_,q){return ne.H.useLayoutEffect(_,q)},Ae.useMemo=function(_,q){return ne.H.useMemo(_,q)},Ae.useOptimistic=function(_,q){return ne.H.useOptimistic(_,q)},Ae.useReducer=function(_,q,W){return ne.H.useReducer(_,q,W)},Ae.useRef=function(_){return ne.H.useRef(_)},Ae.useState=function(_){return ne.H.useState(_)},Ae.useSyncExternalStore=function(_,q,W){return ne.H.useSyncExternalStore(_,q,W)},Ae.useTransition=function(){return ne.H.useTransition()},Ae.version="19.2.0",Ae}var kh;function xc(){return kh||(kh=1,Qu.exports=Ov()),Qu.exports}var Q=xc();const Cl=wg(Q);var ju={exports:{}},Us={},Zu={exports:{}},Wu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh;function Yv(){return Uh||(Uh=1,(function(i){function t(U,Z){var de=U.length;U.push(Z);e:for(;0<de;){var _e=de-1>>>1,Re=U[_e];if(0<r(Re,Z))U[_e]=Z,U[de]=Re,de=_e;else break e}}function l(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var Z=U[0],de=U.pop();if(de!==Z){U[0]=de;e:for(var _e=0,Re=U.length,_=Re>>>1;_e<_;){var q=2*(_e+1)-1,W=U[q],j=q+1,xe=U[j];if(0>r(W,de))j<Re&&0>r(xe,W)?(U[_e]=xe,U[j]=de,_e=j):(U[_e]=W,U[q]=de,_e=q);else if(j<Re&&0>r(xe,de))U[_e]=xe,U[j]=de,_e=j;else break e}}return Z}function r(U,Z){var de=U.sortIndex-Z.sortIndex;return de!==0?de:U.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var y=[],p=[],x=1,S=null,E=3,A=!1,D=!1,N=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function B(U){for(var Z=l(p);Z!==null;){if(Z.callback===null)o(p);else if(Z.startTime<=U)o(p),Z.sortIndex=Z.expirationTime,t(y,Z);else break;Z=l(p)}}function Y(U){if(N=!1,B(U),!D)if(l(y)!==null)D=!0,ee||(ee=!0,me());else{var Z=l(p);Z!==null&&ce(Y,Z.startTime-U)}}var ee=!1,ne=-1,he=5,ae=-1;function te(){return R?!0:!(i.unstable_now()-ae<he)}function re(){if(R=!1,ee){var U=i.unstable_now();ae=U;var Z=!0;try{e:{D=!1,N&&(N=!1,H(ne),ne=-1),A=!0;var de=E;try{t:{for(B(U),S=l(y);S!==null&&!(S.expirationTime>U&&te());){var _e=S.callback;if(typeof _e=="function"){S.callback=null,E=S.priorityLevel;var Re=_e(S.expirationTime<=U);if(U=i.unstable_now(),typeof Re=="function"){S.callback=Re,B(U),Z=!0;break t}S===l(y)&&o(y),B(U)}else o(y);S=l(y)}if(S!==null)Z=!0;else{var _=l(p);_!==null&&ce(Y,_.startTime-U),Z=!1}}break e}finally{S=null,E=de,A=!1}Z=void 0}}finally{Z?me():ee=!1}}}var me;if(typeof V=="function")me=function(){V(re)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,ie=Ie.port2;Ie.port1.onmessage=re,me=function(){ie.postMessage(null)}}else me=function(){I(re,0)};function ce(U,Z){ne=I(function(){U(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(U){switch(E){case 1:case 2:case 3:var Z=3;break;default:Z=E}var de=E;E=Z;try{return U()}finally{E=de}},i.unstable_requestPaint=function(){R=!0},i.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var de=E;E=U;try{return Z()}finally{E=de}},i.unstable_scheduleCallback=function(U,Z,de){var _e=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?_e+de:_e):de=_e,U){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=de+Re,U={id:x++,callback:Z,priorityLevel:U,startTime:de,expirationTime:Re,sortIndex:-1},de>_e?(U.sortIndex=de,t(p,U),l(y)===null&&U===l(p)&&(N?(H(ne),ne=-1):N=!0,ce(Y,de-_e))):(U.sortIndex=Re,t(y,U),D||A||(D=!0,ee||(ee=!0,me()))),U},i.unstable_shouldYield=te,i.unstable_wrapCallback=function(U){var Z=E;return function(){var de=E;E=Z;try{return U.apply(this,arguments)}finally{E=de}}}})(Wu)),Wu}var Lh;function $v(){return Lh||(Lh=1,Zu.exports=Yv()),Zu.exports}var ec={exports:{}},Tt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function Jv(){if(zh)return Tt;zh=1;var i=xc();function t(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(t(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(y,p,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:y,containerInfo:p,implementation:x}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Tt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Tt.createPortal=function(y,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(y,p,null,x)},Tt.flushSync=function(y){var p=h.T,x=o.p;try{if(h.T=null,o.p=2,y)return y()}finally{h.T=p,o.p=x,o.d.f()}},Tt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(y,p))},Tt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Tt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var x=p.as,S=m(x,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?o.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:A}):x==="script"&&o.d.X(y,{crossOrigin:S,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Tt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=m(p.as,p.crossOrigin);o.d.M(y,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(y)},Tt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,S=m(x,p.crossOrigin);o.d.L(y,x,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Tt.preloadModule=function(y,p){if(typeof y=="string")if(p){var x=m(p.as,p.crossOrigin);o.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(y)},Tt.requestFormReset=function(y){o.d.r(y)},Tt.unstable_batchedUpdates=function(y,p){return y(p)},Tt.useFormState=function(y,p,x){return h.H.useFormState(y,p,x)},Tt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Tt.version="19.2.0",Tt}var Ph;function Xv(){if(Ph)return ec.exports;Ph=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),ec.exports=Jv(),ec.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function Kv(){if(qh)return Us;qh=1;var i=$v(),t=xc(),l=Xv();function o(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(c(e)!==e)throw Error(o(188))}function p(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,a=n;;){var f=s.return;if(f===null)break;var g=f.alternate;if(g===null){if(a=f.return,a!==null){s=a;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===s)return y(f),e;if(g===a)return y(f),n;g=g.sibling}throw Error(o(188))}if(s.return!==a.return)s=f,a=g;else{for(var T=!1,C=f.child;C;){if(C===s){T=!0,s=f,a=g;break}if(C===a){T=!0,a=f,s=g;break}C=C.sibling}if(!T){for(C=g.child;C;){if(C===s){T=!0,s=g,a=f;break}if(C===a){T=!0,a=g,s=f;break}C=C.sibling}if(!T)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),V=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=re&&e[re]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case I:return"Profiler";case R:return"StrictMode";case Y:return"Suspense";case ee:return"SuspenseList";case ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case V:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case B:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ne:return n=e.displayName||null,n!==null?n:ie(e.type)||"Memo";case he:n=e._payload,e=e._init;try{return ie(e(n))}catch{}}return null}var ce=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},_e=[],Re=-1;function _(e){return{current:e}}function q(e){0>Re||(e.current=_e[Re],_e[Re]=null,Re--)}function W(e,n){Re++,_e[Re]=e.current,e.current=n}var j=_(null),xe=_(null),Ee=_(null),we=_(null);function pt(e,n){switch(W(Ee,n),W(xe,e),W(j,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Wp(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Wp(n),e=eh(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(j),W(j,e)}function tt(){q(j),q(xe),q(Ee)}function st(e){e.memoizedState!==null&&W(we,e);var n=j.current,s=eh(n,e.type);n!==s&&(W(xe,e),W(j,s))}function yn(e){xe.current===e&&(q(j),q(xe)),we.current===e&&(q(we),Rs._currentValue=de)}var Pl,$s;function vn(e){if(Pl===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Pl=n&&n[1]||"",$s=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pl+e+$s}var ql=!1;function Hl(e,n){if(!e||ql)return"";ql=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(G){var P=G}Reflect.construct(e,[],K)}else{try{K.call()}catch(G){P=G}e.call(K.prototype)}}else{try{throw Error()}catch(G){P=G}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(G){if(G&&P&&typeof G.stack=="string")return[G.stack,P.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),T=g[0],C=g[1];if(T&&C){var w=T.split(`
`),z=C.split(`
`);for(f=a=0;a<w.length&&!w[a].includes("DetermineComponentFrameRoot");)a++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(a===w.length||f===z.length)for(a=w.length-1,f=z.length-1;1<=a&&0<=f&&w[a]!==z[f];)f--;for(;1<=a&&0<=f;a--,f--)if(w[a]!==z[f]){if(a!==1||f!==1)do if(a--,f--,0>f||w[a]!==z[f]){var F=`
`+w[a].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=a&&0<=f);break}}}finally{ql=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?vn(s):""}function Ia(e,n){switch(e.tag){case 26:case 27:case 5:return vn(e.type);case 16:return vn("Lazy");case 13:return e.child!==n&&n!==null?vn("Suspense Fallback"):vn("Suspense");case 19:return vn("SuspenseList");case 0:case 15:return Hl(e.type,!1);case 11:return Hl(e.type.render,!1);case 1:return Hl(e.type,!0);case 31:return vn("Activity");default:return""}}function Js(e){try{var n="",s=null;do n+=Ia(e,s),s=e,e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Gl=Object.prototype.hasOwnProperty,zi=i.unstable_scheduleCallback,Vl=i.unstable_cancelCallback,Da=i.unstable_shouldYield,ka=i.unstable_requestPaint,Ct=i.unstable_now,Ua=i.unstable_getCurrentPriorityLevel,Pi=i.unstable_ImmediatePriority,Xs=i.unstable_UserBlockingPriority,qi=i.unstable_NormalPriority,La=i.unstable_LowPriority,Bl=i.unstable_IdlePriority,za=i.log,Pa=i.unstable_setDisableYieldValue,pi=null,At=null;function rn(e){if(typeof za=="function"&&Pa(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(pi,e)}catch{}}var _t=Math.clz32?Math.clz32:Ks,qa=Math.log,Ha=Math.LN2;function Ks(e){return e>>>=0,e===0?32:31-(qa(e)/Ha|0)|0}var k=256,$=262144,X=4194304;function O(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function le(e,n,s){var a=e.pendingLanes;if(a===0)return 0;var f=0,g=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var C=a&134217727;return C!==0?(a=C&~g,a!==0?f=O(a):(T&=C,T!==0?f=O(T):s||(s=C&~e,s!==0&&(f=O(s))))):(C=a&~g,C!==0?f=O(C):T!==0?f=O(T):s||(s=a&~e,s!==0&&(f=O(s)))),f===0?0:n!==0&&n!==f&&(n&g)===0&&(g=f&-f,s=n&-n,g>=s||g===32&&(s&4194048)!==0)?n:f}function Te(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function se(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var e=X;return X<<=1,(X&62914560)===0&&(X=4194304),e}function fe(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ge(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fe(e,n,s,a,f,g){var T=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var C=e.entanglements,w=e.expirationTimes,z=e.hiddenUpdates;for(s=T&~s;0<s;){var F=31-_t(s),K=1<<F;C[F]=0,w[F]=-1;var P=z[F];if(P!==null)for(z[F]=null,F=0;F<P.length;F++){var G=P[F];G!==null&&(G.lane&=-536870913)}s&=~K}a!==0&&Lt(e,a,0),g!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=g&~(T&~n))}function Lt(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var a=31-_t(n);e.entangledLanes|=n,e.entanglements[a]=e.entanglements[a]|1073741824|s&261930}function un(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-_t(s),f=1<<a;f&n|e[a]&n&&(e[a]|=n),s&=~f}}function cn(e,n){var s=n&-n;return s=(s&42)!==0?1:Ne(s),(s&(e.suspendedLanes|n))!==0?0:s}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pe(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Qs(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:Ch(e.type))}function Fl(e,n){var s=Z.p;try{return Z.p=e,n()}finally{Z.p=s}}var Vn=Math.random().toString(36).slice(2),gt="__reactFiber$"+Vn,bt="__reactProps$"+Vn,Hi="__reactContainer$"+Vn,Ga="__reactEvents$"+Vn,Ry="__reactListeners$"+Vn,My="__reactHandles$"+Vn,Hc="__reactResources$"+Vn,Ol="__reactMarker$"+Vn;function Va(e){delete e[gt],delete e[bt],delete e[Ga],delete e[Ry],delete e[My]}function Gi(e){var n=e[gt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Hi]||s[gt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=ah(e);e!==null;){if(s=e[gt])return s;e=ah(e)}return n}e=s,s=e.parentNode}return null}function Vi(e){if(e=e[gt]||e[Hi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Yl(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(o(33))}function Bi(e){var n=e[Hc];return n||(n=e[Hc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ht(e){e[Ol]=!0}var Gc=new Set,Vc={};function hi(e,n){Fi(e,n),Fi(e+"Capture",n)}function Fi(e,n){for(Vc[e]=n,e=0;e<n.length;e++)Gc.add(n[e])}var Iy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},Fc={};function Dy(e){return Gl.call(Fc,e)?!0:Gl.call(Bc,e)?!1:Iy.test(e)?Fc[e]=!0:(Bc[e]=!0,!1)}function js(e,n,s){if(Dy(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var a=n.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Zs(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function xn(e,n,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+a)}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oc(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ky(e,n,s){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(T){s=""+T,g.call(this,T)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(T){s=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ba(e){if(!e._valueTracker){var n=Oc(e)?"checked":"value";e._valueTracker=ky(e,n,""+e[n])}}function Yc(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=Oc(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function Ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Uy=/[\n"\\]/g;function Ot(e){return e.replace(Uy,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Fa(e,n,s,a,f,g,T,C){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ft(n)):e.value!==""+Ft(n)&&(e.value=""+Ft(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?Oa(e,T,Ft(n)):s!=null?Oa(e,T,Ft(s)):a!=null&&e.removeAttribute("value"),f==null&&g!=null&&(e.defaultChecked=!!g),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Ft(C):e.removeAttribute("name")}function $c(e,n,s,a,f,g,T,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){Ba(e);return}s=s!=null?""+Ft(s):"",n=n!=null?""+Ft(n):s,C||n===e.value||(e.value=n),e.defaultValue=n}a=a??f,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=C?e.checked:!!a,e.defaultChecked=!!a,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),Ba(e)}function Oa(e,n,s){n==="number"&&Ws(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Oi(e,n,s,a){if(e=e.options,n){n={};for(var f=0;f<s.length;f++)n["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=n.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Ft(s),n=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Jc(e,n,s){if(n!=null&&(n=""+Ft(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+Ft(s):""}function Xc(e,n,s,a){if(n==null){if(a!=null){if(s!=null)throw Error(o(92));if(ce(a)){if(1<a.length)throw Error(o(93));a=a[0]}s=a}s==null&&(s=""),n=s}s=Ft(n),e.defaultValue=s,a=e.textContent,a===s&&a!==""&&a!==null&&(e.value=a),Ba(e)}function Yi(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Ly=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kc(e,n,s){var a=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?a?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":a?e.setProperty(n,s):typeof s!="number"||s===0||Ly.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Qc(e,n,s){if(n!=null&&typeof n!="object")throw Error(o(62));if(e=e.style,s!=null){for(var a in s)!s.hasOwnProperty(a)||n!=null&&n.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var f in n)a=n[f],n.hasOwnProperty(f)&&s[f]!==a&&Kc(e,f,a)}else for(var g in n)n.hasOwnProperty(g)&&Kc(e,g,n[g])}function Ya(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Py=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eo(e){return Py.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Sn(){}var $a=null;function Ja(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $i=null,Ji=null;function jc(e){var n=Vi(e);if(n&&(e=n.stateNode)){var s=e[bt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Fa(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ot(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var f=a[bt]||null;if(!f)throw Error(o(90));Fa(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<s.length;n++)a=s[n],a.form===e.form&&Yc(a)}break e;case"textarea":Jc(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Oi(e,!!s.multiple,n,!1)}}}var Xa=!1;function Zc(e,n,s){if(Xa)return e(n,s);Xa=!0;try{var a=e(n);return a}finally{if(Xa=!1,($i!==null||Ji!==null)&&(Bo(),$i&&(n=$i,e=Ji,Ji=$i=null,jc(n),e)))for(n=0;n<e.length;n++)jc(e[n])}}function $l(e,n){var s=e.stateNode;if(s===null)return null;var a=s[bt]||null;if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ka=!1;if(Tn)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{Ka=!1}var Bn=null,Qa=null,to=null;function Wc(){if(to)return to;var e,n=Qa,s=n.length,a,f="value"in Bn?Bn.value:Bn.textContent,g=f.length;for(e=0;e<s&&n[e]===f[e];e++);var T=s-e;for(a=1;a<=T&&n[s-a]===f[g-a];a++);return to=f.slice(e,1<a?1-a:void 0)}function no(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function io(){return!0}function ed(){return!1}function Rt(e){function n(s,a,f,g,T){this._reactName=s,this._targetInst=f,this.type=a,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(s=e[C],this[C]=s?s(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?io:ed,this.isPropagationStopped=ed,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),n}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=Rt(mi),Xl=S({},mi,{view:0,detail:0}),qy=Rt(Xl),ja,Za,Kl,so=S({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kl&&(Kl&&e.type==="mousemove"?(ja=e.screenX-Kl.screenX,Za=e.screenY-Kl.screenY):Za=ja=0,Kl=e),ja)},movementY:function(e){return"movementY"in e?e.movementY:Za}}),td=Rt(so),Hy=S({},so,{dataTransfer:0}),Gy=Rt(Hy),Vy=S({},Xl,{relatedTarget:0}),Wa=Rt(Vy),By=S({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fy=Rt(By),Oy=S({},mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yy=Rt(Oy),$y=S({},mi,{data:0}),nd=Rt($y),Jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ky={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qy(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Ky[e])?!!n[e]:!1}function er(){return Qy}var jy=S({},Xl,{key:function(e){if(e.key){var n=Jy[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=no(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(e){return e.type==="keypress"?no(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?no(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zy=Rt(jy),Wy=S({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),id=Rt(Wy),e0=S({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),t0=Rt(e0),n0=S({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),i0=Rt(n0),l0=S({},so,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s0=Rt(l0),o0=S({},mi,{newState:0,oldState:0}),a0=Rt(o0),r0=[9,13,27,32],tr=Tn&&"CompositionEvent"in window,Ql=null;Tn&&"documentMode"in document&&(Ql=document.documentMode);var u0=Tn&&"TextEvent"in window&&!Ql,ld=Tn&&(!tr||Ql&&8<Ql&&11>=Ql),sd=" ",od=!1;function ad(e,n){switch(e){case"keyup":return r0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xi=!1;function c0(e,n){switch(e){case"compositionend":return rd(n);case"keypress":return n.which!==32?null:(od=!0,sd);case"textInput":return e=n.data,e===sd&&od?null:e;default:return null}}function d0(e,n){if(Xi)return e==="compositionend"||!tr&&ad(e,n)?(e=Wc(),to=Qa=Bn=null,Xi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ld&&n.locale!=="ko"?null:n.data;default:return null}}var f0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!f0[e.type]:n==="textarea"}function cd(e,n,s,a){$i?Ji?Ji.push(a):Ji=[a]:$i=a,n=Ko(n,"onChange"),0<n.length&&(s=new lo("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var jl=null,Zl=null;function p0(e){Jp(e,0)}function oo(e){var n=Yl(e);if(Yc(n))return e}function dd(e,n){if(e==="change")return n}var fd=!1;if(Tn){var nr;if(Tn){var ir="oninput"in document;if(!ir){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),ir=typeof pd.oninput=="function"}nr=ir}else nr=!1;fd=nr&&(!document.documentMode||9<document.documentMode)}function hd(){jl&&(jl.detachEvent("onpropertychange",md),Zl=jl=null)}function md(e){if(e.propertyName==="value"&&oo(Zl)){var n=[];cd(n,Zl,e,Ja(e)),Zc(p0,n)}}function h0(e,n,s){e==="focusin"?(hd(),jl=n,Zl=s,jl.attachEvent("onpropertychange",md)):e==="focusout"&&hd()}function m0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oo(Zl)}function g0(e,n){if(e==="click")return oo(n)}function y0(e,n){if(e==="input"||e==="change")return oo(n)}function v0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var zt=typeof Object.is=="function"?Object.is:v0;function Wl(e,n){if(zt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var f=s[a];if(!Gl.call(n,f)||!zt(e[f],n[f]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,n){var s=gd(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=gd(s)}}function vd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?vd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function xd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ws(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Ws(e.document)}return n}function lr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var x0=Tn&&"documentMode"in document&&11>=document.documentMode,Ki=null,sr=null,es=null,or=!1;function Sd(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;or||Ki==null||Ki!==Ws(a)||(a=Ki,"selectionStart"in a&&lr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),es&&Wl(es,a)||(es=a,a=Ko(sr,"onSelect"),0<a.length&&(n=new lo("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Ki)))}function gi(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Qi={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionrun:gi("Transition","TransitionRun"),transitionstart:gi("Transition","TransitionStart"),transitioncancel:gi("Transition","TransitionCancel"),transitionend:gi("Transition","TransitionEnd")},ar={},Td={};Tn&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function yi(e){if(ar[e])return ar[e];if(!Qi[e])return e;var n=Qi[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Td)return ar[e]=n[s];return e}var Ed=yi("animationend"),Cd=yi("animationiteration"),Ad=yi("animationstart"),S0=yi("transitionrun"),T0=yi("transitionstart"),E0=yi("transitioncancel"),_d=yi("transitionend"),Nd=new Map,rr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rr.push("scrollEnd");function tn(e,n){Nd.set(e,n),hi(n,[e])}var ao=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yt=[],ji=0,ur=0;function ro(){for(var e=ji,n=ur=ji=0;n<e;){var s=Yt[n];Yt[n++]=null;var a=Yt[n];Yt[n++]=null;var f=Yt[n];Yt[n++]=null;var g=Yt[n];if(Yt[n++]=null,a!==null&&f!==null){var T=a.pending;T===null?f.next=f:(f.next=T.next,T.next=f),a.pending=f}g!==0&&wd(s,f,g)}}function uo(e,n,s,a){Yt[ji++]=e,Yt[ji++]=n,Yt[ji++]=s,Yt[ji++]=a,ur|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function cr(e,n,s,a){return uo(e,n,s,a),co(e)}function vi(e,n){return uo(e,null,null,n),co(e)}function wd(e,n,s){e.lanes|=s;var a=e.alternate;a!==null&&(a.lanes|=s);for(var f=!1,g=e.return;g!==null;)g.childLanes|=s,a=g.alternate,a!==null&&(a.childLanes|=s),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(f=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,f&&n!==null&&(f=31-_t(s),e=g.hiddenUpdates,a=e[f],a===null?e[f]=[n]:a.push(n),n.lane=s|536870912),g):null}function co(e){if(50<Es)throw Es=0,xu=null,Error(o(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Zi={};function C0(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,n,s,a){return new C0(e,n,s,a)}function dr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function En(e,n){var s=e.alternate;return s===null?(s=Pt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function bd(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function fo(e,n,s,a,f,g){var T=0;if(a=e,typeof e=="function")dr(e)&&(T=1);else if(typeof e=="string")T=bv(e,s,j.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ae:return e=Pt(31,s,n,f),e.elementType=ae,e.lanes=g,e;case N:return xi(s.children,f,g,n);case R:T=8,f|=24;break;case I:return e=Pt(12,s,n,f|2),e.elementType=I,e.lanes=g,e;case Y:return e=Pt(13,s,n,f),e.elementType=Y,e.lanes=g,e;case ee:return e=Pt(19,s,n,f),e.elementType=ee,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:T=10;break e;case H:T=9;break e;case B:T=11;break e;case ne:T=14;break e;case he:T=16,a=null;break e}T=29,s=Error(o(130,e===null?"null":typeof e,"")),a=null}return n=Pt(T,s,n,f),n.elementType=e,n.type=a,n.lanes=g,n}function xi(e,n,s,a){return e=Pt(7,e,a,n),e.lanes=s,e}function fr(e,n,s){return e=Pt(6,e,null,n),e.lanes=s,e}function Rd(e){var n=Pt(18,null,null,0);return n.stateNode=e,n}function pr(e,n,s){return n=Pt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Md=new WeakMap;function $t(e,n){if(typeof e=="object"&&e!==null){var s=Md.get(e);return s!==void 0?s:(n={value:e,source:n,stack:Js(n)},Md.set(e,n),n)}return{value:e,source:n,stack:Js(n)}}var Wi=[],el=0,po=null,ts=0,Jt=[],Xt=0,Fn=null,dn=1,fn="";function Cn(e,n){Wi[el++]=ts,Wi[el++]=po,po=e,ts=n}function Id(e,n,s){Jt[Xt++]=dn,Jt[Xt++]=fn,Jt[Xt++]=Fn,Fn=e;var a=dn;e=fn;var f=32-_t(a)-1;a&=~(1<<f),s+=1;var g=32-_t(n)+f;if(30<g){var T=f-f%5;g=(a&(1<<T)-1).toString(32),a>>=T,f-=T,dn=1<<32-_t(n)+f|s<<f|a,fn=g+e}else dn=1<<g|s<<f|a,fn=e}function hr(e){e.return!==null&&(Cn(e,1),Id(e,1,0))}function mr(e){for(;e===po;)po=Wi[--el],Wi[el]=null,ts=Wi[--el],Wi[el]=null;for(;e===Fn;)Fn=Jt[--Xt],Jt[Xt]=null,fn=Jt[--Xt],Jt[Xt]=null,dn=Jt[--Xt],Jt[Xt]=null}function Dd(e,n){Jt[Xt++]=dn,Jt[Xt++]=fn,Jt[Xt++]=Fn,dn=n.id,fn=n.overflow,Fn=e}var yt=null,Ze=null,ze=!1,On=null,Kt=!1,gr=Error(o(519));function Yn(e){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ns($t(n,e)),gr}function kd(e){var n=e.stateNode,s=e.type,a=e.memoizedProps;switch(n[gt]=e,n[bt]=a,s){case"dialog":ke("cancel",n),ke("close",n);break;case"iframe":case"object":case"embed":ke("load",n);break;case"video":case"audio":for(s=0;s<As.length;s++)ke(As[s],n);break;case"source":ke("error",n);break;case"img":case"image":case"link":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"input":ke("invalid",n),$c(n,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":ke("invalid",n);break;case"textarea":ke("invalid",n),Xc(n,a.value,a.defaultValue,a.children)}s=a.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||a.suppressHydrationWarning===!0||jp(n.textContent,s)?(a.popover!=null&&(ke("beforetoggle",n),ke("toggle",n)),a.onScroll!=null&&ke("scroll",n),a.onScrollEnd!=null&&ke("scrollend",n),a.onClick!=null&&(n.onclick=Sn),n=!0):n=!1,n||Yn(e,!0)}function Ud(e){for(yt=e.return;yt;)switch(yt.tag){case 5:case 31:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:yt=yt.return}}function tl(e){if(e!==yt)return!1;if(!ze)return Ud(e),ze=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Uu(e.type,e.memoizedProps)),s=!s),s&&Ze&&Yn(e),Ud(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ze=oh(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ze=oh(e)}else n===27?(n=Ze,si(e.type)?(e=Hu,Hu=null,Ze=e):Ze=n):Ze=yt?jt(e.stateNode.nextSibling):null;return!0}function Si(){Ze=yt=null,ze=!1}function yr(){var e=On;return e!==null&&(kt===null?kt=e:kt.push.apply(kt,e),On=null),e}function ns(e){On===null?On=[e]:On.push(e)}var vr=_(null),Ti=null,An=null;function $n(e,n,s){W(vr,n._currentValue),n._currentValue=s}function _n(e){e._currentValue=vr.current,q(vr)}function xr(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function Sr(e,n,s,a){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var g=f.dependencies;if(g!==null){var T=f.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=f;for(var w=0;w<n.length;w++)if(C.context===n[w]){g.lanes|=s,C=g.alternate,C!==null&&(C.lanes|=s),xr(g.return,s,e),a||(T=null);break e}g=C.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(o(341));T.lanes|=s,g=T.alternate,g!==null&&(g.lanes|=s),xr(T,s,e),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===e){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function nl(e,n,s,a){e=null;for(var f=n,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var C=f.type;zt(f.pendingProps.value,T.value)||(e!==null?e.push(C):e=[C])}}else if(f===we.current){if(T=f.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Rs):e=[Rs])}f=f.return}e!==null&&Sr(n,e,s,a),n.flags|=262144}function ho(e){for(e=e.firstContext;e!==null;){if(!zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ei(e){Ti=e,An=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function vt(e){return Ld(Ti,e)}function mo(e,n){return Ti===null&&Ei(e),Ld(e,n)}function Ld(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},An===null){if(e===null)throw Error(o(308));An=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else An=An.next=n;return s}var A0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,a){e.push(a)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},_0=i.unstable_scheduleCallback,N0=i.unstable_NormalPriority,rt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tr(){return{controller:new A0,data:new Map,refCount:0}}function is(e){e.refCount--,e.refCount===0&&_0(N0,function(){e.controller.abort()})}var ls=null,Er=0,il=0,ll=null;function w0(e,n){if(ls===null){var s=ls=[];Er=0,il=_u(),ll={status:"pending",value:void 0,then:function(a){s.push(a)}}}return Er++,n.then(zd,zd),n}function zd(){if(--Er===0&&ls!==null){ll!==null&&(ll.status="fulfilled");var e=ls;ls=null,il=0,ll=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function b0(e,n){var s=[],a={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return e.then(function(){a.status="fulfilled",a.value=n;for(var f=0;f<s.length;f++)(0,s[f])(n)},function(f){for(a.status="rejected",a.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),a}var Pd=U.S;U.S=function(e,n){Tp=Ct(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&w0(e,n),Pd!==null&&Pd(e,n)};var Ci=_(null);function Cr(){var e=Ci.current;return e!==null?e:je.pooledCache}function go(e,n){n===null?W(Ci,Ci.current):W(Ci,n.pool)}function qd(){var e=Cr();return e===null?null:{parent:rt._currentValue,pool:e}}var sl=Error(o(460)),Ar=Error(o(474)),yo=Error(o(542)),vo={then:function(){}};function Hd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gd(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(Sn,Sn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Bd(e),e;default:if(typeof n.status=="string")n.then(Sn,Sn);else{if(e=je,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=n,e.status="pending",e.then(function(a){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=a}},function(a){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=a}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Bd(e),e}throw _i=n,sl}}function Ai(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(_i=s,sl):s}}var _i=null;function Vd(){if(_i===null)throw Error(o(459));var e=_i;return _i=null,e}function Bd(e){if(e===sl||e===yo)throw Error(o(483))}var ol=null,ss=0;function xo(e){var n=ss;return ss+=1,ol===null&&(ol=[]),Gd(ol,e,n)}function os(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function So(e,n){throw n.$$typeof===E?Error(o(525)):(e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Fd(e){function n(M,b){if(e){var L=M.deletions;L===null?(M.deletions=[b],M.flags|=16):L.push(b)}}function s(M,b){if(!e)return null;for(;b!==null;)n(M,b),b=b.sibling;return null}function a(M){for(var b=new Map;M!==null;)M.key!==null?b.set(M.key,M):b.set(M.index,M),M=M.sibling;return b}function f(M,b){return M=En(M,b),M.index=0,M.sibling=null,M}function g(M,b,L){return M.index=L,e?(L=M.alternate,L!==null?(L=L.index,L<b?(M.flags|=67108866,b):L):(M.flags|=67108866,b)):(M.flags|=1048576,b)}function T(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function C(M,b,L,J){return b===null||b.tag!==6?(b=fr(L,M.mode,J),b.return=M,b):(b=f(b,L),b.return=M,b)}function w(M,b,L,J){var ve=L.type;return ve===N?F(M,b,L.props.children,J,L.key):b!==null&&(b.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===he&&Ai(ve)===b.type)?(b=f(b,L.props),os(b,L),b.return=M,b):(b=fo(L.type,L.key,L.props,null,M.mode,J),os(b,L),b.return=M,b)}function z(M,b,L,J){return b===null||b.tag!==4||b.stateNode.containerInfo!==L.containerInfo||b.stateNode.implementation!==L.implementation?(b=pr(L,M.mode,J),b.return=M,b):(b=f(b,L.children||[]),b.return=M,b)}function F(M,b,L,J,ve){return b===null||b.tag!==7?(b=xi(L,M.mode,J,ve),b.return=M,b):(b=f(b,L),b.return=M,b)}function K(M,b,L){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=fr(""+b,M.mode,L),b.return=M,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case A:return L=fo(b.type,b.key,b.props,null,M.mode,L),os(L,b),L.return=M,L;case D:return b=pr(b,M.mode,L),b.return=M,b;case he:return b=Ai(b),K(M,b,L)}if(ce(b)||me(b))return b=xi(b,M.mode,L,null),b.return=M,b;if(typeof b.then=="function")return K(M,xo(b),L);if(b.$$typeof===V)return K(M,mo(M,b),L);So(M,b)}return null}function P(M,b,L,J){var ve=b!==null?b.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ve!==null?null:C(M,b,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return L.key===ve?w(M,b,L,J):null;case D:return L.key===ve?z(M,b,L,J):null;case he:return L=Ai(L),P(M,b,L,J)}if(ce(L)||me(L))return ve!==null?null:F(M,b,L,J,null);if(typeof L.then=="function")return P(M,b,xo(L),J);if(L.$$typeof===V)return P(M,b,mo(M,L),J);So(M,L)}return null}function G(M,b,L,J,ve){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return M=M.get(L)||null,C(b,M,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return M=M.get(J.key===null?L:J.key)||null,w(b,M,J,ve);case D:return M=M.get(J.key===null?L:J.key)||null,z(b,M,J,ve);case he:return J=Ai(J),G(M,b,L,J,ve)}if(ce(J)||me(J))return M=M.get(L)||null,F(b,M,J,ve,null);if(typeof J.then=="function")return G(M,b,L,xo(J),ve);if(J.$$typeof===V)return G(M,b,L,mo(b,J),ve);So(b,J)}return null}function ue(M,b,L,J){for(var ve=null,qe=null,pe=b,Me=b=0,Le=null;pe!==null&&Me<L.length;Me++){pe.index>Me?(Le=pe,pe=null):Le=pe.sibling;var He=P(M,pe,L[Me],J);if(He===null){pe===null&&(pe=Le);break}e&&pe&&He.alternate===null&&n(M,pe),b=g(He,b,Me),qe===null?ve=He:qe.sibling=He,qe=He,pe=Le}if(Me===L.length)return s(M,pe),ze&&Cn(M,Me),ve;if(pe===null){for(;Me<L.length;Me++)pe=K(M,L[Me],J),pe!==null&&(b=g(pe,b,Me),qe===null?ve=pe:qe.sibling=pe,qe=pe);return ze&&Cn(M,Me),ve}for(pe=a(pe);Me<L.length;Me++)Le=G(pe,M,Me,L[Me],J),Le!==null&&(e&&Le.alternate!==null&&pe.delete(Le.key===null?Me:Le.key),b=g(Le,b,Me),qe===null?ve=Le:qe.sibling=Le,qe=Le);return e&&pe.forEach(function(ci){return n(M,ci)}),ze&&Cn(M,Me),ve}function Se(M,b,L,J){if(L==null)throw Error(o(151));for(var ve=null,qe=null,pe=b,Me=b=0,Le=null,He=L.next();pe!==null&&!He.done;Me++,He=L.next()){pe.index>Me?(Le=pe,pe=null):Le=pe.sibling;var ci=P(M,pe,He.value,J);if(ci===null){pe===null&&(pe=Le);break}e&&pe&&ci.alternate===null&&n(M,pe),b=g(ci,b,Me),qe===null?ve=ci:qe.sibling=ci,qe=ci,pe=Le}if(He.done)return s(M,pe),ze&&Cn(M,Me),ve;if(pe===null){for(;!He.done;Me++,He=L.next())He=K(M,He.value,J),He!==null&&(b=g(He,b,Me),qe===null?ve=He:qe.sibling=He,qe=He);return ze&&Cn(M,Me),ve}for(pe=a(pe);!He.done;Me++,He=L.next())He=G(pe,M,Me,He.value,J),He!==null&&(e&&He.alternate!==null&&pe.delete(He.key===null?Me:He.key),b=g(He,b,Me),qe===null?ve=He:qe.sibling=He,qe=He);return e&&pe.forEach(function(Hv){return n(M,Hv)}),ze&&Cn(M,Me),ve}function Ke(M,b,L,J){if(typeof L=="object"&&L!==null&&L.type===N&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case A:e:{for(var ve=L.key;b!==null;){if(b.key===ve){if(ve=L.type,ve===N){if(b.tag===7){s(M,b.sibling),J=f(b,L.props.children),J.return=M,M=J;break e}}else if(b.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===he&&Ai(ve)===b.type){s(M,b.sibling),J=f(b,L.props),os(J,L),J.return=M,M=J;break e}s(M,b);break}else n(M,b);b=b.sibling}L.type===N?(J=xi(L.props.children,M.mode,J,L.key),J.return=M,M=J):(J=fo(L.type,L.key,L.props,null,M.mode,J),os(J,L),J.return=M,M=J)}return T(M);case D:e:{for(ve=L.key;b!==null;){if(b.key===ve)if(b.tag===4&&b.stateNode.containerInfo===L.containerInfo&&b.stateNode.implementation===L.implementation){s(M,b.sibling),J=f(b,L.children||[]),J.return=M,M=J;break e}else{s(M,b);break}else n(M,b);b=b.sibling}J=pr(L,M.mode,J),J.return=M,M=J}return T(M);case he:return L=Ai(L),Ke(M,b,L,J)}if(ce(L))return ue(M,b,L,J);if(me(L)){if(ve=me(L),typeof ve!="function")throw Error(o(150));return L=ve.call(L),Se(M,b,L,J)}if(typeof L.then=="function")return Ke(M,b,xo(L),J);if(L.$$typeof===V)return Ke(M,b,mo(M,L),J);So(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,b!==null&&b.tag===6?(s(M,b.sibling),J=f(b,L),J.return=M,M=J):(s(M,b),J=fr(L,M.mode,J),J.return=M,M=J),T(M)):s(M,b)}return function(M,b,L,J){try{ss=0;var ve=Ke(M,b,L,J);return ol=null,ve}catch(pe){if(pe===sl||pe===yo)throw pe;var qe=Pt(29,pe,null,M.mode);return qe.lanes=J,qe.return=M,qe}finally{}}}var Ni=Fd(!0),Od=Fd(!1),Jn=!1;function _r(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nr(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Xn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Kn(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Be&2)!==0){var f=a.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),a.pending=n,n=co(e),wd(e,null,s),n}return uo(e,a,n,s),co(e)}function as(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,un(e,s)}}function wr(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var f=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var T={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?f=g=T:g=g.next=T,s=s.next}while(s!==null);g===null?f=g=n:g=g.next=n}else f=g=n;s={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var br=!1;function rs(){if(br){var e=ll;if(e!==null)throw e}}function us(e,n,s,a){br=!1;var f=e.updateQueue;Jn=!1;var g=f.firstBaseUpdate,T=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var w=C,z=w.next;w.next=null,T===null?g=z:T.next=z,T=w;var F=e.alternate;F!==null&&(F=F.updateQueue,C=F.lastBaseUpdate,C!==T&&(C===null?F.firstBaseUpdate=z:C.next=z,F.lastBaseUpdate=w))}if(g!==null){var K=f.baseState;T=0,F=z=w=null,C=g;do{var P=C.lane&-536870913,G=P!==C.lane;if(G?(Ue&P)===P:(a&P)===P){P!==0&&P===il&&(br=!0),F!==null&&(F=F.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ue=e,Se=C;P=n;var Ke=s;switch(Se.tag){case 1:if(ue=Se.payload,typeof ue=="function"){K=ue.call(Ke,K,P);break e}K=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=Se.payload,P=typeof ue=="function"?ue.call(Ke,K,P):ue,P==null)break e;K=S({},K,P);break e;case 2:Jn=!0}}P=C.callback,P!==null&&(e.flags|=64,G&&(e.flags|=8192),G=f.callbacks,G===null?f.callbacks=[P]:G.push(P))}else G={lane:P,tag:C.tag,payload:C.payload,callback:C.callback,next:null},F===null?(z=F=G,w=K):F=F.next=G,T|=P;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;G=C,C=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);F===null&&(w=K),f.baseState=w,f.firstBaseUpdate=z,f.lastBaseUpdate=F,g===null&&(f.shared.lanes=0),ei|=T,e.lanes=T,e.memoizedState=K}}function Yd(e,n){if(typeof e!="function")throw Error(o(191,e));e.call(n)}function $d(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Yd(s[e],n)}var al=_(null),To=_(0);function Jd(e,n){e=Un,W(To,e),W(al,n),Un=e|n.baseLanes}function Rr(){W(To,Un),W(al,al.current)}function Mr(){Un=To.current,q(al),q(To)}var qt=_(null),Qt=null;function Qn(e){var n=e.alternate;W(ot,ot.current&1),W(qt,e),Qt===null&&(n===null||al.current!==null||n.memoizedState!==null)&&(Qt=e)}function Ir(e){W(ot,ot.current),W(qt,e),Qt===null&&(Qt=e)}function Xd(e){e.tag===22?(W(ot,ot.current),W(qt,e),Qt===null&&(Qt=e)):jn()}function jn(){W(ot,ot.current),W(qt,qt.current)}function Ht(e){q(qt),Qt===e&&(Qt=null),q(ot)}var ot=_(0);function Eo(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Pu(s)||qu(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Nn=0,be=null,Je=null,ut=null,Co=!1,rl=!1,wi=!1,Ao=0,cs=0,ul=null,R0=0;function it(){throw Error(o(321))}function Dr(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!zt(e[s],n[s]))return!1;return!0}function kr(e,n,s,a,f,g){return Nn=g,be=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,U.H=e===null||e.memoizedState===null?Df:Xr,wi=!1,g=s(a,f),wi=!1,rl&&(g=Qd(n,s,a,f)),Kd(e),g}function Kd(e){U.H=ps;var n=Je!==null&&Je.next!==null;if(Nn=0,ut=Je=be=null,Co=!1,cs=0,ul=null,n)throw Error(o(300));e===null||ct||(e=e.dependencies,e!==null&&ho(e)&&(ct=!0))}function Qd(e,n,s,a){be=e;var f=0;do{if(rl&&(ul=null),cs=0,rl=!1,25<=f)throw Error(o(301));if(f+=1,ut=Je=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}U.H=kf,g=n(s,a)}while(rl);return g}function M0(){var e=U.H,n=e.useState()[0];return n=typeof n.then=="function"?ds(n):n,e=e.useState()[0],(Je!==null?Je.memoizedState:null)!==e&&(be.flags|=1024),n}function Ur(){var e=Ao!==0;return Ao=0,e}function Lr(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function zr(e){if(Co){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Co=!1}Nn=0,ut=Je=be=null,rl=!1,cs=Ao=0,ul=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?be.memoizedState=ut=e:ut=ut.next=e,ut}function at(){if(Je===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var n=ut===null?be.memoizedState:ut.next;if(n!==null)ut=n,Je=e;else{if(e===null)throw be.alternate===null?Error(o(467)):Error(o(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ut===null?be.memoizedState=ut=e:ut=ut.next=e}return ut}function _o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ds(e){var n=cs;return cs+=1,ul===null&&(ul=[]),e=Gd(ul,e,n),n=be,(ut===null?n.memoizedState:ut.next)===null&&(n=n.alternate,U.H=n===null||n.memoizedState===null?Df:Xr),e}function No(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ds(e);if(e.$$typeof===V)return vt(e)}throw Error(o(438,String(e)))}function Pr(e){var n=null,s=be.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var a=be.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(n={data:a.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=_o(),be.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),a=0;a<e;a++)s[a]=te;return n.index++,s}function wn(e,n){return typeof n=="function"?n(e):n}function wo(e){var n=at();return qr(n,Je,e)}function qr(e,n,s){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=s;var f=e.baseQueue,g=a.pending;if(g!==null){if(f!==null){var T=f.next;f.next=g.next,g.next=T}n.baseQueue=f=g,a.pending=null}if(g=e.baseState,f===null)e.memoizedState=g;else{n=f.next;var C=T=null,w=null,z=n,F=!1;do{var K=z.lane&-536870913;if(K!==z.lane?(Ue&K)===K:(Nn&K)===K){var P=z.revertLane;if(P===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),K===il&&(F=!0);else if((Nn&P)===P){z=z.next,P===il&&(F=!0);continue}else K={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},w===null?(C=w=K,T=g):w=w.next=K,be.lanes|=P,ei|=P;K=z.action,wi&&s(g,K),g=z.hasEagerState?z.eagerState:s(g,K)}else P={lane:K,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},w===null?(C=w=P,T=g):w=w.next=P,be.lanes|=K,ei|=K;z=z.next}while(z!==null&&z!==n);if(w===null?T=g:w.next=C,!zt(g,e.memoizedState)&&(ct=!0,F&&(s=ll,s!==null)))throw s;e.memoizedState=g,e.baseState=T,e.baseQueue=w,a.lastRenderedState=g}return f===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Hr(e){var n=at(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,f=s.pending,g=n.memoizedState;if(f!==null){s.pending=null;var T=f=f.next;do g=e(g,T.action),T=T.next;while(T!==f);zt(g,n.memoizedState)||(ct=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,a]}function jd(e,n,s){var a=be,f=at(),g=ze;if(g){if(s===void 0)throw Error(o(407));s=s()}else s=n();var T=!zt((Je||f).memoizedState,s);if(T&&(f.memoizedState=s,ct=!0),f=f.queue,Br(ef.bind(null,a,f,e),[e]),f.getSnapshot!==n||T||ut!==null&&ut.memoizedState.tag&1){if(a.flags|=2048,cl(9,{destroy:void 0},Wd.bind(null,a,f,s,n),null),je===null)throw Error(o(349));g||(Nn&127)!==0||Zd(a,n,s)}return s}function Zd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=be.updateQueue,n===null?(n=_o(),be.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Wd(e,n,s,a){n.value=s,n.getSnapshot=a,tf(n)&&nf(e)}function ef(e,n,s){return s(function(){tf(n)&&nf(e)})}function tf(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!zt(e,s)}catch{return!0}}function nf(e){var n=vi(e,2);n!==null&&Ut(n,e,2)}function Gr(e){var n=Nt();if(typeof e=="function"){var s=e;if(e=s(),wi){rn(!0);try{s()}finally{rn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:e},n}function lf(e,n,s,a){return e.baseState=s,qr(e,Je,typeof a=="function"?a:wn)}function I0(e,n,s,a,f){if(Mo(e))throw Error(o(485));if(e=n.action,e!==null){var g={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};U.T!==null?s(!0):g.isTransition=!1,a(g),s=n.pending,s===null?(g.next=n.pending=g,sf(n,g)):(g.next=s.next,n.pending=s.next=g)}}function sf(e,n){var s=n.action,a=n.payload,f=e.state;if(n.isTransition){var g=U.T,T={};U.T=T;try{var C=s(f,a),w=U.S;w!==null&&w(T,C),of(e,n,C)}catch(z){Vr(e,n,z)}finally{g!==null&&T.types!==null&&(g.types=T.types),U.T=g}}else try{g=s(f,a),of(e,n,g)}catch(z){Vr(e,n,z)}}function of(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(a){af(e,n,a)},function(a){return Vr(e,n,a)}):af(e,n,s)}function af(e,n,s){n.status="fulfilled",n.value=s,rf(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,sf(e,s)))}function Vr(e,n,s){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do n.status="rejected",n.reason=s,rf(n),n=n.next;while(n!==a)}e.action=null}function rf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function uf(e,n){return n}function cf(e,n){if(ze){var s=je.formState;if(s!==null){e:{var a=be;if(ze){if(Ze){t:{for(var f=Ze,g=Kt;f.nodeType!==8;){if(!g){f=null;break t}if(f=jt(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Ze=jt(f.nextSibling),a=f.data==="F!";break e}}Yn(a)}a=!1}a&&(n=s[0])}}return s=Nt(),s.memoizedState=s.baseState=n,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uf,lastRenderedState:n},s.queue=a,s=Rf.bind(null,be,a),a.dispatch=s,a=Gr(!1),g=Jr.bind(null,be,!1,a.queue),a=Nt(),f={state:n,dispatch:null,action:e,pending:null},a.queue=f,s=I0.bind(null,be,f,g,s),f.dispatch=s,a.memoizedState=e,[n,s,!1]}function df(e){var n=at();return ff(n,Je,e)}function ff(e,n,s){if(n=qr(e,n,uf)[0],e=wo(wn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var a=ds(n)}catch(T){throw T===sl?yo:T}else a=n;n=at();var f=n.queue,g=f.dispatch;return s!==n.memoizedState&&(be.flags|=2048,cl(9,{destroy:void 0},D0.bind(null,f,s),null)),[a,g,e]}function D0(e,n){e.action=n}function pf(e){var n=at(),s=Je;if(s!==null)return ff(n,s,e);at(),n=n.memoizedState,s=at();var a=s.queue.dispatch;return s.memoizedState=e,[n,a,!1]}function cl(e,n,s,a){return e={tag:e,create:s,deps:a,inst:n,next:null},n=be.updateQueue,n===null&&(n=_o(),be.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e),e}function hf(){return at().memoizedState}function bo(e,n,s,a){var f=Nt();be.flags|=e,f.memoizedState=cl(1|n,{destroy:void 0},s,a===void 0?null:a)}function Ro(e,n,s,a){var f=at();a=a===void 0?null:a;var g=f.memoizedState.inst;Je!==null&&a!==null&&Dr(a,Je.memoizedState.deps)?f.memoizedState=cl(n,g,s,a):(be.flags|=e,f.memoizedState=cl(1|n,g,s,a))}function mf(e,n){bo(8390656,8,e,n)}function Br(e,n){Ro(2048,8,e,n)}function k0(e){be.flags|=4;var n=be.updateQueue;if(n===null)n=_o(),be.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function gf(e){var n=at().memoizedState;return k0({ref:n,nextImpl:e}),function(){if((Be&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function yf(e,n){return Ro(4,2,e,n)}function vf(e,n){return Ro(4,4,e,n)}function xf(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Sf(e,n,s){s=s!=null?s.concat([e]):null,Ro(4,4,xf.bind(null,n,e),s)}function Fr(){}function Tf(e,n){var s=at();n=n===void 0?null:n;var a=s.memoizedState;return n!==null&&Dr(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function Ef(e,n){var s=at();n=n===void 0?null:n;var a=s.memoizedState;if(n!==null&&Dr(n,a[1]))return a[0];if(a=e(),wi){rn(!0);try{e()}finally{rn(!1)}}return s.memoizedState=[a,n],a}function Or(e,n,s){return s===void 0||(Nn&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=Cp(),be.lanes|=e,ei|=e,s)}function Cf(e,n,s,a){return zt(s,n)?s:al.current!==null?(e=Or(e,s,a),zt(e,n)||(ct=!0),e):(Nn&42)===0||(Nn&1073741824)!==0&&(Ue&261930)===0?(ct=!0,e.memoizedState=s):(e=Cp(),be.lanes|=e,ei|=e,n)}function Af(e,n,s,a,f){var g=Z.p;Z.p=g!==0&&8>g?g:8;var T=U.T,C={};U.T=C,Jr(e,!1,n,s);try{var w=f(),z=U.S;if(z!==null&&z(C,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=b0(w,a);fs(e,n,F,Bt(e))}else fs(e,n,a,Bt(e))}catch(K){fs(e,n,{then:function(){},status:"rejected",reason:K},Bt())}finally{Z.p=g,T!==null&&C.types!==null&&(T.types=C.types),U.T=T}}function U0(){}function Yr(e,n,s,a){if(e.tag!==5)throw Error(o(476));var f=_f(e).queue;Af(e,f,n,de,s===null?U0:function(){return Nf(e),s(a)})}function _f(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:de},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Nf(e){var n=_f(e);n.next===null&&(n=e.alternate.memoizedState),fs(e,n.next.queue,{},Bt())}function $r(){return vt(Rs)}function wf(){return at().memoizedState}function bf(){return at().memoizedState}function L0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=Bt();e=Xn(s);var a=Kn(n,e,s);a!==null&&(Ut(a,n,s),as(a,n,s)),n={cache:Tr()},e.payload=n;return}n=n.return}}function z0(e,n,s){var a=Bt();s={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Mo(e)?Mf(n,s):(s=cr(e,n,s,a),s!==null&&(Ut(s,e,a),If(s,n,a)))}function Rf(e,n,s){var a=Bt();fs(e,n,s,a)}function fs(e,n,s,a){var f={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Mo(e))Mf(n,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var T=n.lastRenderedState,C=g(T,s);if(f.hasEagerState=!0,f.eagerState=C,zt(C,T))return uo(e,n,f,0),je===null&&ro(),!1}catch{}finally{}if(s=cr(e,n,f,a),s!==null)return Ut(s,e,a),If(s,n,a),!0}return!1}function Jr(e,n,s,a){if(a={lane:2,revertLane:_u(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Mo(e)){if(n)throw Error(o(479))}else n=cr(e,s,a,2),n!==null&&Ut(n,e,2)}function Mo(e){var n=e.alternate;return e===be||n!==null&&n===be}function Mf(e,n){rl=Co=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function If(e,n,s){if((s&4194048)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,un(e,s)}}var ps={readContext:vt,use:No,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};ps.useEffectEvent=it;var Df={readContext:vt,use:No,useCallback:function(e,n){return Nt().memoizedState=[e,n===void 0?null:n],e},useContext:vt,useEffect:mf,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,bo(4194308,4,xf.bind(null,n,e),s)},useLayoutEffect:function(e,n){return bo(4194308,4,e,n)},useInsertionEffect:function(e,n){bo(4,2,e,n)},useMemo:function(e,n){var s=Nt();n=n===void 0?null:n;var a=e();if(wi){rn(!0);try{e()}finally{rn(!1)}}return s.memoizedState=[a,n],a},useReducer:function(e,n,s){var a=Nt();if(s!==void 0){var f=s(n);if(wi){rn(!0);try{s(n)}finally{rn(!1)}}}else f=n;return a.memoizedState=a.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},a.queue=e,e=e.dispatch=z0.bind(null,be,e),[a.memoizedState,e]},useRef:function(e){var n=Nt();return e={current:e},n.memoizedState=e},useState:function(e){e=Gr(e);var n=e.queue,s=Rf.bind(null,be,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:Fr,useDeferredValue:function(e,n){var s=Nt();return Or(s,e,n)},useTransition:function(){var e=Gr(!1);return e=Af.bind(null,be,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var a=be,f=Nt();if(ze){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),je===null)throw Error(o(349));(Ue&127)!==0||Zd(a,n,s)}f.memoizedState=s;var g={value:s,getSnapshot:n};return f.queue=g,mf(ef.bind(null,a,g,e),[e]),a.flags|=2048,cl(9,{destroy:void 0},Wd.bind(null,a,g,s,n),null),s},useId:function(){var e=Nt(),n=je.identifierPrefix;if(ze){var s=fn,a=dn;s=(a&~(1<<32-_t(a)-1)).toString(32)+s,n="_"+n+"R_"+s,s=Ao++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=R0++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:$r,useFormState:cf,useActionState:cf,useOptimistic:function(e){var n=Nt();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Jr.bind(null,be,!0,s),s.dispatch=n,[e,n]},useMemoCache:Pr,useCacheRefresh:function(){return Nt().memoizedState=L0.bind(null,be)},useEffectEvent:function(e){var n=Nt(),s={impl:e};return n.memoizedState=s,function(){if((Be&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},Xr={readContext:vt,use:No,useCallback:Tf,useContext:vt,useEffect:Br,useImperativeHandle:Sf,useInsertionEffect:yf,useLayoutEffect:vf,useMemo:Ef,useReducer:wo,useRef:hf,useState:function(){return wo(wn)},useDebugValue:Fr,useDeferredValue:function(e,n){var s=at();return Cf(s,Je.memoizedState,e,n)},useTransition:function(){var e=wo(wn)[0],n=at().memoizedState;return[typeof e=="boolean"?e:ds(e),n]},useSyncExternalStore:jd,useId:wf,useHostTransitionStatus:$r,useFormState:df,useActionState:df,useOptimistic:function(e,n){var s=at();return lf(s,Je,e,n)},useMemoCache:Pr,useCacheRefresh:bf};Xr.useEffectEvent=gf;var kf={readContext:vt,use:No,useCallback:Tf,useContext:vt,useEffect:Br,useImperativeHandle:Sf,useInsertionEffect:yf,useLayoutEffect:vf,useMemo:Ef,useReducer:Hr,useRef:hf,useState:function(){return Hr(wn)},useDebugValue:Fr,useDeferredValue:function(e,n){var s=at();return Je===null?Or(s,e,n):Cf(s,Je.memoizedState,e,n)},useTransition:function(){var e=Hr(wn)[0],n=at().memoizedState;return[typeof e=="boolean"?e:ds(e),n]},useSyncExternalStore:jd,useId:wf,useHostTransitionStatus:$r,useFormState:pf,useActionState:pf,useOptimistic:function(e,n){var s=at();return Je!==null?lf(s,Je,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Pr,useCacheRefresh:bf};kf.useEffectEvent=gf;function Kr(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:S({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Qr={enqueueSetState:function(e,n,s){e=e._reactInternals;var a=Bt(),f=Xn(a);f.payload=n,s!=null&&(f.callback=s),n=Kn(e,f,a),n!==null&&(Ut(n,e,a),as(n,e,a))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=Bt(),f=Xn(a);f.tag=1,f.payload=n,s!=null&&(f.callback=s),n=Kn(e,f,a),n!==null&&(Ut(n,e,a),as(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Bt(),a=Xn(s);a.tag=2,n!=null&&(a.callback=n),n=Kn(e,a,s),n!==null&&(Ut(n,e,s),as(n,e,s))}};function Uf(e,n,s,a,f,g,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,g,T):n.prototype&&n.prototype.isPureReactComponent?!Wl(s,a)||!Wl(f,g):!0}function Lf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&Qr.enqueueReplaceState(n,n.state,null)}function bi(e,n){var s=n;if("ref"in n){s={};for(var a in n)a!=="ref"&&(s[a]=n[a])}if(e=e.defaultProps){s===n&&(s=S({},s));for(var f in e)s[f]===void 0&&(s[f]=e[f])}return s}function zf(e){ao(e)}function Pf(e){console.error(e)}function qf(e){ao(e)}function Io(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(a){setTimeout(function(){throw a})}}function Hf(e,n,s){try{var a=e.onCaughtError;a(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jr(e,n,s){return s=Xn(s),s.tag=3,s.payload={element:null},s.callback=function(){Io(e,n)},s}function Gf(e){return e=Xn(e),e.tag=3,e}function Vf(e,n,s,a){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;e.payload=function(){return f(g)},e.callback=function(){Hf(n,s,a)}}var T=s.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){Hf(n,s,a),typeof f!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})})}function P0(e,n,s,a,f){if(s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(n=s.alternate,n!==null&&nl(n,s,f,!0),s=qt.current,s!==null){switch(s.tag){case 31:case 13:return Qt===null?Fo():s.alternate===null&&lt===0&&(lt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,a===vo?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([a]):n.add(a),Eu(e,a,f)),!1;case 22:return s.flags|=65536,a===vo?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([a])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([a]):s.add(a)),Eu(e,a,f)),!1}throw Error(o(435,s.tag))}return Eu(e,a,f),Fo(),!1}if(ze)return n=qt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,a!==gr&&(e=Error(o(422),{cause:a}),ns($t(e,s)))):(a!==gr&&(n=Error(o(423),{cause:a}),ns($t(n,s))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,a=$t(a,s),f=jr(e.stateNode,a,f),wr(e,f),lt!==4&&(lt=2)),!1;var g=Error(o(520),{cause:a});if(g=$t(g,s),Ts===null?Ts=[g]:Ts.push(g),lt!==4&&(lt=2),n===null)return!0;a=$t(a,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=f&-f,s.lanes|=e,e=jr(s.stateNode,a,e),wr(s,e),!1;case 1:if(n=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ti===null||!ti.has(g))))return s.flags|=65536,f&=-f,s.lanes|=f,f=Gf(f),Vf(f,e,s,a),wr(s,f),!1}s=s.return}while(s!==null);return!1}var Zr=Error(o(461)),ct=!1;function xt(e,n,s,a){n.child=e===null?Od(n,null,s,a):Ni(n,e.child,s,a)}function Bf(e,n,s,a,f){s=s.render;var g=n.ref;if("ref"in a){var T={};for(var C in a)C!=="ref"&&(T[C]=a[C])}else T=a;return Ei(n),a=kr(e,n,s,T,g,f),C=Ur(),e!==null&&!ct?(Lr(e,n,f),bn(e,n,f)):(ze&&C&&hr(n),n.flags|=1,xt(e,n,a,f),n.child)}function Ff(e,n,s,a,f){if(e===null){var g=s.type;return typeof g=="function"&&!dr(g)&&g.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=g,Of(e,n,g,a,f)):(e=fo(s.type,null,a,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!ou(e,f)){var T=g.memoizedProps;if(s=s.compare,s=s!==null?s:Wl,s(T,a)&&e.ref===n.ref)return bn(e,n,f)}return n.flags|=1,e=En(g,a),e.ref=n.ref,e.return=n,n.child=e}function Of(e,n,s,a,f){if(e!==null){var g=e.memoizedProps;if(Wl(g,a)&&e.ref===n.ref)if(ct=!1,n.pendingProps=a=g,ou(e,f))(e.flags&131072)!==0&&(ct=!0);else return n.lanes=e.lanes,bn(e,n,f)}return Wr(e,n,s,a,f)}function Yf(e,n,s,a){var f=a.children,g=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|s:s,e!==null){for(a=n.child=e.child,f=0;a!==null;)f=f|a.lanes|a.childLanes,a=a.sibling;a=f&~g}else a=0,n.child=null;return $f(e,n,g,s,a)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&go(n,g!==null?g.cachePool:null),g!==null?Jd(n,g):Rr(),Xd(n);else return a=n.lanes=536870912,$f(e,n,g!==null?g.baseLanes|s:s,s,a)}else g!==null?(go(n,g.cachePool),Jd(n,g),jn(),n.memoizedState=null):(e!==null&&go(n,null),Rr(),jn());return xt(e,n,f,s),n.child}function hs(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function $f(e,n,s,a,f){var g=Cr();return g=g===null?null:{parent:rt._currentValue,pool:g},n.memoizedState={baseLanes:s,cachePool:g},e!==null&&go(n,null),Rr(),Xd(n),e!==null&&nl(e,n,a,!0),n.childLanes=f,null}function Do(e,n){return n=Uo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Jf(e,n,s){return Ni(n,e.child,null,s),e=Do(n,n.pendingProps),e.flags|=2,Ht(n),n.memoizedState=null,e}function q0(e,n,s){var a=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(ze){if(a.mode==="hidden")return e=Do(n,a),n.lanes=536870912,hs(null,e);if(Ir(n),(e=Ze)?(e=sh(e,Kt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:dn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},s=Rd(e),s.return=n,n.child=s,yt=n,Ze=null)):e=null,e===null)throw Yn(n);return n.lanes=536870912,null}return Do(n,a)}var g=e.memoizedState;if(g!==null){var T=g.dehydrated;if(Ir(n),f)if(n.flags&256)n.flags&=-257,n=Jf(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(o(558));else if(ct||nl(e,n,s,!1),f=(s&e.childLanes)!==0,ct||f){if(a=je,a!==null&&(T=cn(a,s),T!==0&&T!==g.retryLane))throw g.retryLane=T,vi(e,T),Ut(a,e,T),Zr;Fo(),n=Jf(e,n,s)}else e=g.treeContext,Ze=jt(T.nextSibling),yt=n,ze=!0,On=null,Kt=!1,e!==null&&Dd(n,e),n=Do(n,a),n.flags|=4096;return n}return e=En(e.child,{mode:a.mode,children:a.children}),e.ref=n.ref,n.child=e,e.return=n,e}function ko(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function Wr(e,n,s,a,f){return Ei(n),s=kr(e,n,s,a,void 0,f),a=Ur(),e!==null&&!ct?(Lr(e,n,f),bn(e,n,f)):(ze&&a&&hr(n),n.flags|=1,xt(e,n,s,f),n.child)}function Xf(e,n,s,a,f,g){return Ei(n),n.updateQueue=null,s=Qd(n,a,s,f),Kd(e),a=Ur(),e!==null&&!ct?(Lr(e,n,g),bn(e,n,g)):(ze&&a&&hr(n),n.flags|=1,xt(e,n,s,g),n.child)}function Kf(e,n,s,a,f){if(Ei(n),n.stateNode===null){var g=Zi,T=s.contextType;typeof T=="object"&&T!==null&&(g=vt(T)),g=new s(a,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Qr,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=a,g.state=n.memoizedState,g.refs={},_r(n),T=s.contextType,g.context=typeof T=="object"&&T!==null?vt(T):Zi,g.state=n.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Kr(n,s,T,a),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Qr.enqueueReplaceState(g,g.state,null),us(n,a,g,f),rs(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),a=!0}else if(e===null){g=n.stateNode;var C=n.memoizedProps,w=bi(s,C);g.props=w;var z=g.context,F=s.contextType;T=Zi,typeof F=="object"&&F!==null&&(T=vt(F));var K=s.getDerivedStateFromProps;F=typeof K=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,F||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||z!==T)&&Lf(n,g,a,T),Jn=!1;var P=n.memoizedState;g.state=P,us(n,a,g,f),rs(),z=n.memoizedState,C||P!==z||Jn?(typeof K=="function"&&(Kr(n,s,K,a),z=n.memoizedState),(w=Jn||Uf(n,s,w,a,P,z,T))?(F||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=z),g.props=a,g.state=z,g.context=T,a=w):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{g=n.stateNode,Nr(e,n),T=n.memoizedProps,F=bi(s,T),g.props=F,K=n.pendingProps,P=g.context,z=s.contextType,w=Zi,typeof z=="object"&&z!==null&&(w=vt(z)),C=s.getDerivedStateFromProps,(z=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==K||P!==w)&&Lf(n,g,a,w),Jn=!1,P=n.memoizedState,g.state=P,us(n,a,g,f),rs();var G=n.memoizedState;T!==K||P!==G||Jn||e!==null&&e.dependencies!==null&&ho(e.dependencies)?(typeof C=="function"&&(Kr(n,s,C,a),G=n.memoizedState),(F=Jn||Uf(n,s,F,a,P,G,w)||e!==null&&e.dependencies!==null&&ho(e.dependencies))?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,G,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,G,w)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=G),g.props=a,g.state=G,g.context=w,a=F):(typeof g.componentDidUpdate!="function"||T===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),a=!1)}return g=a,ko(e,n),a=(n.flags&128)!==0,g||a?(g=n.stateNode,s=a&&typeof s.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&a?(n.child=Ni(n,e.child,null,f),n.child=Ni(n,null,s,f)):xt(e,n,s,f),n.memoizedState=g.state,e=n.child):e=bn(e,n,f),e}function Qf(e,n,s,a){return Si(),n.flags|=256,xt(e,n,s,a),n.child}var eu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tu(e){return{baseLanes:e,cachePool:qd()}}function nu(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=Vt),e}function jf(e,n,s){var a=n.pendingProps,f=!1,g=(n.flags&128)!==0,T;if((T=g)||(T=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),T&&(f=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(ze){if(f?Qn(n):jn(),(e=Ze)?(e=sh(e,Kt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:dn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},s=Rd(e),s.return=n,n.child=s,yt=n,Ze=null)):e=null,e===null)throw Yn(n);return qu(e)?n.lanes=32:n.lanes=536870912,null}var C=a.children;return a=a.fallback,f?(jn(),f=n.mode,C=Uo({mode:"hidden",children:C},f),a=xi(a,f,s,null),C.return=n,a.return=n,C.sibling=a,n.child=C,a=n.child,a.memoizedState=tu(s),a.childLanes=nu(e,T,s),n.memoizedState=eu,hs(null,a)):(Qn(n),iu(n,C))}var w=e.memoizedState;if(w!==null&&(C=w.dehydrated,C!==null)){if(g)n.flags&256?(Qn(n),n.flags&=-257,n=lu(e,n,s)):n.memoizedState!==null?(jn(),n.child=e.child,n.flags|=128,n=null):(jn(),C=a.fallback,f=n.mode,a=Uo({mode:"visible",children:a.children},f),C=xi(C,f,s,null),C.flags|=2,a.return=n,C.return=n,a.sibling=C,n.child=a,Ni(n,e.child,null,s),a=n.child,a.memoizedState=tu(s),a.childLanes=nu(e,T,s),n.memoizedState=eu,n=hs(null,a));else if(Qn(n),qu(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var z=T.dgst;T=z,a=Error(o(419)),a.stack="",a.digest=T,ns({value:a,source:null,stack:null}),n=lu(e,n,s)}else if(ct||nl(e,n,s,!1),T=(s&e.childLanes)!==0,ct||T){if(T=je,T!==null&&(a=cn(T,s),a!==0&&a!==w.retryLane))throw w.retryLane=a,vi(e,a),Ut(T,e,a),Zr;Pu(C)||Fo(),n=lu(e,n,s)}else Pu(C)?(n.flags|=192,n.child=e.child,n=null):(e=w.treeContext,Ze=jt(C.nextSibling),yt=n,ze=!0,On=null,Kt=!1,e!==null&&Dd(n,e),n=iu(n,a.children),n.flags|=4096);return n}return f?(jn(),C=a.fallback,f=n.mode,w=e.child,z=w.sibling,a=En(w,{mode:"hidden",children:a.children}),a.subtreeFlags=w.subtreeFlags&65011712,z!==null?C=En(z,C):(C=xi(C,f,s,null),C.flags|=2),C.return=n,a.return=n,a.sibling=C,n.child=a,hs(null,a),a=n.child,C=e.child.memoizedState,C===null?C=tu(s):(f=C.cachePool,f!==null?(w=rt._currentValue,f=f.parent!==w?{parent:w,pool:w}:f):f=qd(),C={baseLanes:C.baseLanes|s,cachePool:f}),a.memoizedState=C,a.childLanes=nu(e,T,s),n.memoizedState=eu,hs(e.child,a)):(Qn(n),s=e.child,e=s.sibling,s=En(s,{mode:"visible",children:a.children}),s.return=n,s.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=s,n.memoizedState=null,s)}function iu(e,n){return n=Uo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Uo(e,n){return e=Pt(22,e,null,n),e.lanes=0,e}function lu(e,n,s){return Ni(n,e.child,null,s),e=iu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Zf(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),xr(e.return,n,s)}function su(e,n,s,a,f,g){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:f,treeForkCount:g}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=a,T.tail=s,T.tailMode=f,T.treeForkCount=g)}function Wf(e,n,s){var a=n.pendingProps,f=a.revealOrder,g=a.tail;a=a.children;var T=ot.current,C=(T&2)!==0;if(C?(T=T&1|2,n.flags|=128):T&=1,W(ot,T),xt(e,n,a,s),a=ze?ts:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zf(e,s,n);else if(e.tag===19)Zf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(s=n.child,f=null;s!==null;)e=s.alternate,e!==null&&Eo(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=n.child,n.child=null):(f=s.sibling,s.sibling=null),su(n,!1,f,s,g,a);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Eo(e)===null){n.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}su(n,!0,s,null,g,a);break;case"together":su(n,!1,null,null,void 0,a);break;default:n.memoizedState=null}return n.child}function bn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ei|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(nl(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=En(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=En(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function ou(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ho(e)))}function H0(e,n,s){switch(n.tag){case 3:pt(n,n.stateNode.containerInfo),$n(n,rt,e.memoizedState.cache),Si();break;case 27:case 5:st(n);break;case 4:pt(n,n.stateNode.containerInfo);break;case 10:$n(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ir(n),null;break;case 13:var a=n.memoizedState;if(a!==null)return a.dehydrated!==null?(Qn(n),n.flags|=128,null):(s&n.child.childLanes)!==0?jf(e,n,s):(Qn(n),e=bn(e,n,s),e!==null?e.sibling:null);Qn(n);break;case 19:var f=(e.flags&128)!==0;if(a=(s&n.childLanes)!==0,a||(nl(e,n,s,!1),a=(s&n.childLanes)!==0),f){if(a)return Wf(e,n,s);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),W(ot,ot.current),a)break;return null;case 22:return n.lanes=0,Yf(e,n,s,n.pendingProps);case 24:$n(n,rt,e.memoizedState.cache)}return bn(e,n,s)}function ep(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)ct=!0;else{if(!ou(e,s)&&(n.flags&128)===0)return ct=!1,H0(e,n,s);ct=(e.flags&131072)!==0}else ct=!1,ze&&(n.flags&1048576)!==0&&Id(n,ts,n.index);switch(n.lanes=0,n.tag){case 16:e:{var a=n.pendingProps;if(e=Ai(n.elementType),n.type=e,typeof e=="function")dr(e)?(a=bi(e,a),n.tag=1,n=Kf(null,n,e,a,s)):(n.tag=0,n=Wr(null,n,e,a,s));else{if(e!=null){var f=e.$$typeof;if(f===B){n.tag=11,n=Bf(null,n,e,a,s);break e}else if(f===ne){n.tag=14,n=Ff(null,n,e,a,s);break e}}throw n=ie(e)||e,Error(o(306,n,""))}}return n;case 0:return Wr(e,n,n.type,n.pendingProps,s);case 1:return a=n.type,f=bi(a,n.pendingProps),Kf(e,n,a,f,s);case 3:e:{if(pt(n,n.stateNode.containerInfo),e===null)throw Error(o(387));a=n.pendingProps;var g=n.memoizedState;f=g.element,Nr(e,n),us(n,a,null,s);var T=n.memoizedState;if(a=T.cache,$n(n,rt,a),a!==g.cache&&Sr(n,[rt],s,!0),rs(),a=T.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=Qf(e,n,a,s);break e}else if(a!==f){f=$t(Error(o(424)),n),ns(f),n=Qf(e,n,a,s);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ze=jt(e.firstChild),yt=n,ze=!0,On=null,Kt=!0,s=Od(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Si(),a===f){n=bn(e,n,s);break e}xt(e,n,a,s)}n=n.child}return n;case 26:return ko(e,n),e===null?(s=dh(n.type,null,n.pendingProps,null))?n.memoizedState=s:ze||(s=n.type,e=n.pendingProps,a=Qo(Ee.current).createElement(s),a[gt]=n,a[bt]=e,St(a,s,e),ht(a),n.stateNode=a):n.memoizedState=dh(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return st(n),e===null&&ze&&(a=n.stateNode=rh(n.type,n.pendingProps,Ee.current),yt=n,Kt=!0,f=Ze,si(n.type)?(Hu=f,Ze=jt(a.firstChild)):Ze=f),xt(e,n,n.pendingProps.children,s),ko(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&ze&&((f=a=Ze)&&(a=mv(a,n.type,n.pendingProps,Kt),a!==null?(n.stateNode=a,yt=n,Ze=jt(a.firstChild),Kt=!1,f=!0):f=!1),f||Yn(n)),st(n),f=n.type,g=n.pendingProps,T=e!==null?e.memoizedProps:null,a=g.children,Uu(f,g)?a=null:T!==null&&Uu(f,T)&&(n.flags|=32),n.memoizedState!==null&&(f=kr(e,n,M0,null,null,s),Rs._currentValue=f),ko(e,n),xt(e,n,a,s),n.child;case 6:return e===null&&ze&&((e=s=Ze)&&(s=gv(s,n.pendingProps,Kt),s!==null?(n.stateNode=s,yt=n,Ze=null,e=!0):e=!1),e||Yn(n)),null;case 13:return jf(e,n,s);case 4:return pt(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Ni(n,null,a,s):xt(e,n,a,s),n.child;case 11:return Bf(e,n,n.type,n.pendingProps,s);case 7:return xt(e,n,n.pendingProps,s),n.child;case 8:return xt(e,n,n.pendingProps.children,s),n.child;case 12:return xt(e,n,n.pendingProps.children,s),n.child;case 10:return a=n.pendingProps,$n(n,n.type,a.value),xt(e,n,a.children,s),n.child;case 9:return f=n.type._context,a=n.pendingProps.children,Ei(n),f=vt(f),a=a(f),n.flags|=1,xt(e,n,a,s),n.child;case 14:return Ff(e,n,n.type,n.pendingProps,s);case 15:return Of(e,n,n.type,n.pendingProps,s);case 19:return Wf(e,n,s);case 31:return q0(e,n,s);case 22:return Yf(e,n,s,n.pendingProps);case 24:return Ei(n),a=vt(rt),e===null?(f=Cr(),f===null&&(f=je,g=Tr(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=s),f=g),n.memoizedState={parent:a,cache:f},_r(n),$n(n,rt,f)):((e.lanes&s)!==0&&(Nr(e,n),us(n,null,null,s),rs()),f=e.memoizedState,g=n.memoizedState,f.parent!==a?(f={parent:a,cache:a},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),$n(n,rt,a)):(a=g.cache,$n(n,rt,a),a!==f.cache&&Sr(n,[rt],s,!0))),xt(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function Rn(e){e.flags|=4}function au(e,n,s,a,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(wp())e.flags|=8192;else throw _i=vo,Ar}else e.flags&=-16777217}function tp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!gh(n))if(wp())e.flags|=8192;else throw _i=vo,Ar}function Lo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ce():536870912,e.lanes|=n,hl|=n)}function ms(e,n){if(!ze)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function We(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags&65011712,a|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function G0(e,n,s){var a=n.pendingProps;switch(mr(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(n),null;case 1:return We(n),null;case 3:return s=n.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),_n(rt),tt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(tl(n)?Rn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,yr())),We(n),null;case 26:var f=n.type,g=n.memoizedState;return e===null?(Rn(n),g!==null?(We(n),tp(n,g)):(We(n),au(n,f,null,a,s))):g?g!==e.memoizedState?(Rn(n),We(n),tp(n,g)):(We(n),n.flags&=-16777217):(e=e.memoizedProps,e!==a&&Rn(n),We(n),au(n,f,e,a,s)),null;case 27:if(yn(n),s=Ee.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&Rn(n);else{if(!a){if(n.stateNode===null)throw Error(o(166));return We(n),null}e=j.current,tl(n)?kd(n):(e=rh(f,a,s),n.stateNode=e,Rn(n))}return We(n),null;case 5:if(yn(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&Rn(n);else{if(!a){if(n.stateNode===null)throw Error(o(166));return We(n),null}if(g=j.current,tl(n))kd(n);else{var T=Qo(Ee.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?T.createElement("select",{is:a.is}):T.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?T.createElement(f,{is:a.is}):T.createElement(f)}}g[gt]=n,g[bt]=a;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=g;e:switch(St(g,f,a),f){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Rn(n)}}return We(n),au(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==a&&Rn(n);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(e=Ee.current,tl(n)){if(e=n.stateNode,s=n.memoizedProps,a=null,f=yt,f!==null)switch(f.tag){case 27:case 5:a=f.memoizedProps}e[gt]=n,e=!!(e.nodeValue===s||a!==null&&a.suppressHydrationWarning===!0||jp(e.nodeValue,s)),e||Yn(n,!0)}else e=Qo(e).createTextNode(a),e[gt]=n,n.stateNode=e}return We(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(a=tl(n),s!==null){if(e===null){if(!a)throw Error(o(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[gt]=n}else Si(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;We(n),e=!1}else s=yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(Ht(n),n):(Ht(n),null);if((n.flags&128)!==0)throw Error(o(558))}return We(n),null;case 13:if(a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=tl(n),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(o(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[gt]=n}else Si(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;We(n),f=!1}else f=yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Ht(n),n):(Ht(n),null)}return Ht(n),(n.flags&128)!==0?(n.lanes=s,n):(s=a!==null,e=e!==null&&e.memoizedState!==null,s&&(a=n.child,f=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(f=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==f&&(a.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),Lo(n,n.updateQueue),We(n),null);case 4:return tt(),e===null&&Ru(n.stateNode.containerInfo),We(n),null;case 10:return _n(n.type),We(n),null;case 19:if(q(ot),a=n.memoizedState,a===null)return We(n),null;if(f=(n.flags&128)!==0,g=a.rendering,g===null)if(f)ms(a,!1);else{if(lt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=Eo(e),g!==null){for(n.flags|=128,ms(a,!1),e=g.updateQueue,n.updateQueue=e,Lo(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)bd(s,e),s=s.sibling;return W(ot,ot.current&1|2),ze&&Cn(n,a.treeForkCount),n.child}e=e.sibling}a.tail!==null&&Ct()>Go&&(n.flags|=128,f=!0,ms(a,!1),n.lanes=4194304)}else{if(!f)if(e=Eo(g),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Lo(n,e),ms(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!ze)return We(n),null}else 2*Ct()-a.renderingStartTime>Go&&s!==536870912&&(n.flags|=128,f=!0,ms(a,!1),n.lanes=4194304);a.isBackwards?(g.sibling=n.child,n.child=g):(e=a.last,e!==null?e.sibling=g:n.child=g,a.last=g)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ct(),e.sibling=null,s=ot.current,W(ot,f?s&1|2:s&1),ze&&Cn(n,a.treeForkCount),e):(We(n),null);case 22:case 23:return Ht(n),Mr(),a=n.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(n.flags|=8192):a&&(n.flags|=8192),a?(s&536870912)!==0&&(n.flags&128)===0&&(We(n),n.subtreeFlags&6&&(n.flags|=8192)):We(n),s=n.updateQueue,s!==null&&Lo(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==s&&(n.flags|=2048),e!==null&&q(Ci),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),_n(rt),We(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function V0(e,n){switch(mr(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return _n(rt),tt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return yn(n),null;case 31:if(n.memoizedState!==null){if(Ht(n),n.alternate===null)throw Error(o(340));Si()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ht(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Si()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return q(ot),null;case 4:return tt(),null;case 10:return _n(n.type),null;case 22:case 23:return Ht(n),Mr(),e!==null&&q(Ci),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return _n(rt),null;case 25:return null;default:return null}}function np(e,n){switch(mr(n),n.tag){case 3:_n(rt),tt();break;case 26:case 27:case 5:yn(n);break;case 4:tt();break;case 31:n.memoizedState!==null&&Ht(n);break;case 13:Ht(n);break;case 19:q(ot);break;case 10:_n(n.type);break;case 22:case 23:Ht(n),Mr(),e!==null&&q(Ci);break;case 24:_n(rt)}}function gs(e,n){try{var s=n.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var f=a.next;s=f;do{if((s.tag&e)===e){a=void 0;var g=s.create,T=s.inst;a=g(),T.destroy=a}s=s.next}while(s!==f)}}catch(C){Ye(n,n.return,C)}}function Zn(e,n,s){try{var a=n.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var g=f.next;a=g;do{if((a.tag&e)===e){var T=a.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,f=n;var w=s,z=C;try{z()}catch(F){Ye(f,w,F)}}}a=a.next}while(a!==g)}}catch(F){Ye(n,n.return,F)}}function ip(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{$d(n,s)}catch(a){Ye(e,e.return,a)}}}function lp(e,n,s){s.props=bi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(a){Ye(e,n,a)}}function ys(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof s=="function"?e.refCleanup=s(a):s.current=a}}catch(f){Ye(e,n,f)}}function pn(e,n){var s=e.ref,a=e.refCleanup;if(s!==null)if(typeof a=="function")try{a()}catch(f){Ye(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Ye(e,n,f)}else s.current=null}function sp(e){var n=e.type,s=e.memoizedProps,a=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&a.focus();break e;case"img":s.src?a.src=s.src:s.srcSet&&(a.srcset=s.srcSet)}}catch(f){Ye(e,e.return,f)}}function ru(e,n,s){try{var a=e.stateNode;uv(a,e.type,s,n),a[bt]=n}catch(f){Ye(e,e.return,f)}}function op(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&si(e.type)||e.tag===4}function uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||op(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&si(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Sn));else if(a!==4&&(a===27&&si(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(cu(e,n,s),e=e.sibling;e!==null;)cu(e,n,s),e=e.sibling}function zo(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(a===27&&si(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(zo(e,n,s),e=e.sibling;e!==null;)zo(e,n,s),e=e.sibling}function ap(e){var n=e.stateNode,s=e.memoizedProps;try{for(var a=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);St(n,a,s),n[gt]=e,n[bt]=s}catch(g){Ye(e,e.return,g)}}var Mn=!1,dt=!1,du=!1,rp=typeof WeakSet=="function"?WeakSet:Set,mt=null;function B0(e,n){if(e=e.containerInfo,Du=ia,e=xd(e),lr(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var f=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var T=0,C=-1,w=-1,z=0,F=0,K=e,P=null;t:for(;;){for(var G;K!==s||f!==0&&K.nodeType!==3||(C=T+f),K!==g||a!==0&&K.nodeType!==3||(w=T+a),K.nodeType===3&&(T+=K.nodeValue.length),(G=K.firstChild)!==null;)P=K,K=G;for(;;){if(K===e)break t;if(P===s&&++z===f&&(C=T),P===g&&++F===a&&(w=T),(G=K.nextSibling)!==null)break;K=P,P=K.parentNode}K=G}s=C===-1||w===-1?null:{start:C,end:w}}else s=null}s=s||{start:0,end:0}}else s=null;for(ku={focusedElem:e,selectionRange:s},ia=!1,mt=n;mt!==null;)if(n=mt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,mt=e;else for(;mt!==null;){switch(n=mt,g=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)f=e[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,s=n,f=g.memoizedProps,g=g.memoizedState,a=s.stateNode;try{var ue=bi(s.type,f);e=a.getSnapshotBeforeUpdate(ue,g),a.__reactInternalSnapshotBeforeUpdate=e}catch(Se){Ye(s,s.return,Se)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)zu(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":zu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=n.sibling,e!==null){e.return=n.return,mt=e;break}mt=n.return}}function up(e,n,s){var a=s.flags;switch(s.tag){case 0:case 11:case 15:Dn(e,s),a&4&&gs(5,s);break;case 1:if(Dn(e,s),a&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(T){Ye(s,s.return,T)}else{var f=bi(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Ye(s,s.return,T)}}a&64&&ip(s),a&512&&ys(s,s.return);break;case 3:if(Dn(e,s),a&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{$d(e,n)}catch(T){Ye(s,s.return,T)}}break;case 27:n===null&&a&4&&ap(s);case 26:case 5:Dn(e,s),n===null&&a&4&&sp(s),a&512&&ys(s,s.return);break;case 12:Dn(e,s);break;case 31:Dn(e,s),a&4&&fp(e,s);break;case 13:Dn(e,s),a&4&&pp(e,s),a&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=j0.bind(null,s),yv(e,s))));break;case 22:if(a=s.memoizedState!==null||Mn,!a){n=n!==null&&n.memoizedState!==null||dt,f=Mn;var g=dt;Mn=a,(dt=n)&&!g?kn(e,s,(s.subtreeFlags&8772)!==0):Dn(e,s),Mn=f,dt=g}break;case 30:break;default:Dn(e,s)}}function cp(e){var n=e.alternate;n!==null&&(e.alternate=null,cp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Va(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Mt=!1;function In(e,n,s){for(s=s.child;s!==null;)dp(e,n,s),s=s.sibling}function dp(e,n,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(pi,s)}catch{}switch(s.tag){case 26:dt||pn(s,n),In(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:dt||pn(s,n);var a=nt,f=Mt;si(s.type)&&(nt=s.stateNode,Mt=!1),In(e,n,s),Ns(s.stateNode),nt=a,Mt=f;break;case 5:dt||pn(s,n);case 6:if(a=nt,f=Mt,nt=null,In(e,n,s),nt=a,Mt=f,nt!==null)if(Mt)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(s.stateNode)}catch(g){Ye(s,n,g)}else try{nt.removeChild(s.stateNode)}catch(g){Ye(s,n,g)}break;case 18:nt!==null&&(Mt?(e=nt,ih(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),El(e)):ih(nt,s.stateNode));break;case 4:a=nt,f=Mt,nt=s.stateNode.containerInfo,Mt=!0,In(e,n,s),nt=a,Mt=f;break;case 0:case 11:case 14:case 15:Zn(2,s,n),dt||Zn(4,s,n),In(e,n,s);break;case 1:dt||(pn(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"&&lp(s,n,a)),In(e,n,s);break;case 21:In(e,n,s);break;case 22:dt=(a=dt)||s.memoizedState!==null,In(e,n,s),dt=a;break;default:In(e,n,s)}}function fp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{El(e)}catch(s){Ye(n,n.return,s)}}}function pp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{El(e)}catch(s){Ye(n,n.return,s)}}function F0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new rp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new rp),n;default:throw Error(o(435,e.tag))}}function Po(e,n){var s=F0(e);n.forEach(function(a){if(!s.has(a)){s.add(a);var f=Z0.bind(null,e,a);a.then(f,f)}})}function It(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var f=s[a],g=e,T=n,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(si(C.type)){nt=C.stateNode,Mt=!1;break e}break;case 5:nt=C.stateNode,Mt=!1;break e;case 3:case 4:nt=C.stateNode.containerInfo,Mt=!0;break e}C=C.return}if(nt===null)throw Error(o(160));dp(g,T,f),nt=null,Mt=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)hp(n,e),n=n.sibling}var nn=null;function hp(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:It(n,e),Dt(e),a&4&&(Zn(3,e,e.return),gs(3,e),Zn(5,e,e.return));break;case 1:It(n,e),Dt(e),a&512&&(dt||s===null||pn(s,s.return)),a&64&&Mn&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?a:s.concat(a))));break;case 26:var f=nn;if(It(n,e),Dt(e),a&512&&(dt||s===null||pn(s,s.return)),a&4){var g=s!==null?s.memoizedState:null;if(a=e.memoizedState,s===null)if(a===null)if(e.stateNode===null){e:{a=e.type,s=e.memoizedProps,f=f.ownerDocument||f;t:switch(a){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ol]||g[gt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(a),f.head.insertBefore(g,f.querySelector("head > title"))),St(g,a,s),g[gt]=e,ht(g),a=g;break e;case"link":var T=hh("link","href",f).get(a+(s.href||""));if(T){for(var C=0;C<T.length;C++)if(g=T[C],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){T.splice(C,1);break t}}g=f.createElement(a),St(g,a,s),f.head.appendChild(g);break;case"meta":if(T=hh("meta","content",f).get(a+(s.content||""))){for(C=0;C<T.length;C++)if(g=T[C],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){T.splice(C,1);break t}}g=f.createElement(a),St(g,a,s),f.head.appendChild(g);break;default:throw Error(o(468,a))}g[gt]=e,ht(g),a=g}e.stateNode=a}else mh(f,e.type,e.stateNode);else e.stateNode=ph(f,a,e.memoizedProps);else g!==a?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,a===null?mh(f,e.type,e.stateNode):ph(f,a,e.memoizedProps)):a===null&&e.stateNode!==null&&ru(e,e.memoizedProps,s.memoizedProps)}break;case 27:It(n,e),Dt(e),a&512&&(dt||s===null||pn(s,s.return)),s!==null&&a&4&&ru(e,e.memoizedProps,s.memoizedProps);break;case 5:if(It(n,e),Dt(e),a&512&&(dt||s===null||pn(s,s.return)),e.flags&32){f=e.stateNode;try{Yi(f,"")}catch(ue){Ye(e,e.return,ue)}}a&4&&e.stateNode!=null&&(f=e.memoizedProps,ru(e,f,s!==null?s.memoizedProps:f)),a&1024&&(du=!0);break;case 6:if(It(n,e),Dt(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,s=e.stateNode;try{s.nodeValue=a}catch(ue){Ye(e,e.return,ue)}}break;case 3:if(Wo=null,f=nn,nn=jo(n.containerInfo),It(n,e),nn=f,Dt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{El(n.containerInfo)}catch(ue){Ye(e,e.return,ue)}du&&(du=!1,mp(e));break;case 4:a=nn,nn=jo(e.stateNode.containerInfo),It(n,e),Dt(e),nn=a;break;case 12:It(n,e),Dt(e);break;case 31:It(n,e),Dt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Po(e,a)));break;case 13:It(n,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ho=Ct()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Po(e,a)));break;case 22:f=e.memoizedState!==null;var w=s!==null&&s.memoizedState!==null,z=Mn,F=dt;if(Mn=z||f,dt=F||w,It(n,e),dt=F,Mn=z,Dt(e),a&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(s===null||w||Mn||dt||Ri(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){w=s=n;try{if(g=w.stateNode,f)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=w.stateNode;var K=w.memoizedProps.style,P=K!=null&&K.hasOwnProperty("display")?K.display:null;C.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(ue){Ye(w,w.return,ue)}}}else if(n.tag===6){if(s===null){w=n;try{w.stateNode.nodeValue=f?"":w.memoizedProps}catch(ue){Ye(w,w.return,ue)}}}else if(n.tag===18){if(s===null){w=n;try{var G=w.stateNode;f?lh(G,!0):lh(w.stateNode,!1)}catch(ue){Ye(w,w.return,ue)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}a&4&&(a=e.updateQueue,a!==null&&(s=a.retryQueue,s!==null&&(a.retryQueue=null,Po(e,s))));break;case 19:It(n,e),Dt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Po(e,a)));break;case 30:break;case 21:break;default:It(n,e),Dt(e)}}function Dt(e){var n=e.flags;if(n&2){try{for(var s,a=e.return;a!==null;){if(op(a)){s=a;break}a=a.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var f=s.stateNode,g=uu(e);zo(e,g,f);break;case 5:var T=s.stateNode;s.flags&32&&(Yi(T,""),s.flags&=-33);var C=uu(e);zo(e,C,T);break;case 3:case 4:var w=s.stateNode.containerInfo,z=uu(e);cu(e,z,w);break;default:throw Error(o(161))}}catch(F){Ye(e,e.return,F)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function mp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;mp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Dn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)up(e,n.alternate,n),n=n.sibling}function Ri(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Zn(4,n,n.return),Ri(n);break;case 1:pn(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&lp(n,n.return,s),Ri(n);break;case 27:Ns(n.stateNode);case 26:case 5:pn(n,n.return),Ri(n);break;case 22:n.memoizedState===null&&Ri(n);break;case 30:Ri(n);break;default:Ri(n)}e=e.sibling}}function kn(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var a=n.alternate,f=e,g=n,T=g.flags;switch(g.tag){case 0:case 11:case 15:kn(f,g,s),gs(4,g);break;case 1:if(kn(f,g,s),a=g,f=a.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Ye(a,a.return,z)}if(a=g,f=a.updateQueue,f!==null){var C=a.stateNode;try{var w=f.shared.hiddenCallbacks;if(w!==null)for(f.shared.hiddenCallbacks=null,f=0;f<w.length;f++)Yd(w[f],C)}catch(z){Ye(a,a.return,z)}}s&&T&64&&ip(g),ys(g,g.return);break;case 27:ap(g);case 26:case 5:kn(f,g,s),s&&a===null&&T&4&&sp(g),ys(g,g.return);break;case 12:kn(f,g,s);break;case 31:kn(f,g,s),s&&T&4&&fp(f,g);break;case 13:kn(f,g,s),s&&T&4&&pp(f,g);break;case 22:g.memoizedState===null&&kn(f,g,s),ys(g,g.return);break;case 30:break;default:kn(f,g,s)}n=n.sibling}}function fu(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&is(s))}function pu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&is(e))}function ln(e,n,s,a){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)gp(e,n,s,a),n=n.sibling}function gp(e,n,s,a){var f=n.flags;switch(n.tag){case 0:case 11:case 15:ln(e,n,s,a),f&2048&&gs(9,n);break;case 1:ln(e,n,s,a);break;case 3:ln(e,n,s,a),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&is(e)));break;case 12:if(f&2048){ln(e,n,s,a),e=n.stateNode;try{var g=n.memoizedProps,T=g.id,C=g.onPostCommit;typeof C=="function"&&C(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){Ye(n,n.return,w)}}else ln(e,n,s,a);break;case 31:ln(e,n,s,a);break;case 13:ln(e,n,s,a);break;case 23:break;case 22:g=n.stateNode,T=n.alternate,n.memoizedState!==null?g._visibility&2?ln(e,n,s,a):vs(e,n):g._visibility&2?ln(e,n,s,a):(g._visibility|=2,dl(e,n,s,a,(n.subtreeFlags&10256)!==0||!1)),f&2048&&fu(T,n);break;case 24:ln(e,n,s,a),f&2048&&pu(n.alternate,n);break;default:ln(e,n,s,a)}}function dl(e,n,s,a,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=e,T=n,C=s,w=a,z=T.flags;switch(T.tag){case 0:case 11:case 15:dl(g,T,C,w,f),gs(8,T);break;case 23:break;case 22:var F=T.stateNode;T.memoizedState!==null?F._visibility&2?dl(g,T,C,w,f):vs(g,T):(F._visibility|=2,dl(g,T,C,w,f)),f&&z&2048&&fu(T.alternate,T);break;case 24:dl(g,T,C,w,f),f&&z&2048&&pu(T.alternate,T);break;default:dl(g,T,C,w,f)}n=n.sibling}}function vs(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,a=n,f=a.flags;switch(a.tag){case 22:vs(s,a),f&2048&&fu(a.alternate,a);break;case 24:vs(s,a),f&2048&&pu(a.alternate,a);break;default:vs(s,a)}n=n.sibling}}var xs=8192;function fl(e,n,s){if(e.subtreeFlags&xs)for(e=e.child;e!==null;)yp(e,n,s),e=e.sibling}function yp(e,n,s){switch(e.tag){case 26:fl(e,n,s),e.flags&xs&&e.memoizedState!==null&&Rv(s,nn,e.memoizedState,e.memoizedProps);break;case 5:fl(e,n,s);break;case 3:case 4:var a=nn;nn=jo(e.stateNode.containerInfo),fl(e,n,s),nn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=xs,xs=16777216,fl(e,n,s),xs=a):fl(e,n,s));break;default:fl(e,n,s)}}function vp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ss(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];mt=a,Sp(a,e)}vp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xp(e),e=e.sibling}function xp(e){switch(e.tag){case 0:case 11:case 15:Ss(e),e.flags&2048&&Zn(9,e,e.return);break;case 3:Ss(e);break;case 12:Ss(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,qo(e)):Ss(e);break;default:Ss(e)}}function qo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];mt=a,Sp(a,e)}vp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Zn(8,n,n.return),qo(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,qo(n));break;default:qo(n)}e=e.sibling}}function Sp(e,n){for(;mt!==null;){var s=mt;switch(s.tag){case 0:case 11:case 15:Zn(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var a=s.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:is(s.memoizedState.cache)}if(a=s.child,a!==null)a.return=s,mt=a;else e:for(s=e;mt!==null;){a=mt;var f=a.sibling,g=a.return;if(cp(a),a===s){mt=null;break e}if(f!==null){f.return=g,mt=f;break e}mt=g}}}var O0={getCacheForType:function(e){var n=vt(rt),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return vt(rt).controller.signal}},Y0=typeof WeakMap=="function"?WeakMap:Map,Be=0,je=null,De=null,Ue=0,Oe=0,Gt=null,Wn=!1,pl=!1,hu=!1,Un=0,lt=0,ei=0,Mi=0,mu=0,Vt=0,hl=0,Ts=null,kt=null,gu=!1,Ho=0,Tp=0,Go=1/0,Vo=null,ti=null,ft=0,ni=null,ml=null,Ln=0,yu=0,vu=null,Ep=null,Es=0,xu=null;function Bt(){return(Be&2)!==0&&Ue!==0?Ue&-Ue:U.T!==null?_u():Qs()}function Cp(){if(Vt===0)if((Ue&536870912)===0||ze){var e=$;$<<=1,($&3932160)===0&&($=262144),Vt=e}else Vt=536870912;return e=qt.current,e!==null&&(e.flags|=32),Vt}function Ut(e,n,s){(e===je&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(gl(e,0),ii(e,Ue,Vt,!1)),ge(e,s),((Be&2)===0||e!==je)&&(e===je&&((Be&2)===0&&(Mi|=s),lt===4&&ii(e,Ue,Vt,!1)),hn(e))}function Ap(e,n,s){if((Be&6)!==0)throw Error(o(327));var a=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Te(e,n),f=a?X0(e,n):Tu(e,n,!0),g=a;do{if(f===0){pl&&!a&&ii(e,n,0,!1);break}else{if(s=e.current.alternate,g&&!$0(s)){f=Tu(e,n,!1),g=!1;continue}if(f===2){if(g=n,e.errorRecoveryDisabledLanes&g)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var C=e;f=Ts;var w=C.current.memoizedState.isDehydrated;if(w&&(gl(C,T).flags|=256),T=Tu(C,T,!1),T!==2){if(hu&&!w){C.errorRecoveryDisabledLanes|=g,Mi|=g,f=4;break e}g=kt,kt=f,g!==null&&(kt===null?kt=g:kt.push.apply(kt,g))}f=T}if(g=!1,f!==2)continue}}if(f===1){gl(e,0),ii(e,n,0,!0);break}e:{switch(a=e,g=f,g){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:ii(a,n,Vt,!Wn);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(f=Ho+300-Ct(),10<f)){if(ii(a,n,Vt,!Wn),le(a,0,!0)!==0)break e;Ln=n,a.timeoutHandle=th(_p.bind(null,a,s,kt,Vo,gu,n,Vt,Mi,hl,Wn,g,"Throttled",-0,0),f);break e}_p(a,s,kt,Vo,gu,n,Vt,Mi,hl,Wn,g,null,-0,0)}}break}while(!0);hn(e)}function _p(e,n,s,a,f,g,T,C,w,z,F,K,P,G){if(e.timeoutHandle=-1,K=n.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sn},yp(n,g,K);var ue=(g&62914560)===g?Ho-Ct():(g&4194048)===g?Tp-Ct():0;if(ue=Mv(K,ue),ue!==null){Ln=g,e.cancelPendingCommit=ue(kp.bind(null,e,n,g,s,a,f,T,C,w,F,K,null,P,G)),ii(e,g,T,!z);return}}kp(e,n,g,s,a,f,T,C,w)}function $0(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var a=0;a<s.length;a++){var f=s[a],g=f.getSnapshot;f=f.value;try{if(!zt(g(),f))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ii(e,n,s,a){n&=~mu,n&=~Mi,e.suspendedLanes|=n,e.pingedLanes&=~n,a&&(e.warmLanes|=n),a=e.expirationTimes;for(var f=n;0<f;){var g=31-_t(f),T=1<<g;a[g]=-1,f&=~T}s!==0&&Lt(e,s,n)}function Bo(){return(Be&6)===0?(Cs(0),!1):!0}function Su(){if(De!==null){if(Oe===0)var e=De.return;else e=De,An=Ti=null,zr(e),ol=null,ss=0,e=De;for(;e!==null;)np(e.alternate,e),e=e.return;De=null}}function gl(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,fv(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ln=0,Su(),je=e,De=s=En(e.current,null),Ue=n,Oe=0,Gt=null,Wn=!1,pl=Te(e,n),hu=!1,hl=Vt=mu=Mi=ei=lt=0,kt=Ts=null,gu=!1,(n&8)!==0&&(n|=n&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=n;0<a;){var f=31-_t(a),g=1<<f;n|=e[f],a&=~g}return Un=n,ro(),s}function Np(e,n){be=null,U.H=ps,n===sl||n===yo?(n=Vd(),Oe=3):n===Ar?(n=Vd(),Oe=4):Oe=n===Zr?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Gt=n,De===null&&(lt=1,Io(e,$t(n,e.current)))}function wp(){var e=qt.current;return e===null?!0:(Ue&4194048)===Ue?Qt===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===Qt:!1}function bp(){var e=U.H;return U.H=ps,e===null?ps:e}function Rp(){var e=U.A;return U.A=O0,e}function Fo(){lt=4,Wn||(Ue&4194048)!==Ue&&qt.current!==null||(pl=!0),(ei&134217727)===0&&(Mi&134217727)===0||je===null||ii(je,Ue,Vt,!1)}function Tu(e,n,s){var a=Be;Be|=2;var f=bp(),g=Rp();(je!==e||Ue!==n)&&(Vo=null,gl(e,n)),n=!1;var T=lt;e:do try{if(Oe!==0&&De!==null){var C=De,w=Gt;switch(Oe){case 8:Su(),T=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(n=!0);var z=Oe;if(Oe=0,Gt=null,yl(e,C,w,z),s&&pl){T=0;break e}break;default:z=Oe,Oe=0,Gt=null,yl(e,C,w,z)}}J0(),T=lt;break}catch(F){Np(e,F)}while(!0);return n&&e.shellSuspendCounter++,An=Ti=null,Be=a,U.H=f,U.A=g,De===null&&(je=null,Ue=0,ro()),T}function J0(){for(;De!==null;)Mp(De)}function X0(e,n){var s=Be;Be|=2;var a=bp(),f=Rp();je!==e||Ue!==n?(Vo=null,Go=Ct()+500,gl(e,n)):pl=Te(e,n);e:do try{if(Oe!==0&&De!==null){n=De;var g=Gt;t:switch(Oe){case 1:Oe=0,Gt=null,yl(e,n,g,1);break;case 2:case 9:if(Hd(g)){Oe=0,Gt=null,Ip(n);break}n=function(){Oe!==2&&Oe!==9||je!==e||(Oe=7),hn(e)},g.then(n,n);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:Hd(g)?(Oe=0,Gt=null,Ip(n)):(Oe=0,Gt=null,yl(e,n,g,7));break;case 5:var T=null;switch(De.tag){case 26:T=De.memoizedState;case 5:case 27:var C=De;if(T?gh(T):C.stateNode.complete){Oe=0,Gt=null;var w=C.sibling;if(w!==null)De=w;else{var z=C.return;z!==null?(De=z,Oo(z)):De=null}break t}}Oe=0,Gt=null,yl(e,n,g,5);break;case 6:Oe=0,Gt=null,yl(e,n,g,6);break;case 8:Su(),lt=6;break e;default:throw Error(o(462))}}K0();break}catch(F){Np(e,F)}while(!0);return An=Ti=null,U.H=a,U.A=f,Be=s,De!==null?0:(je=null,Ue=0,ro(),lt)}function K0(){for(;De!==null&&!Da();)Mp(De)}function Mp(e){var n=ep(e.alternate,e,Un);e.memoizedProps=e.pendingProps,n===null?Oo(e):De=n}function Ip(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=Xf(s,n,n.pendingProps,n.type,void 0,Ue);break;case 11:n=Xf(s,n,n.pendingProps,n.type.render,n.ref,Ue);break;case 5:zr(n);default:np(s,n),n=De=bd(n,Un),n=ep(s,n,Un)}e.memoizedProps=e.pendingProps,n===null?Oo(e):De=n}function yl(e,n,s,a){An=Ti=null,zr(n),ol=null,ss=0;var f=n.return;try{if(P0(e,f,n,s,Ue)){lt=1,Io(e,$t(s,e.current)),De=null;return}}catch(g){if(f!==null)throw De=f,g;lt=1,Io(e,$t(s,e.current)),De=null;return}n.flags&32768?(ze||a===1?e=!0:pl||(Ue&536870912)!==0?e=!1:(Wn=e=!0,(a===2||a===9||a===3||a===6)&&(a=qt.current,a!==null&&a.tag===13&&(a.flags|=16384))),Dp(n,e)):Oo(n)}function Oo(e){var n=e;do{if((n.flags&32768)!==0){Dp(n,Wn);return}e=n.return;var s=G0(n.alternate,n,Un);if(s!==null){De=s;return}if(n=n.sibling,n!==null){De=n;return}De=n=e}while(n!==null);lt===0&&(lt=5)}function Dp(e,n){do{var s=V0(e.alternate,e);if(s!==null){s.flags&=32767,De=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){De=e;return}De=e=s}while(e!==null);lt=6,De=null}function kp(e,n,s,a,f,g,T,C,w){e.cancelPendingCommit=null;do Yo();while(ft!==0);if((Be&6)!==0)throw Error(o(327));if(n!==null){if(n===e.current)throw Error(o(177));if(g=n.lanes|n.childLanes,g|=ur,Fe(e,s,g,T,C,w),e===je&&(De=je=null,Ue=0),ml=n,ni=e,Ln=s,yu=g,vu=f,Ep=a,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,W0(qi,function(){return qp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||a){a=U.T,U.T=null,f=Z.p,Z.p=2,T=Be,Be|=4;try{B0(e,n,s)}finally{Be=T,Z.p=f,U.T=a}}ft=1,Up(),Lp(),zp()}}function Up(){if(ft===1){ft=0;var e=ni,n=ml,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=U.T,U.T=null;var a=Z.p;Z.p=2;var f=Be;Be|=4;try{hp(n,e);var g=ku,T=xd(e.containerInfo),C=g.focusedElem,w=g.selectionRange;if(T!==C&&C&&C.ownerDocument&&vd(C.ownerDocument.documentElement,C)){if(w!==null&&lr(C)){var z=w.start,F=w.end;if(F===void 0&&(F=z),"selectionStart"in C)C.selectionStart=z,C.selectionEnd=Math.min(F,C.value.length);else{var K=C.ownerDocument||document,P=K&&K.defaultView||window;if(P.getSelection){var G=P.getSelection(),ue=C.textContent.length,Se=Math.min(w.start,ue),Ke=w.end===void 0?Se:Math.min(w.end,ue);!G.extend&&Se>Ke&&(T=Ke,Ke=Se,Se=T);var M=yd(C,Se),b=yd(C,Ke);if(M&&b&&(G.rangeCount!==1||G.anchorNode!==M.node||G.anchorOffset!==M.offset||G.focusNode!==b.node||G.focusOffset!==b.offset)){var L=K.createRange();L.setStart(M.node,M.offset),G.removeAllRanges(),Se>Ke?(G.addRange(L),G.extend(b.node,b.offset)):(L.setEnd(b.node,b.offset),G.addRange(L))}}}}for(K=[],G=C;G=G.parentNode;)G.nodeType===1&&K.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<K.length;C++){var J=K[C];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}ia=!!Du,ku=Du=null}finally{Be=f,Z.p=a,U.T=s}}e.current=n,ft=2}}function Lp(){if(ft===2){ft=0;var e=ni,n=ml,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=U.T,U.T=null;var a=Z.p;Z.p=2;var f=Be;Be|=4;try{up(e,n.alternate,n)}finally{Be=f,Z.p=a,U.T=s}}ft=3}}function zp(){if(ft===4||ft===3){ft=0,ka();var e=ni,n=ml,s=Ln,a=Ep;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ft=5:(ft=0,ml=ni=null,Pp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(ti=null),Pe(s),n=n.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(pi,n,void 0,(n.current.flags&128)===128)}catch{}if(a!==null){n=U.T,f=Z.p,Z.p=2,U.T=null;try{for(var g=e.onRecoverableError,T=0;T<a.length;T++){var C=a[T];g(C.value,{componentStack:C.stack})}}finally{U.T=n,Z.p=f}}(Ln&3)!==0&&Yo(),hn(e),f=e.pendingLanes,(s&261930)!==0&&(f&42)!==0?e===xu?Es++:(Es=0,xu=e):Es=0,Cs(0)}}function Pp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,is(n)))}function Yo(){return Up(),Lp(),zp(),qp()}function qp(){if(ft!==5)return!1;var e=ni,n=yu;yu=0;var s=Pe(Ln),a=U.T,f=Z.p;try{Z.p=32>s?32:s,U.T=null,s=vu,vu=null;var g=ni,T=Ln;if(ft=0,ml=ni=null,Ln=0,(Be&6)!==0)throw Error(o(331));var C=Be;if(Be|=4,xp(g.current),gp(g,g.current,T,s),Be=C,Cs(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(pi,g)}catch{}return!0}finally{Z.p=f,U.T=a,Pp(e,n)}}function Hp(e,n,s){n=$t(s,n),n=jr(e.stateNode,n,2),e=Kn(e,n,2),e!==null&&(ge(e,2),hn(e))}function Ye(e,n,s){if(e.tag===3)Hp(e,e,s);else for(;n!==null;){if(n.tag===3){Hp(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ti===null||!ti.has(a))){e=$t(s,e),s=Gf(2),a=Kn(n,s,2),a!==null&&(Vf(s,a,n,e),ge(a,2),hn(a));break}}n=n.return}}function Eu(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Y0;var f=new Set;a.set(n,f)}else f=a.get(n),f===void 0&&(f=new Set,a.set(n,f));f.has(s)||(hu=!0,f.add(s),e=Q0.bind(null,e,n,s),n.then(e,e))}function Q0(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,je===e&&(Ue&s)===s&&(lt===4||lt===3&&(Ue&62914560)===Ue&&300>Ct()-Ho?(Be&2)===0&&gl(e,0):mu|=s,hl===Ue&&(hl=0)),hn(e)}function Gp(e,n){n===0&&(n=Ce()),e=vi(e,n),e!==null&&(ge(e,n),hn(e))}function j0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Gp(e,s)}function Z0(e,n){var s=0;switch(e.tag){case 31:case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(n),Gp(e,s)}function W0(e,n){return zi(e,n)}var $o=null,vl=null,Cu=!1,Jo=!1,Au=!1,li=0;function hn(e){e!==vl&&e.next===null&&(vl===null?$o=vl=e:vl=vl.next=e),Jo=!0,Cu||(Cu=!0,tv())}function Cs(e,n){if(!Au&&Jo){Au=!0;do for(var s=!1,a=$o;a!==null;){if(e!==0){var f=a.pendingLanes;if(f===0)var g=0;else{var T=a.suspendedLanes,C=a.pingedLanes;g=(1<<31-_t(42|e)+1)-1,g&=f&~(T&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,Op(a,g))}else g=Ue,g=le(a,a===je?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||Te(a,g)||(s=!0,Op(a,g));a=a.next}while(s);Au=!1}}function ev(){Vp()}function Vp(){Jo=Cu=!1;var e=0;li!==0&&dv()&&(e=li);for(var n=Ct(),s=null,a=$o;a!==null;){var f=a.next,g=Bp(a,n);g===0?(a.next=null,s===null?$o=f:s.next=f,f===null&&(vl=s)):(s=a,(e!==0||(g&3)!==0)&&(Jo=!0)),a=f}ft!==0&&ft!==5||Cs(e),li!==0&&(li=0)}function Bp(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var T=31-_t(g),C=1<<T,w=f[T];w===-1?((C&s)===0||(C&a)!==0)&&(f[T]=se(C,n)):w<=n&&(e.expiredLanes|=C),g&=~C}if(n=je,s=Ue,s=le(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,s===0||e===n&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Vl(a),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Te(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(a!==null&&Vl(a),Pe(s)){case 2:case 8:s=Xs;break;case 32:s=qi;break;case 268435456:s=Bl;break;default:s=qi}return a=Fp.bind(null,e),s=zi(s,a),e.callbackPriority=n,e.callbackNode=s,n}return a!==null&&a!==null&&Vl(a),e.callbackPriority=2,e.callbackNode=null,2}function Fp(e,n){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Yo()&&e.callbackNode!==s)return null;var a=Ue;return a=le(e,e===je?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Ap(e,a,n),Bp(e,Ct()),e.callbackNode!=null&&e.callbackNode===s?Fp.bind(null,e):null)}function Op(e,n){if(Yo())return null;Ap(e,n,!0)}function tv(){pv(function(){(Be&6)!==0?zi(Pi,ev):Vp()})}function _u(){if(li===0){var e=il;e===0&&(e=k,k<<=1,(k&261888)===0&&(k=256)),li=e}return li}function Yp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:eo(""+e)}function $p(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function nv(e,n,s,a,f){if(n==="submit"&&s&&s.stateNode===f){var g=Yp((f[bt]||null).action),T=a.submitter;T&&(n=(n=T[bt]||null)?Yp(n.formAction):T.getAttribute("formAction"),n!==null&&(g=n,T=null));var C=new lo("action","action",null,a,f);e.push({event:C,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(li!==0){var w=T?$p(f,T):new FormData(f);Yr(s,{pending:!0,data:w,method:f.method,action:g},null,w)}}else typeof g=="function"&&(C.preventDefault(),w=T?$p(f,T):new FormData(f),Yr(s,{pending:!0,data:w,method:f.method,action:g},g,w))},currentTarget:f}]})}}for(var Nu=0;Nu<rr.length;Nu++){var wu=rr[Nu],iv=wu.toLowerCase(),lv=wu[0].toUpperCase()+wu.slice(1);tn(iv,"on"+lv)}tn(Ed,"onAnimationEnd"),tn(Cd,"onAnimationIteration"),tn(Ad,"onAnimationStart"),tn("dblclick","onDoubleClick"),tn("focusin","onFocus"),tn("focusout","onBlur"),tn(S0,"onTransitionRun"),tn(T0,"onTransitionStart"),tn(E0,"onTransitionCancel"),tn(_d,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(As));function Jp(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],f=a.event;a=a.listeners;e:{var g=void 0;if(n)for(var T=a.length-1;0<=T;T--){var C=a[T],w=C.instance,z=C.currentTarget;if(C=C.listener,w!==g&&f.isPropagationStopped())break e;g=C,f.currentTarget=z;try{g(f)}catch(F){ao(F)}f.currentTarget=null,g=w}else for(T=0;T<a.length;T++){if(C=a[T],w=C.instance,z=C.currentTarget,C=C.listener,w!==g&&f.isPropagationStopped())break e;g=C,f.currentTarget=z;try{g(f)}catch(F){ao(F)}f.currentTarget=null,g=w}}}}function ke(e,n){var s=n[Ga];s===void 0&&(s=n[Ga]=new Set);var a=e+"__bubble";s.has(a)||(Xp(n,e,2,!1),s.add(a))}function bu(e,n,s){var a=0;n&&(a|=4),Xp(s,e,a,n)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function Ru(e){if(!e[Xo]){e[Xo]=!0,Gc.forEach(function(s){s!=="selectionchange"&&(sv.has(s)||bu(s,!1,e),bu(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Xo]||(n[Xo]=!0,bu("selectionchange",!1,n))}}function Xp(e,n,s,a){switch(Ch(n)){case 2:var f=kv;break;case 8:f=Uv;break;default:f=Ou}s=f.bind(null,n,s,e),f=void 0,!Ka||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(n,s,{capture:!0,passive:f}):e.addEventListener(n,s,!0):f!==void 0?e.addEventListener(n,s,{passive:f}):e.addEventListener(n,s,!1)}function Mu(e,n,s,a,f){var g=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var T=a.tag;if(T===3||T===4){var C=a.stateNode.containerInfo;if(C===f)break;if(T===4)for(T=a.return;T!==null;){var w=T.tag;if((w===3||w===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;C!==null;){if(T=Gi(C),T===null)return;if(w=T.tag,w===5||w===6||w===26||w===27){a=g=T;continue e}C=C.parentNode}}a=a.return}Zc(function(){var z=g,F=Ja(s),K=[];e:{var P=Nd.get(e);if(P!==void 0){var G=lo,ue=e;switch(e){case"keypress":if(no(s)===0)break e;case"keydown":case"keyup":G=Zy;break;case"focusin":ue="focus",G=Wa;break;case"focusout":ue="blur",G=Wa;break;case"beforeblur":case"afterblur":G=Wa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=t0;break;case Ed:case Cd:case Ad:G=Fy;break;case _d:G=i0;break;case"scroll":case"scrollend":G=qy;break;case"wheel":G=s0;break;case"copy":case"cut":case"paste":G=Yy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=id;break;case"toggle":case"beforetoggle":G=a0}var Se=(n&4)!==0,Ke=!Se&&(e==="scroll"||e==="scrollend"),M=Se?P!==null?P+"Capture":null:P;Se=[];for(var b=z,L;b!==null;){var J=b;if(L=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||L===null||M===null||(J=$l(b,M),J!=null&&Se.push(_s(b,J,L))),Ke)break;b=b.return}0<Se.length&&(P=new G(P,ue,null,s,F),K.push({event:P,listeners:Se}))}}if((n&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",P&&s!==$a&&(ue=s.relatedTarget||s.fromElement)&&(Gi(ue)||ue[Hi]))break e;if((G||P)&&(P=F.window===F?F:(P=F.ownerDocument)?P.defaultView||P.parentWindow:window,G?(ue=s.relatedTarget||s.toElement,G=z,ue=ue?Gi(ue):null,ue!==null&&(Ke=c(ue),Se=ue.tag,ue!==Ke||Se!==5&&Se!==27&&Se!==6)&&(ue=null)):(G=null,ue=z),G!==ue)){if(Se=td,J="onMouseLeave",M="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(Se=id,J="onPointerLeave",M="onPointerEnter",b="pointer"),Ke=G==null?P:Yl(G),L=ue==null?P:Yl(ue),P=new Se(J,b+"leave",G,s,F),P.target=Ke,P.relatedTarget=L,J=null,Gi(F)===z&&(Se=new Se(M,b+"enter",ue,s,F),Se.target=L,Se.relatedTarget=Ke,J=Se),Ke=J,G&&ue)t:{for(Se=ov,M=G,b=ue,L=0,J=M;J;J=Se(J))L++;J=0;for(var ve=b;ve;ve=Se(ve))J++;for(;0<L-J;)M=Se(M),L--;for(;0<J-L;)b=Se(b),J--;for(;L--;){if(M===b||b!==null&&M===b.alternate){Se=M;break t}M=Se(M),b=Se(b)}Se=null}else Se=null;G!==null&&Kp(K,P,G,Se,!1),ue!==null&&Ke!==null&&Kp(K,Ke,ue,Se,!0)}}e:{if(P=z?Yl(z):window,G=P.nodeName&&P.nodeName.toLowerCase(),G==="select"||G==="input"&&P.type==="file")var qe=dd;else if(ud(P))if(fd)qe=y0;else{qe=m0;var pe=h0}else G=P.nodeName,!G||G.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?z&&Ya(z.elementType)&&(qe=dd):qe=g0;if(qe&&(qe=qe(e,z))){cd(K,qe,s,F);break e}pe&&pe(e,P,z),e==="focusout"&&z&&P.type==="number"&&z.memoizedProps.value!=null&&Oa(P,"number",P.value)}switch(pe=z?Yl(z):window,e){case"focusin":(ud(pe)||pe.contentEditable==="true")&&(Ki=pe,sr=z,es=null);break;case"focusout":es=sr=Ki=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,Sd(K,s,F);break;case"selectionchange":if(x0)break;case"keydown":case"keyup":Sd(K,s,F)}var Me;if(tr)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Xi?ad(e,s)&&(Le="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Le="onCompositionStart");Le&&(ld&&s.locale!=="ko"&&(Xi||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Xi&&(Me=Wc()):(Bn=F,Qa="value"in Bn?Bn.value:Bn.textContent,Xi=!0)),pe=Ko(z,Le),0<pe.length&&(Le=new nd(Le,e,null,s,F),K.push({event:Le,listeners:pe}),Me?Le.data=Me:(Me=rd(s),Me!==null&&(Le.data=Me)))),(Me=u0?c0(e,s):d0(e,s))&&(Le=Ko(z,"onBeforeInput"),0<Le.length&&(pe=new nd("onBeforeInput","beforeinput",null,s,F),K.push({event:pe,listeners:Le}),pe.data=Me)),nv(K,e,z,s,F)}Jp(K,n)})}function _s(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Ko(e,n){for(var s=n+"Capture",a=[];e!==null;){var f=e,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=$l(e,s),f!=null&&a.unshift(_s(e,f,g)),f=$l(e,n),f!=null&&a.push(_s(e,f,g))),e.tag===3)return a;e=e.return}return[]}function ov(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Kp(e,n,s,a,f){for(var g=n._reactName,T=[];s!==null&&s!==a;){var C=s,w=C.alternate,z=C.stateNode;if(C=C.tag,w!==null&&w===a)break;C!==5&&C!==26&&C!==27||z===null||(w=z,f?(z=$l(s,g),z!=null&&T.unshift(_s(s,z,w))):f||(z=$l(s,g),z!=null&&T.push(_s(s,z,w)))),s=s.return}T.length!==0&&e.push({event:n,listeners:T})}var av=/\r\n?/g,rv=/\u0000|\uFFFD/g;function Qp(e){return(typeof e=="string"?e:""+e).replace(av,`
`).replace(rv,"")}function jp(e,n){return n=Qp(n),Qp(e)===n}function Xe(e,n,s,a,f,g){switch(s){case"children":typeof a=="string"?n==="body"||n==="textarea"&&a===""||Yi(e,a):(typeof a=="number"||typeof a=="bigint")&&n!=="body"&&Yi(e,""+a);break;case"className":Zs(e,"class",a);break;case"tabIndex":Zs(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Zs(e,s,a);break;case"style":Qc(e,a,g);break;case"data":if(n!=="object"){Zs(e,"data",a);break}case"src":case"href":if(a===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(s);break}a=eo(""+a),e.setAttribute(s,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(n!=="input"&&Xe(e,n,"name",f.name,f,null),Xe(e,n,"formEncType",f.formEncType,f,null),Xe(e,n,"formMethod",f.formMethod,f,null),Xe(e,n,"formTarget",f.formTarget,f,null)):(Xe(e,n,"encType",f.encType,f,null),Xe(e,n,"method",f.method,f,null),Xe(e,n,"target",f.target,f,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(s);break}a=eo(""+a),e.setAttribute(s,a);break;case"onClick":a!=null&&(e.onclick=Sn);break;case"onScroll":a!=null&&ke("scroll",e);break;case"onScrollEnd":a!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(s=a.__html,s!=null){if(f.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}s=eo(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,""+a):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":a===!0?e.setAttribute(s,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,a):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(s,a):e.removeAttribute(s);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(s):e.setAttribute(s,a);break;case"popover":ke("beforetoggle",e),ke("toggle",e),js(e,"popover",a);break;case"xlinkActuate":xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":xn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":xn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":xn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":xn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":js(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=zy.get(s)||s,js(e,s,a))}}function Iu(e,n,s,a,f,g){switch(s){case"style":Qc(e,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(s=a.__html,s!=null){if(f.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof a=="string"?Yi(e,a):(typeof a=="number"||typeof a=="bigint")&&Yi(e,""+a);break;case"onScroll":a!=null&&ke("scroll",e);break;case"onScrollEnd":a!=null&&ke("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vc.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),n=s.slice(2,f?s.length-7:void 0),g=e[bt]||null,g=g!=null?g[s]:null,typeof g=="function"&&e.removeEventListener(n,g,f),typeof a=="function")){typeof g!="function"&&g!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,a,f);break e}s in e?e[s]=a:a===!0?e.setAttribute(s,""):js(e,s,a)}}}function St(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var a=!1,f=!1,g;for(g in s)if(s.hasOwnProperty(g)){var T=s[g];if(T!=null)switch(g){case"src":a=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Xe(e,n,g,T,s,null)}}f&&Xe(e,n,"srcSet",s.srcSet,s,null),a&&Xe(e,n,"src",s.src,s,null);return;case"input":ke("invalid",e);var C=g=T=f=null,w=null,z=null;for(a in s)if(s.hasOwnProperty(a)){var F=s[a];if(F!=null)switch(a){case"name":f=F;break;case"type":T=F;break;case"checked":w=F;break;case"defaultChecked":z=F;break;case"value":g=F;break;case"defaultValue":C=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(o(137,n));break;default:Xe(e,n,a,F,s,null)}}$c(e,g,C,w,z,T,f,!1);return;case"select":ke("invalid",e),a=T=g=null;for(f in s)if(s.hasOwnProperty(f)&&(C=s[f],C!=null))switch(f){case"value":g=C;break;case"defaultValue":T=C;break;case"multiple":a=C;default:Xe(e,n,f,C,s,null)}n=g,s=T,e.multiple=!!a,n!=null?Oi(e,!!a,n,!1):s!=null&&Oi(e,!!a,s,!0);return;case"textarea":ke("invalid",e),g=f=a=null;for(T in s)if(s.hasOwnProperty(T)&&(C=s[T],C!=null))switch(T){case"value":a=C;break;case"defaultValue":f=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:Xe(e,n,T,C,s,null)}Xc(e,a,f,g);return;case"option":for(w in s)if(s.hasOwnProperty(w)&&(a=s[w],a!=null))switch(w){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Xe(e,n,w,a,s,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(a=0;a<As.length;a++)ke(As[a],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in s)if(s.hasOwnProperty(z)&&(a=s[z],a!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Xe(e,n,z,a,s,null)}return;default:if(Ya(n)){for(F in s)s.hasOwnProperty(F)&&(a=s[F],a!==void 0&&Iu(e,n,F,a,s,void 0));return}}for(C in s)s.hasOwnProperty(C)&&(a=s[C],a!=null&&Xe(e,n,C,a,s,null))}function uv(e,n,s,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,T=null,C=null,w=null,z=null,F=null;for(G in s){var K=s[G];if(s.hasOwnProperty(G)&&K!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":w=K;default:a.hasOwnProperty(G)||Xe(e,n,G,null,a,K)}}for(var P in a){var G=a[P];if(K=s[P],a.hasOwnProperty(P)&&(G!=null||K!=null))switch(P){case"type":g=G;break;case"name":f=G;break;case"checked":z=G;break;case"defaultChecked":F=G;break;case"value":T=G;break;case"defaultValue":C=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,n));break;default:G!==K&&Xe(e,n,P,G,a,K)}}Fa(e,T,C,w,z,F,g,f);return;case"select":G=T=C=P=null;for(g in s)if(w=s[g],s.hasOwnProperty(g)&&w!=null)switch(g){case"value":break;case"multiple":G=w;default:a.hasOwnProperty(g)||Xe(e,n,g,null,a,w)}for(f in a)if(g=a[f],w=s[f],a.hasOwnProperty(f)&&(g!=null||w!=null))switch(f){case"value":P=g;break;case"defaultValue":C=g;break;case"multiple":T=g;default:g!==w&&Xe(e,n,f,g,a,w)}n=C,s=T,a=G,P!=null?Oi(e,!!s,P,!1):!!a!=!!s&&(n!=null?Oi(e,!!s,n,!0):Oi(e,!!s,s?[]:"",!1));return;case"textarea":G=P=null;for(C in s)if(f=s[C],s.hasOwnProperty(C)&&f!=null&&!a.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Xe(e,n,C,null,a,f)}for(T in a)if(f=a[T],g=s[T],a.hasOwnProperty(T)&&(f!=null||g!=null))switch(T){case"value":P=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(o(91));break;default:f!==g&&Xe(e,n,T,f,a,g)}Jc(e,P,G);return;case"option":for(var ue in s)if(P=s[ue],s.hasOwnProperty(ue)&&P!=null&&!a.hasOwnProperty(ue))switch(ue){case"selected":e.selected=!1;break;default:Xe(e,n,ue,null,a,P)}for(w in a)if(P=a[w],G=s[w],a.hasOwnProperty(w)&&P!==G&&(P!=null||G!=null))switch(w){case"selected":e.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Xe(e,n,w,P,a,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in s)P=s[Se],s.hasOwnProperty(Se)&&P!=null&&!a.hasOwnProperty(Se)&&Xe(e,n,Se,null,a,P);for(z in a)if(P=a[z],G=s[z],a.hasOwnProperty(z)&&P!==G&&(P!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,n));break;default:Xe(e,n,z,P,a,G)}return;default:if(Ya(n)){for(var Ke in s)P=s[Ke],s.hasOwnProperty(Ke)&&P!==void 0&&!a.hasOwnProperty(Ke)&&Iu(e,n,Ke,void 0,a,P);for(F in a)P=a[F],G=s[F],!a.hasOwnProperty(F)||P===G||P===void 0&&G===void 0||Iu(e,n,F,P,a,G);return}}for(var M in s)P=s[M],s.hasOwnProperty(M)&&P!=null&&!a.hasOwnProperty(M)&&Xe(e,n,M,null,a,P);for(K in a)P=a[K],G=s[K],!a.hasOwnProperty(K)||P===G||P==null&&G==null||Xe(e,n,K,P,a,G)}function Zp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),a=0;a<s.length;a++){var f=s[a],g=f.transferSize,T=f.initiatorType,C=f.duration;if(g&&C&&Zp(T)){for(T=0,C=f.responseEnd,a+=1;a<s.length;a++){var w=s[a],z=w.startTime;if(z>C)break;var F=w.transferSize,K=w.initiatorType;F&&Zp(K)&&(w=w.responseEnd,T+=F*(w<C?1:(C-z)/(w-z)))}if(--a,n+=8*(g+T)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Du=null,ku=null;function Qo(e){return e.nodeType===9?e:e.ownerDocument}function Wp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eh(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Uu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Lu=null;function dv(){var e=window.event;return e&&e.type==="popstate"?e===Lu?!1:(Lu=e,!0):(Lu=null,!1)}var th=typeof setTimeout=="function"?setTimeout:void 0,fv=typeof clearTimeout=="function"?clearTimeout:void 0,nh=typeof Promise=="function"?Promise:void 0,pv=typeof queueMicrotask=="function"?queueMicrotask:typeof nh<"u"?function(e){return nh.resolve(null).then(e).catch(hv)}:th;function hv(e){setTimeout(function(){throw e})}function si(e){return e==="head"}function ih(e,n){var s=n,a=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(a===0){e.removeChild(f),El(n);return}a--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")a++;else if(s==="html")Ns(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ns(s);for(var g=s.firstChild;g;){var T=g.nextSibling,C=g.nodeName;g[Ol]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=T}}else s==="body"&&Ns(e.ownerDocument.body);s=f}while(s);El(n)}function lh(e,n){var s=e;e=0;do{var a=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=a}while(s)}function zu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":zu(s),Va(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function mv(e,n,s,a){for(;e.nodeType===1;){var f=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Ol])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=jt(e.nextSibling),e===null)break}return null}function gv(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=jt(e.nextSibling),e===null))return null;return e}function sh(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=jt(e.nextSibling),e===null))return null;return e}function Pu(e){return e.data==="$?"||e.data==="$~"}function qu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function yv(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var a=function(){n(),s.removeEventListener("DOMContentLoaded",a)};s.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function jt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Hu=null;function oh(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return jt(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function ah(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function rh(e,n,s){switch(n=Qo(s),e){case"html":if(e=n.documentElement,!e)throw Error(o(452));return e;case"head":if(e=n.head,!e)throw Error(o(453));return e;case"body":if(e=n.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Ns(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Va(e)}var Zt=new Map,uh=new Set;function jo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var zn=Z.d;Z.d={f:vv,r:xv,D:Sv,C:Tv,L:Ev,m:Cv,X:_v,S:Av,M:Nv};function vv(){var e=zn.f(),n=Bo();return e||n}function xv(e){var n=Vi(e);n!==null&&n.tag===5&&n.type==="form"?Nf(n):zn.r(e)}var xl=typeof document>"u"?null:document;function ch(e,n,s){var a=xl;if(a&&typeof n=="string"&&n){var f=Ot(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),uh.has(f)||(uh.add(f),e={rel:e,crossOrigin:s,href:n},a.querySelector(f)===null&&(n=a.createElement("link"),St(n,"link",e),ht(n),a.head.appendChild(n)))}}function Sv(e){zn.D(e),ch("dns-prefetch",e,null)}function Tv(e,n){zn.C(e,n),ch("preconnect",e,n)}function Ev(e,n,s){zn.L(e,n,s);var a=xl;if(a&&e&&n){var f='link[rel="preload"][as="'+Ot(n)+'"]';n==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Ot(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Ot(s.imageSizes)+'"]')):f+='[href="'+Ot(e)+'"]';var g=f;switch(n){case"style":g=Sl(e);break;case"script":g=Tl(e)}Zt.has(g)||(e=S({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Zt.set(g,e),a.querySelector(f)!==null||n==="style"&&a.querySelector(ws(g))||n==="script"&&a.querySelector(bs(g))||(n=a.createElement("link"),St(n,"link",e),ht(n),a.head.appendChild(n)))}}function Cv(e,n){zn.m(e,n);var s=xl;if(s&&e){var a=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Ot(a)+'"][href="'+Ot(e)+'"]',g=f;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Tl(e)}if(!Zt.has(g)&&(e=S({rel:"modulepreload",href:e},n),Zt.set(g,e),s.querySelector(f)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(bs(g)))return}a=s.createElement("link"),St(a,"link",e),ht(a),s.head.appendChild(a)}}}function Av(e,n,s){zn.S(e,n,s);var a=xl;if(a&&e){var f=Bi(a).hoistableStyles,g=Sl(e);n=n||"default";var T=f.get(g);if(!T){var C={loading:0,preload:null};if(T=a.querySelector(ws(g)))C.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Zt.get(g))&&Gu(e,s);var w=T=a.createElement("link");ht(w),St(w,"link",e),w._p=new Promise(function(z,F){w.onload=z,w.onerror=F}),w.addEventListener("load",function(){C.loading|=1}),w.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Zo(T,n,a)}T={type:"stylesheet",instance:T,count:1,state:C},f.set(g,T)}}}function _v(e,n){zn.X(e,n);var s=xl;if(s&&e){var a=Bi(s).hoistableScripts,f=Tl(e),g=a.get(f);g||(g=s.querySelector(bs(f)),g||(e=S({src:e,async:!0},n),(n=Zt.get(f))&&Vu(e,n),g=s.createElement("script"),ht(g),St(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function Nv(e,n){zn.M(e,n);var s=xl;if(s&&e){var a=Bi(s).hoistableScripts,f=Tl(e),g=a.get(f);g||(g=s.querySelector(bs(f)),g||(e=S({src:e,async:!0,type:"module"},n),(n=Zt.get(f))&&Vu(e,n),g=s.createElement("script"),ht(g),St(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function dh(e,n,s,a){var f=(f=Ee.current)?jo(f):null;if(!f)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Sl(s.href),s=Bi(f).hoistableStyles,a=s.get(n),a||(a={type:"style",instance:null,count:0,state:null},s.set(n,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Sl(s.href);var g=Bi(f).hoistableStyles,T=g.get(e);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,T),(g=f.querySelector(ws(e)))&&!g._p&&(T.instance=g,T.state.loading=5),Zt.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Zt.set(e,s),g||wv(f,e,s,T.state))),n&&a===null)throw Error(o(528,""));return T}if(n&&a!==null)throw Error(o(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Tl(s),s=Bi(f).hoistableScripts,a=s.get(n),a||(a={type:"script",instance:null,count:0,state:null},s.set(n,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Sl(e){return'href="'+Ot(e)+'"'}function ws(e){return'link[rel="stylesheet"]['+e+"]"}function fh(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function wv(e,n,s,a){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?a.loading=1:(n=e.createElement("link"),a.preload=n,n.addEventListener("load",function(){return a.loading|=1}),n.addEventListener("error",function(){return a.loading|=2}),St(n,"link",s),ht(n),e.head.appendChild(n))}function Tl(e){return'[src="'+Ot(e)+'"]'}function bs(e){return"script[async]"+e}function ph(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var a=e.querySelector('style[data-href~="'+Ot(s.href)+'"]');if(a)return n.instance=a,ht(a),a;var f=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),ht(a),St(a,"style",f),Zo(a,s.precedence,e),n.instance=a;case"stylesheet":f=Sl(s.href);var g=e.querySelector(ws(f));if(g)return n.state.loading|=4,n.instance=g,ht(g),g;a=fh(s),(f=Zt.get(f))&&Gu(a,f),g=(e.ownerDocument||e).createElement("link"),ht(g);var T=g;return T._p=new Promise(function(C,w){T.onload=C,T.onerror=w}),St(g,"link",a),n.state.loading|=4,Zo(g,s.precedence,e),n.instance=g;case"script":return g=Tl(s.src),(f=e.querySelector(bs(g)))?(n.instance=f,ht(f),f):(a=s,(f=Zt.get(g))&&(a=S({},s),Vu(a,f)),e=e.ownerDocument||e,f=e.createElement("script"),ht(f),St(f,"link",a),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(a=n.instance,n.state.loading|=4,Zo(a,s.precedence,e));return n.instance}function Zo(e,n,s){for(var a=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=a.length?a[a.length-1]:null,g=f,T=0;T<a.length;T++){var C=a[T];if(C.dataset.precedence===n)g=C;else if(g!==f)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Gu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Vu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Wo=null;function hh(e,n,s){if(Wo===null){var a=new Map,f=Wo=new Map;f.set(s,a)}else f=Wo,a=f.get(s),a||(a=new Map,f.set(s,a));if(a.has(e))return a;for(a.set(e,null),s=s.getElementsByTagName(e),f=0;f<s.length;f++){var g=s[f];if(!(g[Ol]||g[gt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(n)||"";T=e+T;var C=a.get(T);C?C.push(g):a.set(T,[g])}}return a}function mh(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function bv(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function gh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Rv(e,n,s,a){if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Sl(a.href),g=n.querySelector(ws(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=ea.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=g,ht(g);return}g=n.ownerDocument||n,a=fh(a),(f=Zt.get(f))&&Gu(a,f),g=g.createElement("link"),ht(g);var T=g;T._p=new Promise(function(C,w){T.onload=C,T.onerror=w}),St(g,"link",a),s.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=ea.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var Bu=0;function Mv(e,n){return e.stylesheets&&e.count===0&&na(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var a=setTimeout(function(){if(e.stylesheets&&na(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+n);0<e.imgBytes&&Bu===0&&(Bu=62500*cv());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&na(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Bu?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(f)}}:null}function ea(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)na(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ta=null;function na(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ta=new Map,n.forEach(Iv,e),ta=null,ea.call(e))}function Iv(e,n){if(!(n.state.loading&4)){var s=ta.get(e);if(s)var a=s.get(null);else{s=new Map,ta.set(e,s);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var T=f[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(s.set(T.dataset.precedence,T),a=T)}a&&s.set(null,a)}f=n.instance,T=f.getAttribute("data-precedence"),g=s.get(T)||a,g===a&&s.set(null,f),s.set(T,f),this.count++,a=ea.bind(this),f.addEventListener("load",a),f.addEventListener("error",a),g?g.parentNode.insertBefore(f,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var Rs={$$typeof:V,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Dv(e,n,s,a,f,g,T,C,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.hiddenUpdates=fe(null),this.identifierPrefix=a,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function yh(e,n,s,a,f,g,T,C,w,z,F,K){return e=new Dv(e,n,s,T,w,z,F,K,C),n=1,g===!0&&(n|=24),g=Pt(3,null,null,n),e.current=g,g.stateNode=e,n=Tr(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:a,isDehydrated:s,cache:n},_r(g),e}function vh(e){return e?(e=Zi,e):Zi}function xh(e,n,s,a,f,g){f=vh(f),a.context===null?a.context=f:a.pendingContext=f,a=Xn(n),a.payload={element:s},g=g===void 0?null:g,g!==null&&(a.callback=g),s=Kn(e,a,n),s!==null&&(Ut(s,e,n),as(s,e,n))}function Sh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Fu(e,n){Sh(e,n),(e=e.alternate)&&Sh(e,n)}function Th(e){if(e.tag===13||e.tag===31){var n=vi(e,67108864);n!==null&&Ut(n,e,67108864),Fu(e,67108864)}}function Eh(e){if(e.tag===13||e.tag===31){var n=Bt();n=Ne(n);var s=vi(e,n);s!==null&&Ut(s,e,n),Fu(e,n)}}var ia=!0;function kv(e,n,s,a){var f=U.T;U.T=null;var g=Z.p;try{Z.p=2,Ou(e,n,s,a)}finally{Z.p=g,U.T=f}}function Uv(e,n,s,a){var f=U.T;U.T=null;var g=Z.p;try{Z.p=8,Ou(e,n,s,a)}finally{Z.p=g,U.T=f}}function Ou(e,n,s,a){if(ia){var f=Yu(a);if(f===null)Mu(e,n,a,la,s),Ah(e,a);else if(zv(f,e,n,s,a))a.stopPropagation();else if(Ah(e,a),n&4&&-1<Lv.indexOf(e)){for(;f!==null;){var g=Vi(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=O(g.pendingLanes);if(T!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var w=1<<31-_t(T);C.entanglements[1]|=w,T&=~w}hn(g),(Be&6)===0&&(Go=Ct()+500,Cs(0))}}break;case 31:case 13:C=vi(g,2),C!==null&&Ut(C,g,2),Bo(),Fu(g,2)}if(g=Yu(a),g===null&&Mu(e,n,a,la,s),g===f)break;f=g}f!==null&&a.stopPropagation()}else Mu(e,n,a,null,s)}}function Yu(e){return e=Ja(e),$u(e)}var la=null;function $u(e){if(la=null,e=Gi(e),e!==null){var n=c(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=h(n),e!==null)return e;e=null}else if(s===31){if(e=m(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return la=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ua()){case Pi:return 2;case Xs:return 8;case qi:case La:return 32;case Bl:return 268435456;default:return 32}default:return 32}}var Ju=!1,oi=null,ai=null,ri=null,Ms=new Map,Is=new Map,ui=[],Lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ah(e,n){switch(e){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Ms.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(n.pointerId)}}function Ds(e,n,s,a,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:g,targetContainers:[f]},n!==null&&(n=Vi(n),n!==null&&Th(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function zv(e,n,s,a,f){switch(n){case"focusin":return oi=Ds(oi,e,n,s,a,f),!0;case"dragenter":return ai=Ds(ai,e,n,s,a,f),!0;case"mouseover":return ri=Ds(ri,e,n,s,a,f),!0;case"pointerover":var g=f.pointerId;return Ms.set(g,Ds(Ms.get(g)||null,e,n,s,a,f)),!0;case"gotpointercapture":return g=f.pointerId,Is.set(g,Ds(Is.get(g)||null,e,n,s,a,f)),!0}return!1}function _h(e){var n=Gi(e.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=h(s),n!==null){e.blockedOn=n,Fl(e.priority,function(){Eh(s)});return}}else if(n===31){if(n=m(s),n!==null){e.blockedOn=n,Fl(e.priority,function(){Eh(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sa(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Yu(e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);$a=a,s.target.dispatchEvent(a),$a=null}else return n=Vi(s),n!==null&&Th(n),e.blockedOn=s,!1;n.shift()}return!0}function Nh(e,n,s){sa(e)&&s.delete(n)}function Pv(){Ju=!1,oi!==null&&sa(oi)&&(oi=null),ai!==null&&sa(ai)&&(ai=null),ri!==null&&sa(ri)&&(ri=null),Ms.forEach(Nh),Is.forEach(Nh)}function oa(e,n){e.blockedOn===n&&(e.blockedOn=null,Ju||(Ju=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Pv)))}var aa=null;function wh(e){aa!==e&&(aa=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){aa===e&&(aa=null);for(var n=0;n<e.length;n+=3){var s=e[n],a=e[n+1],f=e[n+2];if(typeof a!="function"){if($u(a||s)===null)continue;break}var g=Vi(s);g!==null&&(e.splice(n,3),n-=3,Yr(g,{pending:!0,data:f,method:s.method,action:a},a,f))}}))}function El(e){function n(w){return oa(w,e)}oi!==null&&oa(oi,e),ai!==null&&oa(ai,e),ri!==null&&oa(ri,e),Ms.forEach(n),Is.forEach(n);for(var s=0;s<ui.length;s++){var a=ui[s];a.blockedOn===e&&(a.blockedOn=null)}for(;0<ui.length&&(s=ui[0],s.blockedOn===null);)_h(s),s.blockedOn===null&&ui.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(a=0;a<s.length;a+=3){var f=s[a],g=s[a+1],T=f[bt]||null;if(typeof g=="function")T||wh(s);else if(T){var C=null;if(g&&g.hasAttribute("formAction")){if(f=g,T=g[bt]||null)C=T.formAction;else if($u(f)!==null)continue}else C=T.action;typeof C=="function"?s[a+1]=C:(s.splice(a,3),a-=3),wh(s)}}}function bh(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),a||setTimeout(s,20)}function s(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Xu(e){this._internalRoot=e}ra.prototype.render=Xu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));var s=n.current,a=Bt();xh(s,a,e,n,null,null)},ra.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;xh(e.current,2,null,e,null,null),Bo(),n[Hi]=null}};function ra(e){this._internalRoot=e}ra.prototype.unstable_scheduleHydration=function(e){if(e){var n=Qs();e={blockedOn:null,target:e,priority:n};for(var s=0;s<ui.length&&n!==0&&n<ui[s].priority;s++);ui.splice(s,0,e),s===0&&_h(e)}};var Rh=t.version;if(Rh!=="19.2.0")throw Error(o(527,Rh,"19.2.0"));Z.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var qv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ua.isDisabled&&ua.supportsFiber)try{pi=ua.inject(qv),At=ua}catch{}}return Us.createRoot=function(e,n){if(!r(e))throw Error(o(299));var s=!1,a="",f=zf,g=Pf,T=qf;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=yh(e,1,!1,null,null,s,a,null,f,g,T,bh),e[Hi]=n.current,Ru(e),new Xu(n)},Us.hydrateRoot=function(e,n,s){if(!r(e))throw Error(o(299));var a=!1,f="",g=zf,T=Pf,C=qf,w=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.formState!==void 0&&(w=s.formState)),n=yh(e,1,!0,n,s??null,a,f,w,g,T,C,bh),n.context=vh(null),s=n.current,a=Bt(),a=Ne(a),f=Xn(a),f.callback=null,Kn(s,f,a),s=a,n.current.lanes=s,ge(n,s),hn(n),e[Hi]=n.current,Ru(e),new ra(n)},Us.version="19.2.0",Us}var Hh;function Qv(){if(Hh)return ju.exports;Hh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),ju.exports=Kv(),ju.exports}var jv=Qv();const Zv=wg(jv),Wv=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),bg=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm6-11a4 4 0 11-8 0 4 4 0 018 0z"})}),ex=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),tx=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nx,ix;function lx(){return{geminiUrl:nx,vertexUrl:ix}}function sx(i,t,l,o){var r,c;if(!(i!=null&&i.baseUrl)){const h=lx();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:l:(c=h.geminiUrl)!==null&&c!==void 0?c:o}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qn{}function oe(i,t){const l=/\{([^}]+)\}/g;return i.replace(l,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const c=t[r];return c!=null?String(c):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(i,t,l){for(let c=0;c<t.length-1;c++){const h=t[c];if(h.endsWith("[]")){const m=h.slice(0,-2);if(!(m in i))if(Array.isArray(l))i[m]=Array.from({length:l.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(i[m])){const y=i[m];if(Array.isArray(l))for(let p=0;p<y.length;p++){const x=y[p];d(x,t.slice(c+1),l[p])}else for(const p of y)d(p,t.slice(c+1),l)}return}else if(h.endsWith("[0]")){const m=h.slice(0,-3);m in i||(i[m]=[{}]);const y=i[m];d(y[0],t.slice(c+1),l);return}(!i[h]||typeof i[h]!="object")&&(i[h]={}),i=i[h]}const o=t[t.length-1],r=i[o];if(r!==void 0){if(!l||typeof l=="object"&&Object.keys(l).length===0||l===r)return;if(typeof r=="object"&&typeof l=="object"&&r!==null&&l!==null)Object.assign(r,l);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof l=="object"&&l!==null&&!Array.isArray(l)?Object.assign(i,l):i[o]=l}function u(i,t,l=void 0){try{if(t.length===1&&t[0]==="_self")return i;for(let o=0;o<t.length;o++){if(typeof i!="object"||i===null)return l;const r=t[o];if(r.endsWith("[]")){const c=r.slice(0,-2);if(c in i){const h=i[c];return Array.isArray(h)?h.map(m=>u(m,t.slice(o+1),l)):l}else return l}else i=i[r]}return i}catch(o){if(o instanceof TypeError)return l;throw o}}function ox(i,t){for(const[l,o]of Object.entries(t)){const r=l.split("."),c=o.split("."),h=new Set;let m=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){m=y;break}if(m!==-1&&c.length>m)for(let y=m;y<c.length;y++){const p=c[y];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&h.add(p)}sc(i,r,c,0,h)}}function sc(i,t,l,o,r){if(o>=t.length||typeof i!="object"||i===null)return;const c=t[o];if(c.endsWith("[]")){const h=c.slice(0,-2),m=i;if(h in m&&Array.isArray(m[h]))for(const y of m[h])sc(y,t,l,o+1,r)}else if(c==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const h=i,m=Object.keys(h).filter(p=>!p.startsWith("_")&&!r.has(p)),y={};for(const p of m)y[p]=h[p];for(const[p,x]of Object.entries(y)){const S=[];for(const E of l.slice(o))E==="*"?S.push(p):S.push(E);d(h,S,x)}for(const p of m)delete h[p]}}else{const h=i;c in h&&sc(h[c],t,l,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sc(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ax(i){const t={},l=u(i,["operationName"]);l!=null&&d(t,["operationName"],l);const o=u(i,["resourceName"]);return o!=null&&d(t,["_url","resourceName"],o),t}function rx(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata"]);o!=null&&d(t,["metadata"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],cx(h)),t}function ux(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata"]);o!=null&&d(t,["metadata"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["response"]);return h!=null&&d(t,["response"],dx(h)),t}function cx(i){const t={},l=u(i,["generatedSamples"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>fx(h))),d(t,["generatedVideos"],c)}const o=u(i,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function dx(i){const t={},l=u(i,["videos"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>px(h))),d(t,["generatedVideos"],c)}const o=u(i,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function fx(i){const t={},l=u(i,["video"]);return l!=null&&d(t,["video"],xx(l)),t}function px(i){const t={},l=u(i,["_self"]);return l!=null&&d(t,["video"],Sx(l)),t}function hx(i){const t={},l=u(i,["operationName"]);return l!=null&&d(t,["_url","operationName"],l),t}function mx(i){const t={},l=u(i,["operationName"]);return l!=null&&d(t,["_url","operationName"],l),t}function gx(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata"]);o!=null&&d(t,["metadata"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["response"]);return h!=null&&d(t,["response"],yx(h)),t}function yx(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["parent"]);o!=null&&d(t,["parent"],o);const r=u(i,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function Rg(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata"]);o!=null&&d(t,["metadata"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["response"]);return h!=null&&d(t,["response"],vx(h)),t}function vx(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["parent"]);o!=null&&d(t,["parent"],o);const r=u(i,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function xx(i){const t={},l=u(i,["uri"]);l!=null&&d(t,["uri"],l);const o=u(i,["encodedVideo"]);o!=null&&d(t,["videoBytes"],Sc(o));const r=u(i,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function Sx(i){const t={},l=u(i,["gcsUri"]);l!=null&&d(t,["uri"],l);const o=u(i,["bytesBase64Encoded"]);o!=null&&d(t,["videoBytes"],Sc(o));const r=u(i,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gh;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gh||(Gh={}));var Vh;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Vh||(Vh={}));var Bh;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Bh||(Bh={}));var ye;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(ye||(ye={}));var Fh;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Fh||(Fh={}));var Oh;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Oh||(Oh={}));var Yh;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Yh||(Yh={}));var $h;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($h||($h={}));var Jh;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jh||(Jh={}));var Xh;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xh||(Xh={}));var Kh;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Kh||(Kh={}));var Qh;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Qh||(Qh={}));var jh;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(jh||(jh={}));var Zh;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Zh||(Zh={}));var Wh;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wh||(Wh={}));var em;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(em||(em={}));var tm;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(tm||(tm={}));var nm;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nm||(nm={}));var ga;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(ga||(ga={}));var im;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(im||(im={}));var lm;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lm||(lm={}));var sm;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sm||(sm={}));var oc;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(oc||(oc={}));var om;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(om||(om={}));var am;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(am||(am={}));var rm;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(rm||(rm={}));var um;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(um||(um={}));var cm;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(cm||(cm={}));var dm;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(dm||(dm={}));var fm;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(fm||(fm={}));var pm;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(pm||(pm={}));var hm;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(hm||(hm={}));var mm;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(mm||(mm={}));var gm;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(gm||(gm={}));var ym;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ym||(ym={}));var vm;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vm||(vm={}));var xm;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(xm||(xm={}));var Sm;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(Sm||(Sm={}));var Tm;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Tm||(Tm={}));var Em;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(Em||(Em={}));var Cm;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Cm||(Cm={}));var Am;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(Am||(Am={}));var _m;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(_m||(_m={}));var Nm;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(Nm||(Nm={}));var wm;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(wm||(wm={}));var bm;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(bm||(bm={}));var Rm;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rm||(Rm={}));var Mm;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Mm||(Mm={}));var Im;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Im||(Im={}));var Dm;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Dm||(Dm={}));var km;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(km||(km={}));var Um;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Um||(Um={}));var Al;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Al||(Al={}));class ac{constructor(t){const l={};for(const o of t.headers.entries())l[o[0]]=o[1];this.headers=l,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ls{get text(){var t,l,o,r,c,h,m,y;if(((r=(o=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",x=!1;const S=[];for(const E of(y=(m=(h=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[A,D]of Object.entries(E))A!=="text"&&A!=="thought"&&(D!==null||D!==void 0)&&S.push(A);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;x=!0,p+=E.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?p:void 0}get data(){var t,l,o,r,c,h,m,y;if(((r=(o=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const x=[];for(const S of(y=(m=(h=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[E,A]of Object.entries(S))E!=="inlineData"&&(A!==null||A!==void 0)&&x.push(E);S.inlineData&&typeof S.inlineData.data=="string"&&(p+=atob(S.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var t,l,o,r,c,h,m,y;if(((r=(o=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(m=(h=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var t,l,o,r,c,h,m,y,p;if(((r=(o=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(y=(m=(h=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((x==null?void 0:x.length)!==0)return(p=x==null?void 0:x[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var t,l,o,r,c,h,m,y,p;if(((r=(o=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(y=(m=(h=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((x==null?void 0:x.length)!==0)return(p=x==null?void 0:x[0])===null||p===void 0?void 0:p.output}}class Lm{}class zm{}class Tx{}class Ex{}class Cx{}class Ax{}class Pm{}class qm{}class Hm{}class _x{}class ya{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const o=new ya;let r;const c=t;return l?r=ux(c):r=rx(c),Object.assign(o,r),o}}class Gm{}class Vm{}class Bm{}class Nx{}class wx{}class bx{}class Tc{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const o=new Tc,c=gx(t);return Object.assign(o,c),o}}class Rx{}class Mx{}class Ix{}class Fm{}class Dx{get text(){var t,l,o;let r="",c=!1;const h=[];for(const m of(o=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&o!==void 0?o:[]){for(const[y,p]of Object.entries(m))y!=="text"&&y!=="thought"&&p!==null&&h.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;c=!0,r+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?r:void 0}get data(){var t,l,o;let r="";const c=[];for(const h of(o=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&o!==void 0?o:[]){for(const[m,y]of Object.entries(h))m!=="inlineData"&&y!==null&&c.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class kx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ec{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const o=new Ec,c=Rg(t);return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ge(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const l=t.split("/",2);return`publishers/${l[0]}/models/${l[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Mg(i,t){const l=Ge(i,t);return l?l.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}`:l.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${l}`:l:""}function Ig(i){return Array.isArray(i)?i.map(t=>va(t)):[va(i)]}function va(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function Dg(i){const t=va(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function kg(i){const t=va(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Om(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function Ug(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>Om(t)):[Om(i)]}function rc(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Ym(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function $m(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Et(i){if(i==null)throw new Error("ContentUnion is required");return rc(i)?i:{role:"user",parts:Ug(i)}}function Cc(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(l=>{const o=Et(l);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(i.isVertexAI()){const l=Et(t);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]}return Array.isArray(t)?t.map(l=>Et(l)):[Et(t)]}function en(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Ym(i)||$m(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Et(i)]}const t=[],l=[],o=rc(i[0]);for(const r of i){const c=rc(r);if(c!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(r);else{if(Ym(r)||$m(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");l.push(r)}}return o||t.push({role:"user",parts:Ug(l)}),t}function Ux(i,t){i.includes("null")&&(t.nullable=!0);const l=i.filter(o=>o!=="null");if(l.length===1)t.type=Object.values(ye).includes(l[0].toUpperCase())?l[0].toUpperCase():ye.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of l)t.anyOf.push({type:Object.values(ye).includes(o.toUpperCase())?o.toUpperCase():ye.TYPE_UNSPECIFIED})}}function _l(i){const t={},l=["items"],o=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=i.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(t.nullable=!0,i=c[1]):c[1].type==="null"&&(t.nullable=!0,i=c[0])),i.type instanceof Array&&Ux(i.type,t);for(const[h,m]of Object.entries(i))if(m!=null)if(h=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;t.type=Object.values(ye).includes(m.toUpperCase())?m.toUpperCase():ye.TYPE_UNSPECIFIED}else if(l.includes(h))t[h]=_l(m);else if(o.includes(h)){const y=[];for(const p of m){if(p.type=="null"){t.nullable=!0;continue}y.push(_l(p))}t[h]=y}else if(r.includes(h)){const y={};for(const[p,x]of Object.entries(m))y[p]=_l(x);t[h]=y}else{if(h==="additionalProperties")continue;t[h]=m}return t}function Ac(i){return _l(i)}function _c(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Nc(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Dl(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=_l(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=_l(t.response));return i}function kl(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const l of i)t.push(l);return t}function Lx(i,t,l,o=1){const r=!t.startsWith(`${l}/`)&&t.split("/").length===o;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${l}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}/${t}`:t:r?`${l}/${t}`:t}function Hn(i,t){if(typeof t!="string")throw new Error("name must be a string");return Lx(i,t,"cachedContents")}function Lg(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function fi(i){return Sc(i)}function zx(i){return i!=null&&typeof i=="object"&&"name"in i}function Px(i){return i!=null&&typeof i=="object"&&"video"in i}function qx(i){return i!=null&&typeof i=="object"&&"uri"in i}function zg(i){var t;let l;if(zx(i)&&(l=i.name),!(qx(i)&&(l=i.uri,l===void 0))&&!(Px(i)&&(l=(t=i.video)===null||t===void 0?void 0:t.uri,l===void 0))){if(typeof i=="string"&&(l=i),l===void 0)throw new Error("Could not extract file name from the provided input.");if(l.startsWith("https://")){const r=l.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${l}`);l=r[0]}else l.startsWith("files/")&&(l=l.split("files/")[1]);return l}}function Pg(i,t){let l;return i.isVertexAI()?l=t?"publishers/google/models":"models":l=t?"models":"tunedModels",l}function qg(i){for(const t of["models","tunedModels","publisherModels"])if(Hx(i,t))return i[t];return[]}function Hx(i,t){return i!==null&&typeof i=="object"&&t in i}function Gx(i,t={}){const l=i,o={name:l.name,description:l.description,parametersJsonSchema:l.inputSchema};return l.outputSchema&&(o.responseJsonSchema=l.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function Vx(i,t={}){const l=[],o=new Set;for(const r of i){const c=r.name;if(o.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);o.add(c);const h=Gx(r,t);h.functionDeclarations&&l.push(...h.functionDeclarations)}return{functionDeclarations:l}}function Hg(i,t){let l;if(typeof t=="string")if(i.isVertexAI())if(t.startsWith("gs://"))l={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))l={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))l={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");l={inlinedRequests:t}}else l=t;const o=[l.gcsUri,l.bigqueryUri].filter(Boolean).length,r=[l.inlinedRequests,l.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return l}function Bx(i){if(typeof i!="string")return i;const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Gg(i){if(typeof i!="object"||i===null)return{};const t=i,l=t.inlinedResponses;if(typeof l!="object"||l===null)return i;const r=l.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let c=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const y=h.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){c=!0;break}}return c&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),i}function Ul(i,t){const l=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(l))return l.split("/").pop();throw new Error(`Invalid batch job name: ${l}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(l))return l.split("/").pop();if(/^\d+$/.test(l))return l;throw new Error(`Invalid batch job name: ${l}.`)}function Vg(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fx(i){const t={},l=u(i,["responsesFile"]);l!=null&&d(t,["fileName"],l);const o=u(i,["inlinedResponses","inlinedResponses"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>SS(h))),d(t,["inlinedResponses"],c)}const r=u(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["inlinedEmbedContentResponses"],c)}return t}function Ox(i){const t={},l=u(i,["predictionsFormat"]);l!=null&&d(t,["format"],l);const o=u(i,["gcsDestination","outputUriPrefix"]);o!=null&&d(t,["gcsUri"],o);const r=u(i,["bigqueryDestination","outputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function Yx(i){const t={},l=u(i,["format"]);l!=null&&d(t,["predictionsFormat"],l);const o=u(i,["gcsUri"]);o!=null&&d(t,["gcsDestination","outputUriPrefix"],o);const r=u(i,["bigqueryUri"]);if(r!=null&&d(t,["bigqueryDestination","outputUri"],r),u(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function ha(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata","displayName"]);o!=null&&d(t,["displayName"],o);const r=u(i,["metadata","state"]);r!=null&&d(t,["state"],Vg(r));const c=u(i,["metadata","createTime"]);c!=null&&d(t,["createTime"],c);const h=u(i,["metadata","endTime"]);h!=null&&d(t,["endTime"],h);const m=u(i,["metadata","updateTime"]);m!=null&&d(t,["updateTime"],m);const y=u(i,["metadata","model"]);y!=null&&d(t,["model"],y);const p=u(i,["metadata","output"]);return p!=null&&d(t,["dest"],Fx(Gg(p))),t}function uc(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["displayName"]);o!=null&&d(t,["displayName"],o);const r=u(i,["state"]);r!=null&&d(t,["state"],Vg(r));const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["createTime"]);h!=null&&d(t,["createTime"],h);const m=u(i,["startTime"]);m!=null&&d(t,["startTime"],m);const y=u(i,["endTime"]);y!=null&&d(t,["endTime"],y);const p=u(i,["updateTime"]);p!=null&&d(t,["updateTime"],p);const x=u(i,["model"]);x!=null&&d(t,["model"],x);const S=u(i,["inputConfig"]);S!=null&&d(t,["src"],$x(S));const E=u(i,["outputConfig"]);E!=null&&d(t,["dest"],Ox(Gg(E)));const A=u(i,["completionStats"]);return A!=null&&d(t,["completionStats"],A),t}function $x(i){const t={},l=u(i,["instancesFormat"]);l!=null&&d(t,["format"],l);const o=u(i,["gcsSource","uris"]);o!=null&&d(t,["gcsUri"],o);const r=u(i,["bigquerySource","inputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function Jx(i,t){const l={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=u(t,["fileName"]);o!=null&&d(l,["fileName"],o);const r=u(t,["inlinedRequests"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>xS(i,h))),d(l,["requests","requests"],c)}return l}function Xx(i){const t={},l=u(i,["format"]);l!=null&&d(t,["instancesFormat"],l);const o=u(i,["gcsUri"]);o!=null&&d(t,["gcsSource","uris"],o);const r=u(i,["bigqueryUri"]);if(r!=null&&d(t,["bigquerySource","inputUri"],r),u(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Kx(i){const t={},l=u(i,["data"]);if(l!=null&&d(t,["data"],l),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Qx(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Ul(i,o)),l}function jx(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Ul(i,o)),l}function Zx(i){const t={},l=u(i,["content"]);l!=null&&d(t,["content"],l);const o=u(i,["citationMetadata"]);o!=null&&d(t,["citationMetadata"],Wx(o));const r=u(i,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const c=u(i,["finishReason"]);c!=null&&d(t,["finishReason"],c);const h=u(i,["avgLogprobs"]);h!=null&&d(t,["avgLogprobs"],h);const m=u(i,["groundingMetadata"]);m!=null&&d(t,["groundingMetadata"],m);const y=u(i,["index"]);y!=null&&d(t,["index"],y);const p=u(i,["logprobsResult"]);p!=null&&d(t,["logprobsResult"],p);const x=u(i,["safetyRatings"]);if(x!=null){let E=x;Array.isArray(E)&&(E=E.map(A=>A)),d(t,["safetyRatings"],E)}const S=u(i,["urlContextMetadata"]);return S!=null&&d(t,["urlContextMetadata"],S),t}function Wx(i){const t={},l=u(i,["citationSources"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["citations"],o)}return t}function Bg(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>wS(c))),d(t,["parts"],r)}const o=u(i,["role"]);return o!=null&&d(t,["role"],o),t}function eS(i,t){const l={},o=u(i,["displayName"]);if(t!==void 0&&o!=null&&d(t,["batch","displayName"],o),u(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return l}function tS(i,t){const l={},o=u(i,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const r=u(i,["dest"]);return t!==void 0&&r!=null&&d(t,["outputConfig"],Yx(Bx(r))),l}function Jm(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["src"]);r!=null&&d(l,["batch","inputConfig"],Jx(i,Hg(i,r)));const c=u(t,["config"]);return c!=null&&eS(c,l),l}function nS(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["model"],Ge(i,o));const r=u(t,["src"]);r!=null&&d(l,["inputConfig"],Xx(Hg(i,r)));const c=u(t,["config"]);return c!=null&&tS(c,l),l}function iS(i,t){const l={},o=u(i,["displayName"]);return t!==void 0&&o!=null&&d(t,["batch","displayName"],o),l}function lS(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["src"]);r!=null&&d(l,["batch","inputConfig"],dS(i,r));const c=u(t,["config"]);return c!=null&&iS(c,l),l}function sS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Ul(i,o)),l}function oS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Ul(i,o)),l}function aS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["name"]);o!=null&&d(t,["name"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);return c!=null&&d(t,["error"],c),t}function rS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["name"]);o!=null&&d(t,["name"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);return c!=null&&d(t,["error"],c),t}function uS(i,t){const l={},o=u(t,["contents"]);if(o!=null){let c=Cc(i,o);Array.isArray(c)&&(c=c.map(h=>h)),d(l,["requests[]","request","content"],c)}const r=u(t,["config"]);return r!=null&&(d(l,["_self"],cS(r,l)),ox(l,{"requests[].*":"requests[].request.*"})),l}function cS(i,t){const l={},o=u(i,["taskType"]);t!==void 0&&o!=null&&d(t,["requests[]","taskType"],o);const r=u(i,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const c=u(i,["outputDimensionality"]);if(t!==void 0&&c!=null&&d(t,["requests[]","outputDimensionality"],c),u(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function dS(i,t){const l={},o=u(t,["fileName"]);o!=null&&d(l,["file_name"],o);const r=u(t,["inlinedRequests"]);return r!=null&&d(l,["requests"],uS(i,r)),l}function fS(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&d(t,["fileUri"],l);const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function pS(i,t,l){const o={},r=u(t,["systemInstruction"]);l!==void 0&&r!=null&&d(l,["systemInstruction"],Bg(Et(r)));const c=u(t,["temperature"]);c!=null&&d(o,["temperature"],c);const h=u(t,["topP"]);h!=null&&d(o,["topP"],h);const m=u(t,["topK"]);m!=null&&d(o,["topK"],m);const y=u(t,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const p=u(t,["maxOutputTokens"]);p!=null&&d(o,["maxOutputTokens"],p);const x=u(t,["stopSequences"]);x!=null&&d(o,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&d(o,["responseLogprobs"],S);const E=u(t,["logprobs"]);E!=null&&d(o,["logprobs"],E);const A=u(t,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const D=u(t,["frequencyPenalty"]);D!=null&&d(o,["frequencyPenalty"],D);const N=u(t,["seed"]);N!=null&&d(o,["seed"],N);const R=u(t,["responseMimeType"]);R!=null&&d(o,["responseMimeType"],R);const I=u(t,["responseSchema"]);I!=null&&d(o,["responseSchema"],Ac(I));const H=u(t,["responseJsonSchema"]);if(H!=null&&d(o,["responseJsonSchema"],H),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const V=u(t,["safetySettings"]);if(l!==void 0&&V!=null){let me=V;Array.isArray(me)&&(me=me.map(Ie=>bS(Ie))),d(l,["safetySettings"],me)}const B=u(t,["tools"]);if(l!==void 0&&B!=null){let me=kl(B);Array.isArray(me)&&(me=me.map(Ie=>RS(Dl(Ie)))),d(l,["tools"],me)}const Y=u(t,["toolConfig"]);if(l!==void 0&&Y!=null&&d(l,["toolConfig"],Y),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=u(t,["cachedContent"]);l!==void 0&&ee!=null&&d(l,["cachedContent"],Hn(i,ee));const ne=u(t,["responseModalities"]);ne!=null&&d(o,["responseModalities"],ne);const he=u(t,["mediaResolution"]);he!=null&&d(o,["mediaResolution"],he);const ae=u(t,["speechConfig"]);if(ae!=null&&d(o,["speechConfig"],_c(ae)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const te=u(t,["thinkingConfig"]);te!=null&&d(o,["thinkingConfig"],te);const re=u(t,["imageConfig"]);return re!=null&&d(o,["imageConfig"],re),o}function hS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(p=>Zx(p))),d(t,["candidates"],y)}const r=u(i,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const c=u(i,["promptFeedback"]);c!=null&&d(t,["promptFeedback"],c);const h=u(i,["responseId"]);h!=null&&d(t,["responseId"],h);const m=u(i,["usageMetadata"]);return m!=null&&d(t,["usageMetadata"],m),t}function mS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Ul(i,o)),l}function gS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Ul(i,o)),l}function yS(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&d(t,["enableWidget"],l),t}function vS(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=u(i,["timeRangeFilter"]);return l!=null&&d(t,["timeRangeFilter"],l),t}function xS(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["request","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let m=en(r);Array.isArray(m)&&(m=m.map(y=>Bg(y))),d(l,["request","contents"],m)}const c=u(t,["metadata"]);c!=null&&d(l,["metadata"],c);const h=u(t,["config"]);return h!=null&&d(l,["request","generationConfig"],pS(i,h,u(l,["request"],{}))),l}function SS(i){const t={},l=u(i,["response"]);l!=null&&d(t,["response"],hS(l));const o=u(i,["error"]);return o!=null&&d(t,["error"],o),t}function TS(i,t){const l={},o=u(i,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=u(i,["pageToken"]);if(t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),u(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return l}function ES(i,t){const l={},o=u(i,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=u(i,["pageToken"]);t!==void 0&&r!=null&&d(t,["_query","pageToken"],r);const c=u(i,["filter"]);return t!==void 0&&c!=null&&d(t,["_query","filter"],c),l}function CS(i){const t={},l=u(i,["config"]);return l!=null&&TS(l,t),t}function AS(i){const t={},l=u(i,["config"]);return l!=null&&ES(l,t),t}function _S(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["operations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>ha(h))),d(t,["batchJobs"],c)}return t}function NS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["batchPredictionJobs"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>uc(h))),d(t,["batchJobs"],c)}return t}function wS(i){const t={},l=u(i,["functionCall"]);l!=null&&d(t,["functionCall"],l);const o=u(i,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=u(i,["executableCode"]);r!=null&&d(t,["executableCode"],r);const c=u(i,["fileData"]);c!=null&&d(t,["fileData"],fS(c));const h=u(i,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const m=u(i,["inlineData"]);m!=null&&d(t,["inlineData"],Kx(m));const y=u(i,["text"]);y!=null&&d(t,["text"],y);const p=u(i,["thought"]);p!=null&&d(t,["thought"],p);const x=u(i,["thoughtSignature"]);x!=null&&d(t,["thoughtSignature"],x);const S=u(i,["videoMetadata"]);return S!=null&&d(t,["videoMetadata"],S),t}function bS(i){const t={},l=u(i,["category"]);if(l!=null&&d(t,["category"],l),u(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=u(i,["threshold"]);return o!=null&&d(t,["threshold"],o),t}function RS(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>S)),d(t,["functionDeclarations"],x)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=u(i,["computerUse"]);r!=null&&d(t,["computerUse"],r);const c=u(i,["fileSearch"]);c!=null&&d(t,["fileSearch"],c);const h=u(i,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=u(i,["googleMaps"]);m!=null&&d(t,["googleMaps"],yS(m));const y=u(i,["googleSearch"]);y!=null&&d(t,["googleSearch"],vS(y));const p=u(i,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pn;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Pn||(Pn={}));class ki{constructor(t,l,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=l,this.init(t,o,r)}init(t,l,o){var r,c;this.nameInternal=t,this.pageInternal=l[this.nameInternal]||[],this.sdkHttpResponseInternal=l==null?void 0:l.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!o||Object.keys(o).length===0?h={config:{}}:typeof o=="object"?h=Object.assign({},o):h=o,h.config&&(h.config.pageToken=l.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(c=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MS extends qn{constructor(t){super(),this.apiClient=t,this.create=async l=>(this.apiClient.isVertexAI()&&(l.config=this.formatDestination(l.src,l.config)),this.createInternal(l)),this.createEmbeddings=async l=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(l)},this.list=async(l={})=>new ki(Pn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(l),l)}createInlinedGenerateContentRequest(t){const l=Jm(this.apiClient,t),o=l._url,r=oe("{model}:batchGenerateContent",o),m=l.batch.inputConfig.requests,y=m.requests,p=[];for(const x of y){const S=Object.assign({},x);if(S.systemInstruction){const E=S.systemInstruction;delete S.systemInstruction;const A=S.request;A.systemInstruction=E,S.request=A}p.push(S)}return m.requests=p,delete l.config,delete l._url,delete l._query,{path:r,body:l}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,l){const o=l?Object.assign({},l):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const c=this.getGcsUri(t),h=this.getBigqueryUri(t);if(c)c.endsWith(".jsonl")?o.dest=`${c.slice(0,-6)}/dest`:o.dest=`${c}_dest_${r}`;else if(h)o.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=nS(this.apiClient,t);return m=oe("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>uc(x))}else{const p=Jm(this.apiClient,t);return m=oe("{model}:batchGenerateContent",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>ha(x))}}async createEmbeddingsInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=lS(this.apiClient,t);return c=oe("{model}:asyncBatchEmbedContent",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>ha(y))}}async get(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=gS(this.apiClient,t);return m=oe("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>uc(x))}else{const p=mS(this.apiClient,t);return m=oe("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>ha(x))}}async cancel(t){var l,o,r,c;let h="",m={};if(this.apiClient.isVertexAI()){const y=jx(this.apiClient,t);h=oe("batchPredictionJobs/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=Qx(this.apiClient,t);h=oe("batches/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=AS(t);return m=oe("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=NS(x),E=new Fm;return Object.assign(E,S),E})}else{const p=CS(t);return m=oe("batches",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=_S(x),E=new Fm;return Object.assign(E,S),E})}}async delete(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=oS(this.apiClient,t);return m=oe("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>rS(x))}else{const p=sS(this.apiClient,t);return m=oe("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>aS(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IS(i){const t={},l=u(i,["data"]);if(l!=null&&d(t,["data"],l),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Xm(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>ZS(c))),d(t,["parts"],r)}const o=u(i,["role"]);return o!=null&&d(t,["role"],o),t}function DS(i,t){const l={},o=u(i,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=u(i,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const c=u(i,["displayName"]);t!==void 0&&c!=null&&d(t,["displayName"],c);const h=u(i,["contents"]);if(t!==void 0&&h!=null){let x=en(h);Array.isArray(x)&&(x=x.map(S=>Xm(S))),d(t,["contents"],x)}const m=u(i,["systemInstruction"]);t!==void 0&&m!=null&&d(t,["systemInstruction"],Xm(Et(m)));const y=u(i,["tools"]);if(t!==void 0&&y!=null){let x=y;Array.isArray(x)&&(x=x.map(S=>WS(S))),d(t,["tools"],x)}const p=u(i,["toolConfig"]);if(t!==void 0&&p!=null&&d(t,["toolConfig"],p),u(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return l}function kS(i,t){const l={},o=u(i,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=u(i,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const c=u(i,["displayName"]);t!==void 0&&c!=null&&d(t,["displayName"],c);const h=u(i,["contents"]);if(t!==void 0&&h!=null){let S=en(h);Array.isArray(S)&&(S=S.map(E=>E)),d(t,["contents"],S)}const m=u(i,["systemInstruction"]);t!==void 0&&m!=null&&d(t,["systemInstruction"],Et(m));const y=u(i,["tools"]);if(t!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>eT(E))),d(t,["tools"],S)}const p=u(i,["toolConfig"]);t!==void 0&&p!=null&&d(t,["toolConfig"],p);const x=u(i,["kmsKeyName"]);return t!==void 0&&x!=null&&d(t,["encryption_spec","kmsKeyName"],x),l}function US(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["model"],Mg(i,o));const r=u(t,["config"]);return r!=null&&DS(r,l),l}function LS(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["model"],Mg(i,o));const r=u(t,["config"]);return r!=null&&kS(r,l),l}function zS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Hn(i,o)),l}function PS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Hn(i,o)),l}function qS(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&d(t,["sdkHttpResponse"],l),t}function HS(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&d(t,["sdkHttpResponse"],l),t}function GS(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&d(t,["fileUri"],l);const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function VS(i){const t={};if(u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=u(i,["description"]);l!=null&&d(t,["description"],l);const o=u(i,["name"]);o!=null&&d(t,["name"],o);const r=u(i,["parameters"]);r!=null&&d(t,["parameters"],r);const c=u(i,["parametersJsonSchema"]);c!=null&&d(t,["parametersJsonSchema"],c);const h=u(i,["response"]);h!=null&&d(t,["response"],h);const m=u(i,["responseJsonSchema"]);return m!=null&&d(t,["responseJsonSchema"],m),t}function BS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Hn(i,o)),l}function FS(i,t){const l={},o=u(t,["name"]);return o!=null&&d(l,["_url","name"],Hn(i,o)),l}function OS(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&d(t,["enableWidget"],l),t}function YS(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=u(i,["timeRangeFilter"]);return l!=null&&d(t,["timeRangeFilter"],l),t}function $S(i,t){const l={},o=u(i,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),l}function JS(i,t){const l={},o=u(i,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),l}function XS(i){const t={},l=u(i,["config"]);return l!=null&&$S(l,t),t}function KS(i){const t={},l=u(i,["config"]);return l!=null&&JS(l,t),t}function QS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["cachedContents"],c)}return t}function jS(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["cachedContents"],c)}return t}function ZS(i){const t={},l=u(i,["functionCall"]);l!=null&&d(t,["functionCall"],l);const o=u(i,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=u(i,["executableCode"]);r!=null&&d(t,["executableCode"],r);const c=u(i,["fileData"]);c!=null&&d(t,["fileData"],GS(c));const h=u(i,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const m=u(i,["inlineData"]);m!=null&&d(t,["inlineData"],IS(m));const y=u(i,["text"]);y!=null&&d(t,["text"],y);const p=u(i,["thought"]);p!=null&&d(t,["thought"],p);const x=u(i,["thoughtSignature"]);x!=null&&d(t,["thoughtSignature"],x);const S=u(i,["videoMetadata"]);return S!=null&&d(t,["videoMetadata"],S),t}function WS(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>S)),d(t,["functionDeclarations"],x)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=u(i,["computerUse"]);r!=null&&d(t,["computerUse"],r);const c=u(i,["fileSearch"]);c!=null&&d(t,["fileSearch"],c);const h=u(i,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=u(i,["googleMaps"]);m!=null&&d(t,["googleMaps"],OS(m));const y=u(i,["googleSearch"]);y!=null&&d(t,["googleSearch"],YS(y));const p=u(i,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function eT(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let S=l;Array.isArray(S)&&(S=S.map(E=>VS(E))),d(t,["functionDeclarations"],S)}const o=u(i,["retrieval"]);o!=null&&d(t,["retrieval"],o);const r=u(i,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const c=u(i,["computerUse"]);if(c!=null&&d(t,["computerUse"],c),u(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(i,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const m=u(i,["enterpriseWebSearch"]);m!=null&&d(t,["enterpriseWebSearch"],m);const y=u(i,["googleMaps"]);y!=null&&d(t,["googleMaps"],y);const p=u(i,["googleSearch"]);p!=null&&d(t,["googleSearch"],p);const x=u(i,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function tT(i,t){const l={},o=u(i,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=u(i,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),l}function nT(i,t){const l={},o=u(i,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const r=u(i,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),l}function iT(i,t){const l={},o=u(t,["name"]);o!=null&&d(l,["_url","name"],Hn(i,o));const r=u(t,["config"]);return r!=null&&tT(r,l),l}function lT(i,t){const l={},o=u(t,["name"]);o!=null&&d(l,["_url","name"],Hn(i,o));const r=u(t,["config"]);return r!=null&&nT(r,l),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sT extends qn{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new ki(Pn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(l),l)}async create(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=LS(this.apiClient,t);return m=oe("cachedContents",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const p=US(this.apiClient,t);return m=oe("cachedContents",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=FS(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const p=BS(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=PS(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=HS(x),E=new Vm;return Object.assign(E,S),E})}else{const p=zS(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=qS(x),E=new Vm;return Object.assign(E,S),E})}}async update(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=lT(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const p=iT(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=KS(t);return m=oe("cachedContents",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=jS(x),E=new Bm;return Object.assign(E,S),E})}else{const p=XS(t);return m=oe("cachedContents",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=QS(x),E=new Bm;return Object.assign(E,S),E})}}}function Km(i){var t=typeof Symbol=="function"&&Symbol.iterator,l=t&&i[t],o=0;if(l)return l.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function et(i){return this instanceof et?(this.v=i,this):new et(i)}function Nl(i,t,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=l.apply(i,t||[]),r,c=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(A){return function(D){return Promise.resolve(D).then(A,S)}}function m(A,D){o[A]&&(r[A]=function(N){return new Promise(function(R,I){c.push([A,N,R,I])>1||y(A,N)})},D&&(r[A]=D(r[A])))}function y(A,D){try{p(o[A](D))}catch(N){E(c[0][3],N)}}function p(A){A.value instanceof et?Promise.resolve(A.value.v).then(x,S):E(c[0][2],A)}function x(A){y("next",A)}function S(A){y("throw",A)}function E(A,D){A(D),c.shift(),c.length&&y(c[0][0],c[0][1])}}function Vs(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],l;return t?t.call(i):(i=typeof Km=="function"?Km(i):i[Symbol.iterator](),l={},o("next"),o("throw"),o("return"),l[Symbol.asyncIterator]=function(){return this},l);function o(c){l[c]=i[c]&&function(h){return new Promise(function(m,y){h=i[c](h),r(m,y,h.done,h.value)})}}function r(c,h,m,y){Promise.resolve(y).then(function(p){c({value:p,done:m})},h)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oT(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const l=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return l===void 0?!1:Fg(l)}function Fg(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function aT(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Qm(i){if(i===void 0||i.length===0)return[];const t=[],l=i.length;let o=0;for(;o<l;)if(i[o].role==="user")t.push(i[o]),o++;else{const r=[];let c=!0;for(;o<l&&i[o].role==="model";)r.push(i[o]),c&&!Fg(i[o])&&(c=!1),o++;c?t.push(...r):t.pop()}return t}class rT{constructor(t,l){this.modelsModule=t,this.apiClient=l}create(t){return new uT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class uT{constructor(t,l,o,r={},c=[]){this.apiClient=t,this.modelsModule=l,this.model=o,this.config=r,this.history=c,this.sendPromise=Promise.resolve(),aT(c)}async sendMessage(t){var l;await this.sendPromise;const o=Et(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(l=t.config)!==null&&l!==void 0?l:this.config});return this.sendPromise=(async()=>{var c,h,m;const y=await r,p=(h=(c=y.candidates)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h.content,x=y.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let E=[];x!=null&&(E=(m=x.slice(S))!==null&&m!==void 0?m:[]);const A=p?[p]:[];this.recordHistory(o,A,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var l;await this.sendPromise;const o=Et(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(l=t.config)!==null&&l!==void 0?l:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const c=await r;return this.processStreamResponse(c,o)}getHistory(t=!1){const l=t?Qm(this.history):this.history;return structuredClone(l)}processStreamResponse(t,l){var o,r;return Nl(this,arguments,function*(){var h,m,y,p;const x=[];try{for(var S=!0,E=Vs(t),A;A=yield et(E.next()),h=A.done,!h;S=!0){p=A.value,S=!1;const D=p;if(oT(D)){const N=(r=(o=D.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;N!==void 0&&x.push(N)}yield yield et(D)}}catch(D){m={error:D}}finally{try{!S&&!h&&(y=E.return)&&(yield et(y.call(E)))}finally{if(m)throw m.error}}this.recordHistory(l,x)})}recordHistory(t,l,o){let r=[];l.length>0&&l.every(c=>c.role!==void 0)?r=l:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Qm(o)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ca extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Ca.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cT(i){const t={},l=u(i,["file"]);return l!=null&&d(t,["file"],l),t}function dT(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&d(t,["sdkHttpResponse"],l),t}function fT(i){const t={},l=u(i,["name"]);return l!=null&&d(t,["_url","file"],zg(l)),t}function pT(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&d(t,["sdkHttpResponse"],l),t}function hT(i){const t={},l=u(i,["name"]);return l!=null&&d(t,["_url","file"],zg(l)),t}function mT(i,t){const l={},o=u(i,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),l}function gT(i){const t={},l=u(i,["config"]);return l!=null&&mT(l,t),t}function yT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["files"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["files"],c)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vT extends qn{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new ki(Pn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(l),l)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(l=>l)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=gT(t);return c=oe("files",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:y.headers},x})),r.then(y=>{const p=yT(y),x=new Rx;return Object.assign(x,p),x})}}async createInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=cT(t);return c=oe("upload/v1beta/files",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const p=dT(y),x=new Mx;return Object.assign(x,p),x})}}async get(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=hT(t);return c=oe("files/{file}",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=fT(t);return c=oe("files/{file}",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:y.headers},x})),r.then(y=>{const p=pT(y),x=new Ix;return Object.assign(x,p),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ma(i){const t={},l=u(i,["data"]);if(l!=null&&d(t,["data"],l),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function xT(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>UT(c))),d(t,["parts"],r)}const o=u(i,["role"]);return o!=null&&d(t,["role"],o),t}function ST(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&d(t,["fileUri"],l);const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function TT(i){const t={};if(u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=u(i,["description"]);l!=null&&d(t,["description"],l);const o=u(i,["name"]);o!=null&&d(t,["name"],o);const r=u(i,["parameters"]);r!=null&&d(t,["parameters"],r);const c=u(i,["parametersJsonSchema"]);c!=null&&d(t,["parametersJsonSchema"],c);const h=u(i,["response"]);h!=null&&d(t,["response"],h);const m=u(i,["responseJsonSchema"]);return m!=null&&d(t,["responseJsonSchema"],m),t}function ET(i){const t={},l=u(i,["modelSelectionConfig"]);l!=null&&d(t,["modelConfig"],l);const o=u(i,["responseJsonSchema"]);o!=null&&d(t,["responseJsonSchema"],o);const r=u(i,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const c=u(i,["candidateCount"]);c!=null&&d(t,["candidateCount"],c);const h=u(i,["enableAffectiveDialog"]);h!=null&&d(t,["enableAffectiveDialog"],h);const m=u(i,["frequencyPenalty"]);m!=null&&d(t,["frequencyPenalty"],m);const y=u(i,["logprobs"]);y!=null&&d(t,["logprobs"],y);const p=u(i,["maxOutputTokens"]);p!=null&&d(t,["maxOutputTokens"],p);const x=u(i,["mediaResolution"]);x!=null&&d(t,["mediaResolution"],x);const S=u(i,["presencePenalty"]);S!=null&&d(t,["presencePenalty"],S);const E=u(i,["responseLogprobs"]);E!=null&&d(t,["responseLogprobs"],E);const A=u(i,["responseMimeType"]);A!=null&&d(t,["responseMimeType"],A);const D=u(i,["responseModalities"]);D!=null&&d(t,["responseModalities"],D);const N=u(i,["responseSchema"]);N!=null&&d(t,["responseSchema"],N);const R=u(i,["routingConfig"]);R!=null&&d(t,["routingConfig"],R);const I=u(i,["seed"]);I!=null&&d(t,["seed"],I);const H=u(i,["speechConfig"]);H!=null&&d(t,["speechConfig"],Og(H));const V=u(i,["stopSequences"]);V!=null&&d(t,["stopSequences"],V);const B=u(i,["temperature"]);B!=null&&d(t,["temperature"],B);const Y=u(i,["thinkingConfig"]);Y!=null&&d(t,["thinkingConfig"],Y);const ee=u(i,["topK"]);ee!=null&&d(t,["topK"],ee);const ne=u(i,["topP"]);if(ne!=null&&d(t,["topP"],ne),u(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function CT(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&d(t,["enableWidget"],l),t}function AT(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=u(i,["timeRangeFilter"]);return l!=null&&d(t,["timeRangeFilter"],l),t}function _T(i,t){const l={},o=u(i,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],o);const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const c=u(i,["temperature"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","temperature"],c);const h=u(i,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const m=u(i,["topK"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","topK"],m);const y=u(i,["maxOutputTokens"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","maxOutputTokens"],y);const p=u(i,["mediaResolution"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","mediaResolution"],p);const x=u(i,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const S=u(i,["speechConfig"]);t!==void 0&&S!=null&&d(t,["setup","generationConfig","speechConfig"],Nc(S));const E=u(i,["thinkingConfig"]);t!==void 0&&E!=null&&d(t,["setup","generationConfig","thinkingConfig"],E);const A=u(i,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const D=u(i,["systemInstruction"]);t!==void 0&&D!=null&&d(t,["setup","systemInstruction"],xT(Et(D)));const N=u(i,["tools"]);if(t!==void 0&&N!=null){let ee=kl(N);Array.isArray(ee)&&(ee=ee.map(ne=>zT(Dl(ne)))),d(t,["setup","tools"],ee)}const R=u(i,["sessionResumption"]);t!==void 0&&R!=null&&d(t,["setup","sessionResumption"],LT(R));const I=u(i,["inputAudioTranscription"]);t!==void 0&&I!=null&&d(t,["setup","inputAudioTranscription"],I);const H=u(i,["outputAudioTranscription"]);t!==void 0&&H!=null&&d(t,["setup","outputAudioTranscription"],H);const V=u(i,["realtimeInputConfig"]);t!==void 0&&V!=null&&d(t,["setup","realtimeInputConfig"],V);const B=u(i,["contextWindowCompression"]);t!==void 0&&B!=null&&d(t,["setup","contextWindowCompression"],B);const Y=u(i,["proactivity"]);return t!==void 0&&Y!=null&&d(t,["setup","proactivity"],Y),l}function NT(i,t){const l={},o=u(i,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],ET(o));const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const c=u(i,["temperature"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","temperature"],c);const h=u(i,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const m=u(i,["topK"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","topK"],m);const y=u(i,["maxOutputTokens"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","maxOutputTokens"],y);const p=u(i,["mediaResolution"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","mediaResolution"],p);const x=u(i,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const S=u(i,["speechConfig"]);t!==void 0&&S!=null&&d(t,["setup","generationConfig","speechConfig"],Og(Nc(S)));const E=u(i,["thinkingConfig"]);t!==void 0&&E!=null&&d(t,["setup","generationConfig","thinkingConfig"],E);const A=u(i,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const D=u(i,["systemInstruction"]);t!==void 0&&D!=null&&d(t,["setup","systemInstruction"],Et(D));const N=u(i,["tools"]);if(t!==void 0&&N!=null){let ee=kl(N);Array.isArray(ee)&&(ee=ee.map(ne=>PT(Dl(ne)))),d(t,["setup","tools"],ee)}const R=u(i,["sessionResumption"]);t!==void 0&&R!=null&&d(t,["setup","sessionResumption"],R);const I=u(i,["inputAudioTranscription"]);t!==void 0&&I!=null&&d(t,["setup","inputAudioTranscription"],I);const H=u(i,["outputAudioTranscription"]);t!==void 0&&H!=null&&d(t,["setup","outputAudioTranscription"],H);const V=u(i,["realtimeInputConfig"]);t!==void 0&&V!=null&&d(t,["setup","realtimeInputConfig"],V);const B=u(i,["contextWindowCompression"]);t!==void 0&&B!=null&&d(t,["setup","contextWindowCompression"],B);const Y=u(i,["proactivity"]);return t!==void 0&&Y!=null&&d(t,["setup","proactivity"],Y),l}function wT(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["setup","model"],Ge(i,o));const r=u(t,["config"]);return r!=null&&d(l,["config"],_T(r,l)),l}function bT(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["setup","model"],Ge(i,o));const r=u(t,["config"]);return r!=null&&d(l,["config"],NT(r,l)),l}function RT(i){const t={},l=u(i,["musicGenerationConfig"]);return l!=null&&d(t,["musicGenerationConfig"],l),t}function MT(i){const t={},l=u(i,["weightedPrompts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["weightedPrompts"],o)}return t}function IT(i){const t={},l=u(i,["media"]);if(l!=null){let p=Ig(l);Array.isArray(p)&&(p=p.map(x=>ma(x))),d(t,["mediaChunks"],p)}const o=u(i,["audio"]);o!=null&&d(t,["audio"],ma(kg(o)));const r=u(i,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const c=u(i,["video"]);c!=null&&d(t,["video"],ma(Dg(c)));const h=u(i,["text"]);h!=null&&d(t,["text"],h);const m=u(i,["activityStart"]);m!=null&&d(t,["activityStart"],m);const y=u(i,["activityEnd"]);return y!=null&&d(t,["activityEnd"],y),t}function DT(i){const t={},l=u(i,["media"]);if(l!=null){let p=Ig(l);Array.isArray(p)&&(p=p.map(x=>x)),d(t,["mediaChunks"],p)}const o=u(i,["audio"]);o!=null&&d(t,["audio"],kg(o));const r=u(i,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const c=u(i,["video"]);c!=null&&d(t,["video"],Dg(c));const h=u(i,["text"]);h!=null&&d(t,["text"],h);const m=u(i,["activityStart"]);m!=null&&d(t,["activityStart"],m);const y=u(i,["activityEnd"]);return y!=null&&d(t,["activityEnd"],y),t}function kT(i){const t={},l=u(i,["setupComplete"]);l!=null&&d(t,["setupComplete"],l);const o=u(i,["serverContent"]);o!=null&&d(t,["serverContent"],o);const r=u(i,["toolCall"]);r!=null&&d(t,["toolCall"],r);const c=u(i,["toolCallCancellation"]);c!=null&&d(t,["toolCallCancellation"],c);const h=u(i,["usageMetadata"]);h!=null&&d(t,["usageMetadata"],qT(h));const m=u(i,["goAway"]);m!=null&&d(t,["goAway"],m);const y=u(i,["sessionResumptionUpdate"]);return y!=null&&d(t,["sessionResumptionUpdate"],y),t}function UT(i){const t={},l=u(i,["functionCall"]);l!=null&&d(t,["functionCall"],l);const o=u(i,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=u(i,["executableCode"]);r!=null&&d(t,["executableCode"],r);const c=u(i,["fileData"]);c!=null&&d(t,["fileData"],ST(c));const h=u(i,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const m=u(i,["inlineData"]);m!=null&&d(t,["inlineData"],ma(m));const y=u(i,["text"]);y!=null&&d(t,["text"],y);const p=u(i,["thought"]);p!=null&&d(t,["thought"],p);const x=u(i,["thoughtSignature"]);x!=null&&d(t,["thoughtSignature"],x);const S=u(i,["videoMetadata"]);return S!=null&&d(t,["videoMetadata"],S),t}function LT(i){const t={},l=u(i,["handle"]);if(l!=null&&d(t,["handle"],l),u(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Og(i){const t={},l=u(i,["languageCode"]);l!=null&&d(t,["languageCode"],l);const o=u(i,["voiceConfig"]);if(o!=null&&d(t,["voiceConfig"],o),u(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function zT(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>S)),d(t,["functionDeclarations"],x)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=u(i,["computerUse"]);r!=null&&d(t,["computerUse"],r);const c=u(i,["fileSearch"]);c!=null&&d(t,["fileSearch"],c);const h=u(i,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=u(i,["googleMaps"]);m!=null&&d(t,["googleMaps"],CT(m));const y=u(i,["googleSearch"]);y!=null&&d(t,["googleSearch"],AT(y));const p=u(i,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function PT(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let S=l;Array.isArray(S)&&(S=S.map(E=>TT(E))),d(t,["functionDeclarations"],S)}const o=u(i,["retrieval"]);o!=null&&d(t,["retrieval"],o);const r=u(i,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const c=u(i,["computerUse"]);if(c!=null&&d(t,["computerUse"],c),u(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(i,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const m=u(i,["enterpriseWebSearch"]);m!=null&&d(t,["enterpriseWebSearch"],m);const y=u(i,["googleMaps"]);y!=null&&d(t,["googleMaps"],y);const p=u(i,["googleSearch"]);p!=null&&d(t,["googleSearch"],p);const x=u(i,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function qT(i){const t={},l=u(i,["promptTokenCount"]);l!=null&&d(t,["promptTokenCount"],l);const o=u(i,["cachedContentTokenCount"]);o!=null&&d(t,["cachedContentTokenCount"],o);const r=u(i,["candidatesTokenCount"]);r!=null&&d(t,["responseTokenCount"],r);const c=u(i,["toolUsePromptTokenCount"]);c!=null&&d(t,["toolUsePromptTokenCount"],c);const h=u(i,["thoughtsTokenCount"]);h!=null&&d(t,["thoughtsTokenCount"],h);const m=u(i,["totalTokenCount"]);m!=null&&d(t,["totalTokenCount"],m);const y=u(i,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(D=>D)),d(t,["promptTokensDetails"],A)}const p=u(i,["cacheTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(D=>D)),d(t,["cacheTokensDetails"],A)}const x=u(i,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(D=>D)),d(t,["responseTokensDetails"],A)}const S=u(i,["toolUsePromptTokensDetails"]);if(S!=null){let A=S;Array.isArray(A)&&(A=A.map(D=>D)),d(t,["toolUsePromptTokensDetails"],A)}const E=u(i,["trafficType"]);return E!=null&&d(t,["trafficType"],E),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HT(i){const t={},l=u(i,["data"]);if(l!=null&&d(t,["data"],l),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function GT(i){const t={},l=u(i,["content"]);l!=null&&d(t,["content"],l);const o=u(i,["citationMetadata"]);o!=null&&d(t,["citationMetadata"],VT(o));const r=u(i,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const c=u(i,["finishReason"]);c!=null&&d(t,["finishReason"],c);const h=u(i,["avgLogprobs"]);h!=null&&d(t,["avgLogprobs"],h);const m=u(i,["groundingMetadata"]);m!=null&&d(t,["groundingMetadata"],m);const y=u(i,["index"]);y!=null&&d(t,["index"],y);const p=u(i,["logprobsResult"]);p!=null&&d(t,["logprobsResult"],p);const x=u(i,["safetyRatings"]);if(x!=null){let E=x;Array.isArray(E)&&(E=E.map(A=>A)),d(t,["safetyRatings"],E)}const S=u(i,["urlContextMetadata"]);return S!=null&&d(t,["urlContextMetadata"],S),t}function VT(i){const t={},l=u(i,["citationSources"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["citations"],o)}return t}function BT(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let c=en(r);Array.isArray(c)&&(c=c.map(h=>h)),d(l,["contents"],c)}return l}function FT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),d(t,["tokensInfo"],r)}return t}function OT(i){const t={},l=u(i,["values"]);l!=null&&d(t,["values"],l);const o=u(i,["statistics"]);return o!=null&&d(t,["statistics"],YT(o)),t}function YT(i){const t={},l=u(i,["truncated"]);l!=null&&d(t,["truncated"],l);const o=u(i,["token_count"]);return o!=null&&d(t,["tokenCount"],o),t}function Aa(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>QE(c))),d(t,["parts"],r)}const o=u(i,["role"]);return o!=null&&d(t,["role"],o),t}function $T(i){const t={},l=u(i,["controlType"]);l!=null&&d(t,["controlType"],l);const o=u(i,["enableControlImageComputation"]);return o!=null&&d(t,["computeControl"],o),t}function JT(i){const t={};if(u(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function XT(i,t){const l={},o=u(i,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],Et(o));const r=u(i,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>Kg(m))),d(t,["tools"],h)}const c=u(i,["generationConfig"]);return t!==void 0&&c!=null&&d(t,["generationConfig"],PE(c)),l}function KT(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let h=en(r);Array.isArray(h)&&(h=h.map(m=>Aa(m))),d(l,["contents"],h)}const c=u(t,["config"]);return c!=null&&JT(c),l}function QT(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let h=en(r);Array.isArray(h)&&(h=h.map(m=>m)),d(l,["contents"],h)}const c=u(t,["config"]);return c!=null&&XT(c,l),l}function jT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["totalTokens"]);o!=null&&d(t,["totalTokens"],o);const r=u(i,["cachedContentTokenCount"]);return r!=null&&d(t,["cachedContentTokenCount"],r),t}function ZT(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["totalTokens"]);return o!=null&&d(t,["totalTokens"],o),t}function WT(i,t){const l={},o=u(t,["model"]);return o!=null&&d(l,["_url","name"],Ge(i,o)),l}function eE(i,t){const l={},o=u(t,["model"]);return o!=null&&d(l,["_url","name"],Ge(i,o)),l}function tE(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&d(t,["sdkHttpResponse"],l),t}function nE(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&d(t,["sdkHttpResponse"],l),t}function iE(i,t){const l={},o=u(i,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const r=u(i,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const c=u(i,["numberOfImages"]);t!==void 0&&c!=null&&d(t,["parameters","sampleCount"],c);const h=u(i,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const m=u(i,["guidanceScale"]);t!==void 0&&m!=null&&d(t,["parameters","guidanceScale"],m);const y=u(i,["seed"]);t!==void 0&&y!=null&&d(t,["parameters","seed"],y);const p=u(i,["safetyFilterLevel"]);t!==void 0&&p!=null&&d(t,["parameters","safetySetting"],p);const x=u(i,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const S=u(i,["includeSafetyAttributes"]);t!==void 0&&S!=null&&d(t,["parameters","includeSafetyAttributes"],S);const E=u(i,["includeRaiReason"]);t!==void 0&&E!=null&&d(t,["parameters","includeRaiReason"],E);const A=u(i,["language"]);t!==void 0&&A!=null&&d(t,["parameters","language"],A);const D=u(i,["outputMimeType"]);t!==void 0&&D!=null&&d(t,["parameters","outputOptions","mimeType"],D);const N=u(i,["outputCompressionQuality"]);t!==void 0&&N!=null&&d(t,["parameters","outputOptions","compressionQuality"],N);const R=u(i,["addWatermark"]);t!==void 0&&R!=null&&d(t,["parameters","addWatermark"],R);const I=u(i,["labels"]);t!==void 0&&I!=null&&d(t,["labels"],I);const H=u(i,["editMode"]);t!==void 0&&H!=null&&d(t,["parameters","editMode"],H);const V=u(i,["baseSteps"]);return t!==void 0&&V!=null&&d(t,["parameters","editConfig","baseSteps"],V),l}function lE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["prompt"]);r!=null&&d(l,["instances[0]","prompt"],r);const c=u(t,["referenceImages"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(y=>nC(y))),d(l,["instances[0]","referenceImages"],m)}const h=u(t,["config"]);return h!=null&&iE(h,l),l}function sE(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>_a(c))),d(t,["generatedImages"],r)}return t}function oE(i,t){const l={},o=u(i,["taskType"]);t!==void 0&&o!=null&&d(t,["requests[]","taskType"],o);const r=u(i,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const c=u(i,["outputDimensionality"]);if(t!==void 0&&c!=null&&d(t,["requests[]","outputDimensionality"],c),u(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function aE(i,t){const l={},o=u(i,["taskType"]);t!==void 0&&o!=null&&d(t,["instances[]","task_type"],o);const r=u(i,["title"]);t!==void 0&&r!=null&&d(t,["instances[]","title"],r);const c=u(i,["outputDimensionality"]);t!==void 0&&c!=null&&d(t,["parameters","outputDimensionality"],c);const h=u(i,["mimeType"]);t!==void 0&&h!=null&&d(t,["instances[]","mimeType"],h);const m=u(i,["autoTruncate"]);return t!==void 0&&m!=null&&d(t,["parameters","autoTruncate"],m),l}function rE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let m=Cc(i,r);Array.isArray(m)&&(m=m.map(y=>y)),d(l,["requests[]","content"],m)}const c=u(t,["config"]);c!=null&&oE(c,l);const h=u(t,["model"]);return h!==void 0&&d(l,["requests[]","model"],Ge(i,h)),l}function uE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let h=Cc(i,r);Array.isArray(h)&&(h=h.map(m=>m)),d(l,["instances[]","content"],h)}const c=u(t,["config"]);return c!=null&&aE(c,l),l}function cE(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["embeddings"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["embeddings"],c)}const r=u(i,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function dE(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["predictions[]","embeddings"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>OT(h))),d(t,["embeddings"],c)}const r=u(i,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function fE(i){const t={},l=u(i,["endpoint"]);l!=null&&d(t,["name"],l);const o=u(i,["deployedModelId"]);return o!=null&&d(t,["deployedModelId"],o),t}function pE(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&d(t,["fileUri"],l);const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function hE(i){const t={};if(u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=u(i,["description"]);l!=null&&d(t,["description"],l);const o=u(i,["name"]);o!=null&&d(t,["name"],o);const r=u(i,["parameters"]);r!=null&&d(t,["parameters"],r);const c=u(i,["parametersJsonSchema"]);c!=null&&d(t,["parametersJsonSchema"],c);const h=u(i,["response"]);h!=null&&d(t,["response"],h);const m=u(i,["responseJsonSchema"]);return m!=null&&d(t,["responseJsonSchema"],m),t}function mE(i,t,l){const o={},r=u(t,["systemInstruction"]);l!==void 0&&r!=null&&d(l,["systemInstruction"],Aa(Et(r)));const c=u(t,["temperature"]);c!=null&&d(o,["temperature"],c);const h=u(t,["topP"]);h!=null&&d(o,["topP"],h);const m=u(t,["topK"]);m!=null&&d(o,["topK"],m);const y=u(t,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const p=u(t,["maxOutputTokens"]);p!=null&&d(o,["maxOutputTokens"],p);const x=u(t,["stopSequences"]);x!=null&&d(o,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&d(o,["responseLogprobs"],S);const E=u(t,["logprobs"]);E!=null&&d(o,["logprobs"],E);const A=u(t,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const D=u(t,["frequencyPenalty"]);D!=null&&d(o,["frequencyPenalty"],D);const N=u(t,["seed"]);N!=null&&d(o,["seed"],N);const R=u(t,["responseMimeType"]);R!=null&&d(o,["responseMimeType"],R);const I=u(t,["responseSchema"]);I!=null&&d(o,["responseSchema"],Ac(I));const H=u(t,["responseJsonSchema"]);if(H!=null&&d(o,["responseJsonSchema"],H),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const V=u(t,["safetySettings"]);if(l!==void 0&&V!=null){let me=V;Array.isArray(me)&&(me=me.map(Ie=>iC(Ie))),d(l,["safetySettings"],me)}const B=u(t,["tools"]);if(l!==void 0&&B!=null){let me=kl(B);Array.isArray(me)&&(me=me.map(Ie=>uC(Dl(Ie)))),d(l,["tools"],me)}const Y=u(t,["toolConfig"]);if(l!==void 0&&Y!=null&&d(l,["toolConfig"],Y),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=u(t,["cachedContent"]);l!==void 0&&ee!=null&&d(l,["cachedContent"],Hn(i,ee));const ne=u(t,["responseModalities"]);ne!=null&&d(o,["responseModalities"],ne);const he=u(t,["mediaResolution"]);he!=null&&d(o,["mediaResolution"],he);const ae=u(t,["speechConfig"]);if(ae!=null&&d(o,["speechConfig"],_c(ae)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const te=u(t,["thinkingConfig"]);te!=null&&d(o,["thinkingConfig"],te);const re=u(t,["imageConfig"]);return re!=null&&d(o,["imageConfig"],re),o}function gE(i,t,l){const o={},r=u(t,["systemInstruction"]);l!==void 0&&r!=null&&d(l,["systemInstruction"],Et(r));const c=u(t,["temperature"]);c!=null&&d(o,["temperature"],c);const h=u(t,["topP"]);h!=null&&d(o,["topP"],h);const m=u(t,["topK"]);m!=null&&d(o,["topK"],m);const y=u(t,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const p=u(t,["maxOutputTokens"]);p!=null&&d(o,["maxOutputTokens"],p);const x=u(t,["stopSequences"]);x!=null&&d(o,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&d(o,["responseLogprobs"],S);const E=u(t,["logprobs"]);E!=null&&d(o,["logprobs"],E);const A=u(t,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const D=u(t,["frequencyPenalty"]);D!=null&&d(o,["frequencyPenalty"],D);const N=u(t,["seed"]);N!=null&&d(o,["seed"],N);const R=u(t,["responseMimeType"]);R!=null&&d(o,["responseMimeType"],R);const I=u(t,["responseSchema"]);I!=null&&d(o,["responseSchema"],Ac(I));const H=u(t,["responseJsonSchema"]);H!=null&&d(o,["responseJsonSchema"],H);const V=u(t,["routingConfig"]);V!=null&&d(o,["routingConfig"],V);const B=u(t,["modelSelectionConfig"]);B!=null&&d(o,["modelConfig"],B);const Y=u(t,["safetySettings"]);if(l!==void 0&&Y!=null){let U=Y;Array.isArray(U)&&(U=U.map(Z=>Z)),d(l,["safetySettings"],U)}const ee=u(t,["tools"]);if(l!==void 0&&ee!=null){let U=kl(ee);Array.isArray(U)&&(U=U.map(Z=>Kg(Dl(Z)))),d(l,["tools"],U)}const ne=u(t,["toolConfig"]);l!==void 0&&ne!=null&&d(l,["toolConfig"],ne);const he=u(t,["labels"]);l!==void 0&&he!=null&&d(l,["labels"],he);const ae=u(t,["cachedContent"]);l!==void 0&&ae!=null&&d(l,["cachedContent"],Hn(i,ae));const te=u(t,["responseModalities"]);te!=null&&d(o,["responseModalities"],te);const re=u(t,["mediaResolution"]);re!=null&&d(o,["mediaResolution"],re);const me=u(t,["speechConfig"]);me!=null&&d(o,["speechConfig"],Xg(_c(me)));const Ie=u(t,["audioTimestamp"]);Ie!=null&&d(o,["audioTimestamp"],Ie);const ie=u(t,["thinkingConfig"]);ie!=null&&d(o,["thinkingConfig"],ie);const ce=u(t,["imageConfig"]);return ce!=null&&d(o,["imageConfig"],ce),o}function jm(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let h=en(r);Array.isArray(h)&&(h=h.map(m=>Aa(m))),d(l,["contents"],h)}const c=u(t,["config"]);return c!=null&&d(l,["generationConfig"],mE(i,c,l)),l}function Zm(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["contents"]);if(r!=null){let h=en(r);Array.isArray(h)&&(h=h.map(m=>m)),d(l,["contents"],h)}const c=u(t,["config"]);return c!=null&&d(l,["generationConfig"],gE(i,c,l)),l}function Wm(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(p=>GT(p))),d(t,["candidates"],y)}const r=u(i,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const c=u(i,["promptFeedback"]);c!=null&&d(t,["promptFeedback"],c);const h=u(i,["responseId"]);h!=null&&d(t,["responseId"],h);const m=u(i,["usageMetadata"]);return m!=null&&d(t,["usageMetadata"],m),t}function eg(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(x=>x)),d(t,["candidates"],p)}const r=u(i,["createTime"]);r!=null&&d(t,["createTime"],r);const c=u(i,["modelVersion"]);c!=null&&d(t,["modelVersion"],c);const h=u(i,["promptFeedback"]);h!=null&&d(t,["promptFeedback"],h);const m=u(i,["responseId"]);m!=null&&d(t,["responseId"],m);const y=u(i,["usageMetadata"]);return y!=null&&d(t,["usageMetadata"],y),t}function yE(i,t){const l={};if(u(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=u(i,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const r=u(i,["aspectRatio"]);t!==void 0&&r!=null&&d(t,["parameters","aspectRatio"],r);const c=u(i,["guidanceScale"]);if(t!==void 0&&c!=null&&d(t,["parameters","guidanceScale"],c),u(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=u(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&d(t,["parameters","safetySetting"],h);const m=u(i,["personGeneration"]);t!==void 0&&m!=null&&d(t,["parameters","personGeneration"],m);const y=u(i,["includeSafetyAttributes"]);t!==void 0&&y!=null&&d(t,["parameters","includeSafetyAttributes"],y);const p=u(i,["includeRaiReason"]);t!==void 0&&p!=null&&d(t,["parameters","includeRaiReason"],p);const x=u(i,["language"]);t!==void 0&&x!=null&&d(t,["parameters","language"],x);const S=u(i,["outputMimeType"]);t!==void 0&&S!=null&&d(t,["parameters","outputOptions","mimeType"],S);const E=u(i,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&d(t,["parameters","outputOptions","compressionQuality"],E),u(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=u(i,["imageSize"]);if(t!==void 0&&A!=null&&d(t,["parameters","sampleImageSize"],A),u(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return l}function vE(i,t){const l={},o=u(i,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const r=u(i,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const c=u(i,["numberOfImages"]);t!==void 0&&c!=null&&d(t,["parameters","sampleCount"],c);const h=u(i,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const m=u(i,["guidanceScale"]);t!==void 0&&m!=null&&d(t,["parameters","guidanceScale"],m);const y=u(i,["seed"]);t!==void 0&&y!=null&&d(t,["parameters","seed"],y);const p=u(i,["safetyFilterLevel"]);t!==void 0&&p!=null&&d(t,["parameters","safetySetting"],p);const x=u(i,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const S=u(i,["includeSafetyAttributes"]);t!==void 0&&S!=null&&d(t,["parameters","includeSafetyAttributes"],S);const E=u(i,["includeRaiReason"]);t!==void 0&&E!=null&&d(t,["parameters","includeRaiReason"],E);const A=u(i,["language"]);t!==void 0&&A!=null&&d(t,["parameters","language"],A);const D=u(i,["outputMimeType"]);t!==void 0&&D!=null&&d(t,["parameters","outputOptions","mimeType"],D);const N=u(i,["outputCompressionQuality"]);t!==void 0&&N!=null&&d(t,["parameters","outputOptions","compressionQuality"],N);const R=u(i,["addWatermark"]);t!==void 0&&R!=null&&d(t,["parameters","addWatermark"],R);const I=u(i,["labels"]);t!==void 0&&I!=null&&d(t,["labels"],I);const H=u(i,["imageSize"]);t!==void 0&&H!=null&&d(t,["parameters","sampleImageSize"],H);const V=u(i,["enhancePrompt"]);return t!==void 0&&V!=null&&d(t,["parameters","enhancePrompt"],V),l}function xE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["prompt"]);r!=null&&d(l,["instances[0]","prompt"],r);const c=u(t,["config"]);return c!=null&&yE(c,l),l}function SE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["prompt"]);r!=null&&d(l,["instances[0]","prompt"],r);const c=u(t,["config"]);return c!=null&&vE(c,l),l}function TE(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["predictions"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>kE(h))),d(t,["generatedImages"],c)}const r=u(i,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],$g(r)),t}function EE(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["predictions"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>_a(h))),d(t,["generatedImages"],c)}const r=u(i,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],Jg(r)),t}function CE(i,t){const l={},o=u(i,["numberOfVideos"]);if(t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o),u(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(i,["durationSeconds"]);if(t!==void 0&&r!=null&&d(t,["parameters","durationSeconds"],r),u(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(i,["aspectRatio"]);t!==void 0&&c!=null&&d(t,["parameters","aspectRatio"],c);const h=u(i,["resolution"]);t!==void 0&&h!=null&&d(t,["parameters","resolution"],h);const m=u(i,["personGeneration"]);if(t!==void 0&&m!=null&&d(t,["parameters","personGeneration"],m),u(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=u(i,["negativePrompt"]);t!==void 0&&y!=null&&d(t,["parameters","negativePrompt"],y);const p=u(i,["enhancePrompt"]);if(t!==void 0&&p!=null&&d(t,["parameters","enhancePrompt"],p),u(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=u(i,["lastFrame"]);t!==void 0&&x!=null&&d(t,["instances[0]","lastFrame"],Na(x));const S=u(i,["referenceImages"]);if(t!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(A=>EC(A))),d(t,["instances[0]","referenceImages"],E)}if(u(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return l}function AE(i,t){const l={},o=u(i,["numberOfVideos"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const r=u(i,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const c=u(i,["fps"]);t!==void 0&&c!=null&&d(t,["parameters","fps"],c);const h=u(i,["durationSeconds"]);t!==void 0&&h!=null&&d(t,["parameters","durationSeconds"],h);const m=u(i,["seed"]);t!==void 0&&m!=null&&d(t,["parameters","seed"],m);const y=u(i,["aspectRatio"]);t!==void 0&&y!=null&&d(t,["parameters","aspectRatio"],y);const p=u(i,["resolution"]);t!==void 0&&p!=null&&d(t,["parameters","resolution"],p);const x=u(i,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const S=u(i,["pubsubTopic"]);t!==void 0&&S!=null&&d(t,["parameters","pubsubTopic"],S);const E=u(i,["negativePrompt"]);t!==void 0&&E!=null&&d(t,["parameters","negativePrompt"],E);const A=u(i,["enhancePrompt"]);t!==void 0&&A!=null&&d(t,["parameters","enhancePrompt"],A);const D=u(i,["generateAudio"]);t!==void 0&&D!=null&&d(t,["parameters","generateAudio"],D);const N=u(i,["lastFrame"]);t!==void 0&&N!=null&&d(t,["instances[0]","lastFrame"],an(N));const R=u(i,["referenceImages"]);if(t!==void 0&&R!=null){let V=R;Array.isArray(V)&&(V=V.map(B=>CC(B))),d(t,["instances[0]","referenceImages"],V)}const I=u(i,["mask"]);t!==void 0&&I!=null&&d(t,["instances[0]","mask"],TC(I));const H=u(i,["compressionQuality"]);return t!==void 0&&H!=null&&d(t,["parameters","compressionQuality"],H),l}function _E(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata"]);o!=null&&d(t,["metadata"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],RE(h)),t}function NE(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata"]);o!=null&&d(t,["metadata"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["response"]);return h!=null&&d(t,["response"],ME(h)),t}function wE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["prompt"]);r!=null&&d(l,["instances[0]","prompt"],r);const c=u(t,["image"]);c!=null&&d(l,["instances[0]","image"],Na(c));const h=u(t,["video"]);h!=null&&d(l,["instances[0]","video"],Qg(h));const m=u(t,["source"]);m!=null&&IE(m,l);const y=u(t,["config"]);return y!=null&&CE(y,l),l}function bE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["prompt"]);r!=null&&d(l,["instances[0]","prompt"],r);const c=u(t,["image"]);c!=null&&d(l,["instances[0]","image"],an(c));const h=u(t,["video"]);h!=null&&d(l,["instances[0]","video"],jg(h));const m=u(t,["source"]);m!=null&&DE(m,l);const y=u(t,["config"]);return y!=null&&AE(y,l),l}function RE(i){const t={},l=u(i,["generatedSamples"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>LE(h))),d(t,["generatedVideos"],c)}const o=u(i,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function ME(i){const t={},l=u(i,["videos"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>zE(h))),d(t,["generatedVideos"],c)}const o=u(i,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function IE(i,t){const l={},o=u(i,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=u(i,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],Na(r));const c=u(i,["video"]);return t!==void 0&&c!=null&&d(t,["instances[0]","video"],Qg(c)),l}function DE(i,t){const l={},o=u(i,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=u(i,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],an(r));const c=u(i,["video"]);return t!==void 0&&c!=null&&d(t,["instances[0]","video"],jg(c)),l}function kE(i){const t={},l=u(i,["_self"]);l!=null&&d(t,["image"],BE(l));const o=u(i,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);const r=u(i,["_self"]);return r!=null&&d(t,["safetyAttributes"],$g(r)),t}function _a(i){const t={},l=u(i,["_self"]);l!=null&&d(t,["image"],Yg(l));const o=u(i,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);const r=u(i,["_self"]);r!=null&&d(t,["safetyAttributes"],Jg(r));const c=u(i,["prompt"]);return c!=null&&d(t,["enhancedPrompt"],c),t}function UE(i){const t={},l=u(i,["_self"]);l!=null&&d(t,["mask"],Yg(l));const o=u(i,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),d(t,["labels"],r)}return t}function LE(i){const t={},l=u(i,["video"]);return l!=null&&d(t,["video"],xC(l)),t}function zE(i){const t={},l=u(i,["_self"]);return l!=null&&d(t,["video"],SC(l)),t}function PE(i){const t={},l=u(i,["modelSelectionConfig"]);l!=null&&d(t,["modelConfig"],l);const o=u(i,["responseJsonSchema"]);o!=null&&d(t,["responseJsonSchema"],o);const r=u(i,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const c=u(i,["candidateCount"]);c!=null&&d(t,["candidateCount"],c);const h=u(i,["enableAffectiveDialog"]);h!=null&&d(t,["enableAffectiveDialog"],h);const m=u(i,["frequencyPenalty"]);m!=null&&d(t,["frequencyPenalty"],m);const y=u(i,["logprobs"]);y!=null&&d(t,["logprobs"],y);const p=u(i,["maxOutputTokens"]);p!=null&&d(t,["maxOutputTokens"],p);const x=u(i,["mediaResolution"]);x!=null&&d(t,["mediaResolution"],x);const S=u(i,["presencePenalty"]);S!=null&&d(t,["presencePenalty"],S);const E=u(i,["responseLogprobs"]);E!=null&&d(t,["responseLogprobs"],E);const A=u(i,["responseMimeType"]);A!=null&&d(t,["responseMimeType"],A);const D=u(i,["responseModalities"]);D!=null&&d(t,["responseModalities"],D);const N=u(i,["responseSchema"]);N!=null&&d(t,["responseSchema"],N);const R=u(i,["routingConfig"]);R!=null&&d(t,["routingConfig"],R);const I=u(i,["seed"]);I!=null&&d(t,["seed"],I);const H=u(i,["speechConfig"]);H!=null&&d(t,["speechConfig"],Xg(H));const V=u(i,["stopSequences"]);V!=null&&d(t,["stopSequences"],V);const B=u(i,["temperature"]);B!=null&&d(t,["temperature"],B);const Y=u(i,["thinkingConfig"]);Y!=null&&d(t,["thinkingConfig"],Y);const ee=u(i,["topK"]);ee!=null&&d(t,["topK"],ee);const ne=u(i,["topP"]);if(ne!=null&&d(t,["topP"],ne),u(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function qE(i,t){const l={},o=u(t,["model"]);return o!=null&&d(l,["_url","name"],Ge(i,o)),l}function HE(i,t){const l={},o=u(t,["model"]);return o!=null&&d(l,["_url","name"],Ge(i,o)),l}function GE(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&d(t,["enableWidget"],l),t}function VE(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=u(i,["timeRangeFilter"]);return l!=null&&d(t,["timeRangeFilter"],l),t}function BE(i){const t={},l=u(i,["bytesBase64Encoded"]);l!=null&&d(t,["imageBytes"],fi(l));const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Yg(i){const t={},l=u(i,["gcsUri"]);l!=null&&d(t,["gcsUri"],l);const o=u(i,["bytesBase64Encoded"]);o!=null&&d(t,["imageBytes"],fi(o));const r=u(i,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Na(i){const t={};if(u(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const l=u(i,["imageBytes"]);l!=null&&d(t,["bytesBase64Encoded"],fi(l));const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function an(i){const t={},l=u(i,["gcsUri"]);l!=null&&d(t,["gcsUri"],l);const o=u(i,["imageBytes"]);o!=null&&d(t,["bytesBase64Encoded"],fi(o));const r=u(i,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function FE(i,t,l){const o={},r=u(t,["pageSize"]);l!==void 0&&r!=null&&d(l,["_query","pageSize"],r);const c=u(t,["pageToken"]);l!==void 0&&c!=null&&d(l,["_query","pageToken"],c);const h=u(t,["filter"]);l!==void 0&&h!=null&&d(l,["_query","filter"],h);const m=u(t,["queryBase"]);return l!==void 0&&m!=null&&d(l,["_url","models_url"],Pg(i,m)),o}function OE(i,t,l){const o={},r=u(t,["pageSize"]);l!==void 0&&r!=null&&d(l,["_query","pageSize"],r);const c=u(t,["pageToken"]);l!==void 0&&c!=null&&d(l,["_query","pageToken"],c);const h=u(t,["filter"]);l!==void 0&&h!=null&&d(l,["_query","filter"],h);const m=u(t,["queryBase"]);return l!==void 0&&m!=null&&d(l,["_url","models_url"],Pg(i,m)),o}function YE(i,t){const l={},o=u(t,["config"]);return o!=null&&FE(i,o,l),l}function $E(i,t){const l={},o=u(t,["config"]);return o!=null&&OE(i,o,l),l}function JE(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["_self"]);if(r!=null){let c=qg(r);Array.isArray(c)&&(c=c.map(h=>cc(h))),d(t,["models"],c)}return t}function XE(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["_self"]);if(r!=null){let c=qg(r);Array.isArray(c)&&(c=c.map(h=>dc(h))),d(t,["models"],c)}return t}function KE(i){const t={},l=u(i,["maskMode"]);l!=null&&d(t,["maskMode"],l);const o=u(i,["segmentationClasses"]);o!=null&&d(t,["maskClasses"],o);const r=u(i,["maskDilation"]);return r!=null&&d(t,["dilation"],r),t}function cc(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["displayName"]);o!=null&&d(t,["displayName"],o);const r=u(i,["description"]);r!=null&&d(t,["description"],r);const c=u(i,["version"]);c!=null&&d(t,["version"],c);const h=u(i,["_self"]);h!=null&&d(t,["tunedModelInfo"],cC(h));const m=u(i,["inputTokenLimit"]);m!=null&&d(t,["inputTokenLimit"],m);const y=u(i,["outputTokenLimit"]);y!=null&&d(t,["outputTokenLimit"],y);const p=u(i,["supportedGenerationMethods"]);return p!=null&&d(t,["supportedActions"],p),t}function dc(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["displayName"]);o!=null&&d(t,["displayName"],o);const r=u(i,["description"]);r!=null&&d(t,["description"],r);const c=u(i,["versionId"]);c!=null&&d(t,["version"],c);const h=u(i,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(E=>fE(E))),d(t,["endpoints"],S)}const m=u(i,["labels"]);m!=null&&d(t,["labels"],m);const y=u(i,["_self"]);y!=null&&d(t,["tunedModelInfo"],dC(y));const p=u(i,["defaultCheckpointId"]);p!=null&&d(t,["defaultCheckpointId"],p);const x=u(i,["checkpoints"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(E=>E)),d(t,["checkpoints"],S)}return t}function QE(i){const t={},l=u(i,["functionCall"]);l!=null&&d(t,["functionCall"],l);const o=u(i,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=u(i,["executableCode"]);r!=null&&d(t,["executableCode"],r);const c=u(i,["fileData"]);c!=null&&d(t,["fileData"],pE(c));const h=u(i,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const m=u(i,["inlineData"]);m!=null&&d(t,["inlineData"],HT(m));const y=u(i,["text"]);y!=null&&d(t,["text"],y);const p=u(i,["thought"]);p!=null&&d(t,["thought"],p);const x=u(i,["thoughtSignature"]);x!=null&&d(t,["thoughtSignature"],x);const S=u(i,["videoMetadata"]);return S!=null&&d(t,["videoMetadata"],S),t}function jE(i){const t={},l=u(i,["productImage"]);return l!=null&&d(t,["image"],an(l)),t}function ZE(i,t){const l={},o=u(i,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const r=u(i,["baseSteps"]);t!==void 0&&r!=null&&d(t,["parameters","editConfig","baseSteps"],r);const c=u(i,["outputGcsUri"]);t!==void 0&&c!=null&&d(t,["parameters","storageUri"],c);const h=u(i,["seed"]);t!==void 0&&h!=null&&d(t,["parameters","seed"],h);const m=u(i,["safetyFilterLevel"]);t!==void 0&&m!=null&&d(t,["parameters","safetySetting"],m);const y=u(i,["personGeneration"]);t!==void 0&&y!=null&&d(t,["parameters","personGeneration"],y);const p=u(i,["addWatermark"]);t!==void 0&&p!=null&&d(t,["parameters","addWatermark"],p);const x=u(i,["outputMimeType"]);t!==void 0&&x!=null&&d(t,["parameters","outputOptions","mimeType"],x);const S=u(i,["outputCompressionQuality"]);t!==void 0&&S!=null&&d(t,["parameters","outputOptions","compressionQuality"],S);const E=u(i,["enhancePrompt"]);t!==void 0&&E!=null&&d(t,["parameters","enhancePrompt"],E);const A=u(i,["labels"]);return t!==void 0&&A!=null&&d(t,["labels"],A),l}function WE(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["source"]);r!=null&&tC(r,l);const c=u(t,["config"]);return c!=null&&ZE(c,l),l}function eC(i){const t={},l=u(i,["predictions"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>_a(r))),d(t,["generatedImages"],o)}return t}function tC(i,t){const l={},o=u(i,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=u(i,["personImage"]);t!==void 0&&r!=null&&d(t,["instances[0]","personImage","image"],an(r));const c=u(i,["productImages"]);if(t!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>jE(m))),d(t,["instances[0]","productImages"],h)}return l}function nC(i){const t={},l=u(i,["referenceImage"]);l!=null&&d(t,["referenceImage"],an(l));const o=u(i,["referenceId"]);o!=null&&d(t,["referenceId"],o);const r=u(i,["referenceType"]);r!=null&&d(t,["referenceType"],r);const c=u(i,["maskImageConfig"]);c!=null&&d(t,["maskImageConfig"],KE(c));const h=u(i,["controlImageConfig"]);h!=null&&d(t,["controlImageConfig"],$T(h));const m=u(i,["styleImageConfig"]);m!=null&&d(t,["styleImageConfig"],m);const y=u(i,["subjectImageConfig"]);return y!=null&&d(t,["subjectImageConfig"],y),t}function $g(i){const t={},l=u(i,["safetyAttributes","categories"]);l!=null&&d(t,["categories"],l);const o=u(i,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);const r=u(i,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function Jg(i){const t={},l=u(i,["safetyAttributes","categories"]);l!=null&&d(t,["categories"],l);const o=u(i,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);const r=u(i,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function iC(i){const t={},l=u(i,["category"]);if(l!=null&&d(t,["category"],l),u(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=u(i,["threshold"]);return o!=null&&d(t,["threshold"],o),t}function lC(i){const t={},l=u(i,["image"]);return l!=null&&d(t,["image"],an(l)),t}function sC(i,t){const l={},o=u(i,["mode"]);t!==void 0&&o!=null&&d(t,["parameters","mode"],o);const r=u(i,["maxPredictions"]);t!==void 0&&r!=null&&d(t,["parameters","maxPredictions"],r);const c=u(i,["confidenceThreshold"]);t!==void 0&&c!=null&&d(t,["parameters","confidenceThreshold"],c);const h=u(i,["maskDilation"]);t!==void 0&&h!=null&&d(t,["parameters","maskDilation"],h);const m=u(i,["binaryColorThreshold"]);t!==void 0&&m!=null&&d(t,["parameters","binaryColorThreshold"],m);const y=u(i,["labels"]);return t!==void 0&&y!=null&&d(t,["labels"],y),l}function oC(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["source"]);r!=null&&rC(r,l);const c=u(t,["config"]);return c!=null&&sC(c,l),l}function aC(i){const t={},l=u(i,["predictions"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>UE(r))),d(t,["generatedMasks"],o)}return t}function rC(i,t){const l={},o=u(i,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const r=u(i,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],an(r));const c=u(i,["scribbleImage"]);return t!==void 0&&c!=null&&d(t,["instances[0]","scribble"],lC(c)),l}function Xg(i){const t={},l=u(i,["languageCode"]);l!=null&&d(t,["languageCode"],l);const o=u(i,["voiceConfig"]);if(o!=null&&d(t,["voiceConfig"],o),u(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function uC(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>S)),d(t,["functionDeclarations"],x)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=u(i,["computerUse"]);r!=null&&d(t,["computerUse"],r);const c=u(i,["fileSearch"]);c!=null&&d(t,["fileSearch"],c);const h=u(i,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=u(i,["googleMaps"]);m!=null&&d(t,["googleMaps"],GE(m));const y=u(i,["googleSearch"]);y!=null&&d(t,["googleSearch"],VE(y));const p=u(i,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function Kg(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let S=l;Array.isArray(S)&&(S=S.map(E=>hE(E))),d(t,["functionDeclarations"],S)}const o=u(i,["retrieval"]);o!=null&&d(t,["retrieval"],o);const r=u(i,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const c=u(i,["computerUse"]);if(c!=null&&d(t,["computerUse"],c),u(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(i,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const m=u(i,["enterpriseWebSearch"]);m!=null&&d(t,["enterpriseWebSearch"],m);const y=u(i,["googleMaps"]);y!=null&&d(t,["googleMaps"],y);const p=u(i,["googleSearch"]);p!=null&&d(t,["googleSearch"],p);const x=u(i,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function cC(i){const t={},l=u(i,["baseModel"]);l!=null&&d(t,["baseModel"],l);const o=u(i,["createTime"]);o!=null&&d(t,["createTime"],o);const r=u(i,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function dC(i){const t={},l=u(i,["labels","google-vertex-llm-tuning-base-model-id"]);l!=null&&d(t,["baseModel"],l);const o=u(i,["createTime"]);o!=null&&d(t,["createTime"],o);const r=u(i,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function fC(i,t){const l={},o=u(i,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const r=u(i,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const c=u(i,["defaultCheckpointId"]);return t!==void 0&&c!=null&&d(t,["defaultCheckpointId"],c),l}function pC(i,t){const l={},o=u(i,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const r=u(i,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const c=u(i,["defaultCheckpointId"]);return t!==void 0&&c!=null&&d(t,["defaultCheckpointId"],c),l}function hC(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","name"],Ge(i,o));const r=u(t,["config"]);return r!=null&&fC(r,l),l}function mC(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["config"]);return r!=null&&pC(r,l),l}function gC(i,t){const l={},o=u(i,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const r=u(i,["safetyFilterLevel"]);t!==void 0&&r!=null&&d(t,["parameters","safetySetting"],r);const c=u(i,["personGeneration"]);t!==void 0&&c!=null&&d(t,["parameters","personGeneration"],c);const h=u(i,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const m=u(i,["outputMimeType"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","mimeType"],m);const y=u(i,["outputCompressionQuality"]);t!==void 0&&y!=null&&d(t,["parameters","outputOptions","compressionQuality"],y);const p=u(i,["enhanceInputImage"]);t!==void 0&&p!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],p);const x=u(i,["imagePreservationFactor"]);t!==void 0&&x!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const S=u(i,["labels"]);t!==void 0&&S!=null&&d(t,["labels"],S);const E=u(i,["numberOfImages"]);t!==void 0&&E!=null&&d(t,["parameters","sampleCount"],E);const A=u(i,["mode"]);return t!==void 0&&A!=null&&d(t,["parameters","mode"],A),l}function yC(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["_url","model"],Ge(i,o));const r=u(t,["image"]);r!=null&&d(l,["instances[0]","image"],an(r));const c=u(t,["upscaleFactor"]);c!=null&&d(l,["parameters","upscaleConfig","upscaleFactor"],c);const h=u(t,["config"]);return h!=null&&gC(h,l),l}function vC(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>_a(c))),d(t,["generatedImages"],r)}return t}function xC(i){const t={},l=u(i,["uri"]);l!=null&&d(t,["uri"],l);const o=u(i,["encodedVideo"]);o!=null&&d(t,["videoBytes"],fi(o));const r=u(i,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function SC(i){const t={},l=u(i,["gcsUri"]);l!=null&&d(t,["uri"],l);const o=u(i,["bytesBase64Encoded"]);o!=null&&d(t,["videoBytes"],fi(o));const r=u(i,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function TC(i){const t={},l=u(i,["image"]);l!=null&&d(t,["_self"],an(l));const o=u(i,["maskMode"]);return o!=null&&d(t,["maskMode"],o),t}function EC(i){const t={},l=u(i,["image"]);l!=null&&d(t,["image"],Na(l));const o=u(i,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function CC(i){const t={},l=u(i,["image"]);l!=null&&d(t,["image"],an(l));const o=u(i,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function Qg(i){const t={},l=u(i,["uri"]);l!=null&&d(t,["uri"],l);const o=u(i,["videoBytes"]);o!=null&&d(t,["encodedVideo"],fi(o));const r=u(i,["mimeType"]);return r!=null&&d(t,["encoding"],r),t}function jg(i){const t={},l=u(i,["uri"]);l!=null&&d(t,["gcsUri"],l);const o=u(i,["videoBytes"]);o!=null&&d(t,["bytesBase64Encoded"],fi(o));const r=u(i,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AC="Content-Type",_C="X-Server-Timeout",NC="User-Agent",fc="x-goog-api-client",wC="1.29.0",bC=`google-genai-sdk/${wC}`,RC="v1beta1",MC="v1beta",tg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class IC{constructor(t){var l,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:RC,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:MC,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),l=new URL(t);return l.protocol=l.protocol=="http:"?"ws":"wss",l.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,l,o){const r=[this.getRequestUrlInternal(l)];return o&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,l,o);if(t.queryParams)for(const[h,m]of Object.entries(t.queryParams))r.searchParams.append(h,String(m));let c={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=t.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,l,r.toString(),t.abortSignal),this.unaryApiCall(r,c,t.httpMethod)}patchHttpOptions(t,l){const o=JSON.parse(JSON.stringify(t));for(const[r,c]of Object.entries(l))typeof c=="object"?o[r]=Object.assign(Object.assign({},o[r]),c):c!==void 0&&(o[r]=c);return o}async requestStream(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,l,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let c={};return c.body=t.body,c=await this.includeExtraHttpOptionsToRequestInit(c,l,r.toString(),t.abortSignal),this.streamApiCall(r,c,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,l,o,r){if(l&&l.timeout||r){const c=new AbortController,h=c.signal;if(l.timeout&&(l==null?void 0:l.timeout)>0){const m=setTimeout(()=>c.abort(),l.timeout);m&&typeof m.unref=="function"&&m.unref()}r&&r.addEventListener("abort",()=>{c.abort()}),t.signal=h}return l&&l.extraBody!==null&&DC(t,l.extraBody),t.headers=await this.getHeadersInternal(l,o),t}async unaryApiCall(t,l,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:o})).then(async r=>(await ng(r),new ac(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,l,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:o})).then(async r=>(await ng(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){var l;return Nl(this,arguments,function*(){const r=(l=t==null?void 0:t.body)===null||l===void 0?void 0:l.getReader(),c=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";for(;;){const{done:m,value:y}=yield et(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=c.decode(y,{stream:!0});try{const S=JSON.parse(p);if("error"in S){const E=JSON.parse(JSON.stringify(S.error)),A=E.status,D=E.code,N=`got status: ${A}. ${JSON.stringify(S)}`;if(D>=400&&D<600)throw new Ca({message:N,status:D})}}catch(S){if(S.name==="ApiError")throw S}h+=p;let x=h.match(tg);for(;x;){const S=x[1];try{const E=new Response(S,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield et(new ac(E)),h=h.slice(x[0].length),x=h.match(tg)}catch(E){throw new Error(`exception parsing stream chunk ${S}. ${E}`)}}}}finally{r.releaseLock()}})}async apiCall(t,l){return fetch(t,l).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},l=bC+" "+this.clientOptions.userAgentExtra;return t[NC]=l,t[fc]=l,t[AC]="application/json",t}async getHeadersInternal(t,l){const o=new Headers;if(t&&t.headers){for(const[r,c]of Object.entries(t.headers))o.append(r,c);t.timeout&&t.timeout>0&&o.append(_C,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,l),o}getFileName(t){var l;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(l=o.split(/[/\\]/).pop())!==null&&l!==void 0?l:""),o}async uploadFile(t,l){var o;const r={};l!=null&&(r.mimeType=l.mimeType,r.name=l.name,r.displayName=l.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const c=this.clientOptions.uploader,h=await c.stat(t);r.sizeBytes=String(h.size);const m=(o=l==null?void 0:l.mimeType)!==null&&o!==void 0?o:h.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=m;const y={file:r},p=this.getFileName(t),x=oe("upload/v1beta/files",y._url),S=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,p,y,l==null?void 0:l.httpOptions);return c.upload(t,S,this)}async uploadFileToFileSearchStore(t,l,o){var r;const c=this.clientOptions.uploader,h=await c.stat(l),m=String(h.size),y=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(l),S={};o!=null&&o.customMetadata&&(S.customMetadata=o.customMetadata),o!=null&&o.chunkingConfig&&(S.chunkingConfig=o.chunkingConfig);const E=await this.fetchUploadUrl(p,m,y,x,S,o==null?void 0:o.httpOptions);return c.uploadToFileSearchStore(l,E,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,l,o,r,c,h){var m;let y={};h?y=h:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${l}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:t,body:JSON.stringify(c),httpMethod:"POST",httpOptions:y});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(m=p==null?void 0:p.headers)===null||m===void 0?void 0:m["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function ng(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const l=i.status;let o;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(o);throw l>=400&&l<600?new Ca({message:r,status:l}):new Error(r)}}function DC(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let l={};if(typeof i.body=="string"&&i.body.length>0)try{const c=JSON.parse(i.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))l=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(c,h){const m=Object.assign({},c);for(const y in h)if(Object.prototype.hasOwnProperty.call(h,y)){const p=h[y],x=m[y];p&&typeof p=="object"&&!Array.isArray(p)&&x&&typeof x=="object"&&!Array.isArray(x)?m[y]=o(x,p):(x&&p&&typeof x!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof x}, New type: ${typeof p}. Overwriting.`),m[y]=p)}return m}const r=o(l,t);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kC="mcp_used/unknown";let UC=!1;function Zg(i){for(const t of i)if(LC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return UC}function Wg(i){var t;const l=(t=i[fc])!==null&&t!==void 0?t:"";i[fc]=(l+` ${kC}`).trimStart()}function LC(i){return i!==null&&typeof i=="object"&&i instanceof wc}function zC(i,t=100){return Nl(this,arguments,function*(){let o,r=0;for(;r<t;){const c=yield et(i.listTools({cursor:o}));for(const h of c.tools)yield yield et(h),r++;if(!c.nextCursor)break;o=c.nextCursor}})}class wc{constructor(t=[],l){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=l}static create(t,l){return new wc(t,l)}async initialize(){var t,l,o,r;if(this.mcpTools.length>0)return;const c={},h=[];for(const x of this.mcpClients)try{for(var m=!0,y=(l=void 0,Vs(zC(x))),p;p=await y.next(),t=p.done,!t;m=!0){r=p.value,m=!1;const S=r;h.push(S);const E=S.name;if(c[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);c[E]=x}}catch(S){l={error:S}}finally{try{!m&&!t&&(o=y.return)&&await o.call(y)}finally{if(l)throw l.error}}this.mcpTools=h,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),Vx(this.mcpTools,this.config)}async callTool(t){await this.initialize();const l=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const h=await r.callTool({name:o.name,arguments:o.args},void 0,c);l.push({functionResponse:{name:o.name,response:h.isError?{error:h}:h}})}return l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function PC(i,t,l){const o=new kx;let r;l.data instanceof Blob?r=JSON.parse(await l.data.text()):r=JSON.parse(l.data),Object.assign(o,r),t(o)}class qC{constructor(t,l,o){this.apiClient=t,this.auth=l,this.webSocketFactory=o}async connect(t){var l,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),h=VC(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${m}`;let p=()=>{};const x=new Promise(V=>{p=V}),S=t.callbacks,E=function(){p({})},A=this.apiClient,D={onopen:E,onmessage:V=>{PC(A,S.onmessage,V)},onerror:(l=S==null?void 0:S.onerror)!==null&&l!==void 0?l:function(V){},onclose:(o=S==null?void 0:S.onclose)!==null&&o!==void 0?o:function(V){}},N=this.webSocketFactory.create(y,GC(h),D);N.connect(),await x;const H={setup:{model:Ge(this.apiClient,t.model)}};return N.send(JSON.stringify(H)),new HC(N,this.apiClient)}}class HC{constructor(t,l){this.conn=t,this.apiClient=l}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const l=MT(t);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const l=RT(t);this.conn.send(JSON.stringify(l))}sendPlaybackControl(t){const l={playbackControl:t};this.conn.send(JSON.stringify(l))}play(){this.sendPlaybackControl(Al.PLAY)}pause(){this.sendPlaybackControl(Al.PAUSE)}stop(){this.sendPlaybackControl(Al.STOP)}resetContext(){this.sendPlaybackControl(Al.RESET_CONTEXT)}close(){this.conn.close()}}function GC(i){const t={};return i.forEach((l,o)=>{t[o]=l}),t}function VC(i){const t=new Headers;for(const[l,o]of Object.entries(i))t.append(l,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FC(i,t,l){const o=new Dx;let r;l.data instanceof Blob?r=await l.data.text():l.data instanceof ArrayBuffer?r=new TextDecoder().decode(l.data):r=l.data;const c=JSON.parse(r);if(i.isVertexAI()){const h=kT(c);Object.assign(o,h)}else Object.assign(o,c);t(o)}class OC{constructor(t,l,o){this.apiClient=t,this.auth=l,this.webSocketFactory=o,this.music=new qC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var l,o,r,c,h,m;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let x;const S=this.apiClient.getHeaders();t.config&&t.config.tools&&Zg(t.config.tools)&&Wg(S);const E=XC(S);if(this.apiClient.isVertexAI())x=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,x);else{const ae=this.apiClient.getApiKey();let te="BidiGenerateContent",re="key";ae!=null&&ae.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),te="BidiGenerateContentConstrained",re="access_token"),x=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${te}?${re}=${ae}`}let A=()=>{};const D=new Promise(ae=>{A=ae}),N=t.callbacks,R=function(){var ae;(ae=N==null?void 0:N.onopen)===null||ae===void 0||ae.call(N),A({})},I=this.apiClient,H={onopen:R,onmessage:ae=>{FC(I,N.onmessage,ae)},onerror:(l=N==null?void 0:N.onerror)!==null&&l!==void 0?l:function(ae){},onclose:(o=N==null?void 0:N.onclose)!==null&&o!==void 0?o:function(ae){}},V=this.webSocketFactory.create(x,JC(E),H);V.connect(),await D;let B=Ge(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&B.startsWith("publishers/")){const ae=this.apiClient.getProject(),te=this.apiClient.getLocation();B=`projects/${ae}/locations/${te}/`+B}let Y={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ga.AUDIO]}:t.config.responseModalities=[ga.AUDIO]),!((c=t.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ee=(m=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&m!==void 0?m:[],ne=[];for(const ae of ee)if(this.isCallableTool(ae)){const te=ae;ne.push(await te.tool())}else ne.push(ae);ne.length>0&&(t.config.tools=ne);const he={model:B,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Y=bT(this.apiClient,he):Y=wT(this.apiClient,he),delete Y.config,V.send(JSON.stringify(Y)),new $C(V,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const YC={turnComplete:!0};class $C{constructor(t,l){this.conn=t,this.apiClient=l}tLiveClientContent(t,l){if(l.turns!==null&&l.turns!==void 0){let o=[];try{o=en(l.turns),t.isVertexAI()||(o=o.map(r=>Aa(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof l.turns}'`)}return{clientContent:{turns:o,turnComplete:l.turnComplete}}}return{clientContent:{turnComplete:l.turnComplete}}}tLiveClienttToolResponse(t,l){let o=[];if(l.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(l.functionResponses)?o=l.functionResponses:o=[l.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const c of o){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!t.isVertexAI()&&!("id"in c))throw new Error(BC)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},YC),t);const l=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(l))}sendRealtimeInput(t){let l={};this.apiClient.isVertexAI()?l={realtimeInput:DT(t)}:l={realtimeInput:IT(t)},this.conn.send(JSON.stringify(l))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const l=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(l))}close(){this.conn.close()}}function JC(i){const t={};return i.forEach((l,o)=>{t[o]=l}),t}function XC(i){const t=new Headers;for(const[l,o]of Object.entries(i))t.append(l,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ig=10;function lg(i){var t,l,o;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(l=i==null?void 0:i.tools)!==null&&l!==void 0?l:[])if(wl(h)){r=!0;break}if(!r)return!0;const c=(o=i==null?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function wl(i){return"callTool"in i&&typeof i.callTool=="function"}function KC(i){var t,l,o;return(o=(l=(t=i.config)===null||t===void 0?void 0:t.tools)===null||l===void 0?void 0:l.some(r=>wl(r)))!==null&&o!==void 0?o:!1}function sg(i){var t;const l=[];return!((t=i==null?void 0:i.config)===null||t===void 0)&&t.tools&&i.config.tools.forEach((o,r)=>{if(wl(o))return;const c=o;c.functionDeclarations&&c.functionDeclarations.length>0&&l.push(r)}),l}function og(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QC extends qn{constructor(t){super(),this.apiClient=t,this.generateContent=async l=>{var o,r,c,h,m;const y=await this.processParamsMaybeAddMcpUsage(l);if(this.maybeMoveToResponseJsonSchem(l),!KC(l)||lg(l.config))return await this.generateContentInternal(y);const p=sg(l);if(p.length>0){const N=p.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let x,S;const E=en(y.contents),A=(c=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&c!==void 0?c:ig;let D=0;for(;D<A&&(x=await this.generateContentInternal(y),!(!x.functionCalls||x.functionCalls.length===0));){const N=x.candidates[0].content,R=[];for(const I of(m=(h=l.config)===null||h===void 0?void 0:h.tools)!==null&&m!==void 0?m:[])if(wl(I)){const V=await I.callTool(x.functionCalls);R.push(...V)}D++,S={role:"user",parts:R},y.contents=en(y.contents),y.contents.push(N),y.contents.push(S),og(y.config)&&(E.push(N),E.push(S))}return og(y.config)&&(x.automaticFunctionCallingHistory=E),x},this.generateContentStream=async l=>{if(this.maybeMoveToResponseJsonSchem(l),lg(l.config)){const r=await this.processParamsMaybeAddMcpUsage(l);return await this.generateContentStreamInternal(r)}const o=sg(l);if(o.length>0){const r=o.map(c=>`tools[${c}]`).join(", ");throw new Error(`Incompatible tools found at ${r}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(l)},this.generateImages=async l=>await this.generateImagesInternal(l).then(o=>{var r;let c;const h=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?c=y==null?void 0:y.safetyAttributes:h.push(y);let m;return c?m={generatedImages:h,positivePromptSafetyAttributes:c,sdkHttpResponse:o.sdkHttpResponse}:m={generatedImages:h,sdkHttpResponse:o.sdkHttpResponse},m}),this.list=async l=>{var o;const h={config:Object.assign(Object.assign({},{queryBase:!0}),l==null?void 0:l.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((o=h.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new ki(Pn.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(h),h)},this.editImage=async l=>{const o={model:l.model,prompt:l.prompt,referenceImages:[],config:l.config};return l.referenceImages&&l.referenceImages&&(o.referenceImages=l.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async l=>{let o={numberOfImages:1,mode:"upscale"};l.config&&(o=Object.assign(Object.assign({},o),l.config));const r={model:l.model,image:l.image,upscaleFactor:l.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async l=>{var o,r,c,h,m,y;if((l.prompt||l.image||l.video)&&l.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=l.video)===null||o===void 0)&&o.uri&&(!((r=l.video)===null||r===void 0)&&r.videoBytes)?l.video={uri:l.video.uri,mimeType:l.video.mimeType}:!((h=(c=l.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.uri&&(!((y=(m=l.source)===null||m===void 0?void 0:m.video)===null||y===void 0)&&y.videoBytes)&&(l.source.video={uri:l.source.video.uri,mimeType:l.source.video.mimeType})),await this.generateVideosInternal(l)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var l,o,r;const c=(l=t.config)===null||l===void 0?void 0:l.tools;if(!c)return t;const h=await Promise.all(c.map(async y=>wl(y)?await y.tool():y)),m={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(m.config.tools=h,t.config&&t.config.tools&&Zg(t.config.tools)){const y=(r=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Wg(p),m.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:p})}return m}async initAfcToolsMap(t){var l,o,r;const c=new Map;for(const h of(o=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&o!==void 0?o:[])if(wl(h)){const m=h,y=await m.tool();for(const p of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(c.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);c.set(p.name,m)}}return c}async processAfcStream(t){var l,o,r;const c=(r=(o=(l=t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:ig;let h=!1,m=0;const y=await this.initAfcToolsMap(t);return(function(p,x,S){var E,A;return Nl(this,arguments,function*(){for(var D,N,R,I;m<c;){h&&(m++,h=!1);const Y=yield et(p.processParamsMaybeAddMcpUsage(S)),ee=yield et(p.generateContentStreamInternal(Y)),ne=[],he=[];try{for(var H=!0,V=(N=void 0,Vs(ee)),B;B=yield et(V.next()),D=B.done,!D;H=!0){I=B.value,H=!1;const ae=I;if(yield yield et(ae),ae.candidates&&(!((E=ae.candidates[0])===null||E===void 0)&&E.content)){he.push(ae.candidates[0].content);for(const te of(A=ae.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(m<c&&te.functionCall){if(!te.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(te.functionCall.name)){const re=yield et(x.get(te.functionCall.name).callTool([te.functionCall]));ne.push(...re)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${te.functionCall.name}`)}}}}catch(ae){N={error:ae}}finally{try{!H&&!D&&(R=V.return)&&(yield et(R.call(V)))}finally{if(N)throw N.error}}if(ne.length>0){h=!0;const ae=new Ls;ae.candidates=[{content:{role:"user",parts:ne}}],yield yield et(ae);const te=[];te.push(...he),te.push({role:"user",parts:ne});const re=en(S.contents).concat(te);S.contents=re}else break}})})(this,y,t)}async generateContentInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=Zm(this.apiClient,t);return m=oe("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=eg(x),E=new Ls;return Object.assign(E,S),E})}else{const p=jm(this.apiClient,t);return m=oe("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=Wm(x),E=new Ls;return Object.assign(E,S),E})}}async generateContentStreamInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=Zm(this.apiClient,t);return m=oe("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),h.then(function(S){return Nl(this,arguments,function*(){var E,A,D,N;try{for(var R=!0,I=Vs(S),H;H=yield et(I.next()),E=H.done,!E;R=!0){N=H.value,R=!1;const V=N,B=eg(yield et(V.json()));B.sdkHttpResponse={headers:V.headers};const Y=new Ls;Object.assign(Y,B),yield yield et(Y)}}catch(V){A={error:V}}finally{try{!R&&!E&&(D=I.return)&&(yield et(D.call(I)))}finally{if(A)throw A.error}}})})}else{const p=jm(this.apiClient,t);return m=oe("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}),h.then(function(S){return Nl(this,arguments,function*(){var E,A,D,N;try{for(var R=!0,I=Vs(S),H;H=yield et(I.next()),E=H.done,!E;R=!0){N=H.value,R=!1;const V=N,B=Wm(yield et(V.json()));B.sdkHttpResponse={headers:V.headers};const Y=new Ls;Object.assign(Y,B),yield yield et(Y)}}catch(V){A={error:V}}finally{try{!R&&!E&&(D=I.return)&&(yield et(D.call(I)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=uE(this.apiClient,t);return m=oe("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=dE(x),E=new Lm;return Object.assign(E,S),E})}else{const p=rE(this.apiClient,t);return m=oe("{model}:batchEmbedContents",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=cE(x),E=new Lm;return Object.assign(E,S),E})}}async generateImagesInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=SE(this.apiClient,t);return m=oe("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=EE(x),E=new zm;return Object.assign(E,S),E})}else{const p=xE(this.apiClient,t);return m=oe("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=TE(x),E=new zm;return Object.assign(E,S),E})}}async editImageInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI()){const m=lE(this.apiClient,t);return c=oe("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:y.headers},x})),r.then(y=>{const p=sE(y),x=new Tx;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI()){const m=yC(this.apiClient,t);return c=oe("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:y.headers},x})),r.then(y=>{const p=vC(y),x=new Ex;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI()){const m=WE(this.apiClient,t);return c=oe("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const p=eC(y),x=new Cx;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI()){const m=oC(this.apiClient,t);return c=oe("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const p=aC(y),x=new Ax;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=HE(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>dc(x))}else{const p=qE(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>cc(x))}}async listInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=$E(this.apiClient,t);return m=oe("{models_url}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=XE(x),E=new Pm;return Object.assign(E,S),E})}else{const p=YE(this.apiClient,t);return m=oe("{models_url}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=JE(x),E=new Pm;return Object.assign(E,S),E})}}async update(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=mC(this.apiClient,t);return m=oe("{model}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>dc(x))}else{const p=hC(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>cc(x))}}async delete(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=eE(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=nE(x),E=new qm;return Object.assign(E,S),E})}else{const p=WT(this.apiClient,t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=tE(x),E=new qm;return Object.assign(E,S),E})}}async countTokens(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=QT(this.apiClient,t);return m=oe("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=ZT(x),E=new Hm;return Object.assign(E,S),E})}else{const p=KT(this.apiClient,t);return m=oe("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=jT(x),E=new Hm;return Object.assign(E,S),E})}}async computeTokens(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI()){const m=BT(this.apiClient,t);return c=oe("{model}:computeTokens",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:y.headers},x})),r.then(y=>{const p=FT(y),x=new _x;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=bE(this.apiClient,t);return m=oe("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h.then(x=>{const S=NE(x),E=new ya;return Object.assign(E,S),E})}else{const p=wE(this.apiClient,t);return m=oe("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h.then(x=>{const S=_E(x),E=new ya;return Object.assign(E,S),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jC extends qn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const l=t.operation,o=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let c;o&&"httpOptions"in o&&(c=o.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:c}});return l._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:o});return l._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const l=t.operation,o=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let c;o&&"httpOptions"in o&&(c=o.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:c}});return l._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:o});return l._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=mx(t);return m=oe("{operationName}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),h}else{const p=hx(t);return m=oe("{operationName}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI()){const m=ax(t);return c=oe("{resourceName}:fetchPredictOperation",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(i){const t={},l=u(i,["data"]);if(l!=null&&d(t,["data"],l),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function WC(i){const t={},l=u(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>aA(c))),d(t,["parts"],r)}const o=u(i,["role"]);return o!=null&&d(t,["role"],o),t}function eA(i,t,l){const o={},r=u(t,["expireTime"]);l!==void 0&&r!=null&&d(l,["expireTime"],r);const c=u(t,["newSessionExpireTime"]);l!==void 0&&c!=null&&d(l,["newSessionExpireTime"],c);const h=u(t,["uses"]);l!==void 0&&h!=null&&d(l,["uses"],h);const m=u(t,["liveConnectConstraints"]);l!==void 0&&m!=null&&d(l,["bidiGenerateContentSetup"],oA(i,m));const y=u(t,["lockAdditionalFields"]);return l!==void 0&&y!=null&&d(l,["fieldMask"],y),o}function tA(i,t){const l={},o=u(t,["config"]);return o!=null&&d(l,["config"],eA(i,o,l)),l}function nA(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=u(i,["fileUri"]);l!=null&&d(t,["fileUri"],l);const o=u(i,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function iA(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=u(i,["enableWidget"]);return l!=null&&d(t,["enableWidget"],l),t}function lA(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=u(i,["timeRangeFilter"]);return l!=null&&d(t,["timeRangeFilter"],l),t}function sA(i,t){const l={},o=u(i,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],o);const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const c=u(i,["temperature"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","temperature"],c);const h=u(i,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const m=u(i,["topK"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","topK"],m);const y=u(i,["maxOutputTokens"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","maxOutputTokens"],y);const p=u(i,["mediaResolution"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","mediaResolution"],p);const x=u(i,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const S=u(i,["speechConfig"]);t!==void 0&&S!=null&&d(t,["setup","generationConfig","speechConfig"],Nc(S));const E=u(i,["thinkingConfig"]);t!==void 0&&E!=null&&d(t,["setup","generationConfig","thinkingConfig"],E);const A=u(i,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const D=u(i,["systemInstruction"]);t!==void 0&&D!=null&&d(t,["setup","systemInstruction"],WC(Et(D)));const N=u(i,["tools"]);if(t!==void 0&&N!=null){let ee=kl(N);Array.isArray(ee)&&(ee=ee.map(ne=>uA(Dl(ne)))),d(t,["setup","tools"],ee)}const R=u(i,["sessionResumption"]);t!==void 0&&R!=null&&d(t,["setup","sessionResumption"],rA(R));const I=u(i,["inputAudioTranscription"]);t!==void 0&&I!=null&&d(t,["setup","inputAudioTranscription"],I);const H=u(i,["outputAudioTranscription"]);t!==void 0&&H!=null&&d(t,["setup","outputAudioTranscription"],H);const V=u(i,["realtimeInputConfig"]);t!==void 0&&V!=null&&d(t,["setup","realtimeInputConfig"],V);const B=u(i,["contextWindowCompression"]);t!==void 0&&B!=null&&d(t,["setup","contextWindowCompression"],B);const Y=u(i,["proactivity"]);return t!==void 0&&Y!=null&&d(t,["setup","proactivity"],Y),l}function oA(i,t){const l={},o=u(t,["model"]);o!=null&&d(l,["setup","model"],Ge(i,o));const r=u(t,["config"]);return r!=null&&d(l,["config"],sA(r,l)),l}function aA(i){const t={},l=u(i,["functionCall"]);l!=null&&d(t,["functionCall"],l);const o=u(i,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);const r=u(i,["executableCode"]);r!=null&&d(t,["executableCode"],r);const c=u(i,["fileData"]);c!=null&&d(t,["fileData"],nA(c));const h=u(i,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const m=u(i,["inlineData"]);m!=null&&d(t,["inlineData"],ZC(m));const y=u(i,["text"]);y!=null&&d(t,["text"],y);const p=u(i,["thought"]);p!=null&&d(t,["thought"],p);const x=u(i,["thoughtSignature"]);x!=null&&d(t,["thoughtSignature"],x);const S=u(i,["videoMetadata"]);return S!=null&&d(t,["videoMetadata"],S),t}function rA(i){const t={},l=u(i,["handle"]);if(l!=null&&d(t,["handle"],l),u(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function uA(i){const t={},l=u(i,["functionDeclarations"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(S=>S)),d(t,["functionDeclarations"],x)}if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const r=u(i,["computerUse"]);r!=null&&d(t,["computerUse"],r);const c=u(i,["fileSearch"]);c!=null&&d(t,["fileSearch"],c);const h=u(i,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=u(i,["googleMaps"]);m!=null&&d(t,["googleMaps"],iA(m));const y=u(i,["googleSearch"]);y!=null&&d(t,["googleSearch"],lA(y));const p=u(i,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cA(i){const t=[];for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const o=i[l];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(c=>`${l}.${c}`);t.push(...r)}else t.push(l)}return t.join(",")}function dA(i,t){let l=null;const o=i.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const c=o.setup;typeof c=="object"&&c!==null?(i.bidiGenerateContentSetup=c,l=c):delete i.bidiGenerateContentSetup}else o!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(l){const c=cA(l);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)c?i.fieldMask=c:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let m=[];r.length>0&&(m=r.map(p=>h.includes(p)?`generationConfig.${p}`:p));const y=[];c&&y.push(c),m.length>0&&y.push(...m),y.length>0?i.fieldMask=y.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class fA extends qn{constructor(t){super(),this.apiClient=t}async create(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const m=tA(this.apiClient,t);c=oe("auth_tokens",m._url),h=m._query,delete m.config,delete m._url,delete m._query;const y=dA(m,t.config);return r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pA(i,t){const l={},o=u(i,["displayName"]);return t!==void 0&&o!=null&&d(t,["displayName"],o),l}function hA(i){const t={},l=u(i,["config"]);return l!=null&&pA(l,t),t}function mA(i,t){const l={},o=u(i,["force"]);return t!==void 0&&o!=null&&d(t,["_query","force"],o),l}function gA(i){const t={},l=u(i,["name"]);l!=null&&d(t,["_url","name"],l);const o=u(i,["config"]);return o!=null&&mA(o,t),t}function yA(i){const t={},l=u(i,["name"]);return l!=null&&d(t,["_url","name"],l),t}function vA(i,t){const l={},o=u(i,["customMetadata"]);if(t!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["customMetadata"],c)}const r=u(i,["chunkingConfig"]);return t!==void 0&&r!=null&&d(t,["chunkingConfig"],r),l}function xA(i){const t={},l=u(i,["name"]);l!=null&&d(t,["name"],l);const o=u(i,["metadata"]);o!=null&&d(t,["metadata"],o);const r=u(i,["done"]);r!=null&&d(t,["done"],r);const c=u(i,["error"]);c!=null&&d(t,["error"],c);const h=u(i,["response"]);return h!=null&&d(t,["response"],TA(h)),t}function SA(i){const t={},l=u(i,["fileSearchStoreName"]);l!=null&&d(t,["_url","file_search_store_name"],l);const o=u(i,["fileName"]);o!=null&&d(t,["fileName"],o);const r=u(i,["config"]);return r!=null&&vA(r,t),t}function TA(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["parent"]);o!=null&&d(t,["parent"],o);const r=u(i,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function EA(i,t){const l={},o=u(i,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),l}function CA(i){const t={},l=u(i,["config"]);return l!=null&&EA(l,t),t}function AA(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["fileSearchStores"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["fileSearchStores"],c)}return t}function _A(i,t){const l={},o=u(i,["mimeType"]);t!==void 0&&o!=null&&d(t,["mimeType"],o);const r=u(i,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const c=u(i,["customMetadata"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(y=>y)),d(t,["customMetadata"],m)}const h=u(i,["chunkingConfig"]);return t!==void 0&&h!=null&&d(t,["chunkingConfig"],h),l}function NA(i){const t={},l=u(i,["fileSearchStoreName"]);l!=null&&d(t,["_url","file_search_store_name"],l);const o=u(i,["config"]);return o!=null&&_A(o,t),t}function wA(i){const t={},l=u(i,["sdkHttpResponse"]);return l!=null&&d(t,["sdkHttpResponse"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bA(i,t){const l={},o=u(i,["force"]);return t!==void 0&&o!=null&&d(t,["_query","force"],o),l}function RA(i){const t={},l=u(i,["name"]);l!=null&&d(t,["_url","name"],l);const o=u(i,["config"]);return o!=null&&bA(o,t),t}function MA(i){const t={},l=u(i,["name"]);return l!=null&&d(t,["_url","name"],l),t}function IA(i,t){const l={},o=u(i,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),l}function DA(i){const t={},l=u(i,["parent"]);l!=null&&d(t,["_url","parent"],l);const o=u(i,["config"]);return o!=null&&IA(o,t),t}function kA(i){const t={},l=u(i,["sdkHttpResponse"]);l!=null&&d(t,["sdkHttpResponse"],l);const o=u(i,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const r=u(i,["documents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["documents"],c)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UA extends qn{constructor(t){super(),this.apiClient=t,this.list=async l=>new ki(Pn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:l.parent,config:o.config}),await this.listInternal(l),l)}async get(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=MA(t);return c=oe("{name}",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var l,o;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=RA(t);r=oe("{name}",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=DA(t);return c=oe("{parent}/documents",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const p=kA(y),x=new Nx;return Object.assign(x,p),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LA extends qn{constructor(t,l=new UA(t)){super(),this.apiClient=t,this.documents=l,this.list=async(o={})=>new ki(Pn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=hA(t);return c=oe("fileSearchStores",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=yA(t);return c=oe("{name}",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var l,o;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gA(t);r=oe("{name}",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=CA(t);return c=oe("fileSearchStores",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const p=AA(y),x=new wx;return Object.assign(x,p),x})}}async uploadToFileSearchStoreInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=NA(t);return c=oe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const p=wA(y),x=new bx;return Object.assign(x,p),x})}}async importFile(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=SA(t);return c=oe("{file_search_store_name}:importFile",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const p=xA(y),x=new Tc;return Object.assign(x,p),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zA(i,t){const l={},o=u(i,["name"]);return o!=null&&d(l,["_url","name"],o),l}function PA(i,t){const l={},o=u(i,["name"]);return o!=null&&d(l,["_url","name"],o),l}function qA(i,t,l){const o={};if(u(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(i,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&d(t,["displayName"],r),u(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=u(i,["epochCount"]);t!==void 0&&c!=null&&d(t,["tuningTask","hyperparameters","epochCount"],c);const h=u(i,["learningRateMultiplier"]);if(h!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],h),u(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=u(i,["batchSize"]);t!==void 0&&m!=null&&d(t,["tuningTask","hyperparameters","batchSize"],m);const y=u(i,["learningRate"]);if(t!==void 0&&y!=null&&d(t,["tuningTask","hyperparameters","learningRate"],y),u(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function HA(i,t,l){const o={};let r=u(l,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=u(i,["validationDataset"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec"],ag(A))}else if(r==="PREFERENCE_TUNING"){const A=u(i,["validationDataset"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec"],ag(A))}const c=u(i,["tunedModelDisplayName"]);t!==void 0&&c!=null&&d(t,["tunedModelDisplayName"],c);const h=u(i,["description"]);t!==void 0&&h!=null&&d(t,["description"],h);let m=u(l,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=u(i,["epochCount"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(m==="PREFERENCE_TUNING"){const A=u(i,["epochCount"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let y=u(l,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=u(i,["learningRateMultiplier"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(y==="PREFERENCE_TUNING"){const A=u(i,["learningRateMultiplier"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let p=u(l,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=u(i,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(p==="PREFERENCE_TUNING"){const A=u(i,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=u(l,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=u(i,["adapterSize"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=u(i,["adapterSize"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(u(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=u(i,["labels"]);t!==void 0&&S!=null&&d(t,["labels"],S);const E=u(i,["beta"]);return t!==void 0&&E!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],E),o}function GA(i,t){const l={},o=u(i,["baseModel"]);o!=null&&d(l,["baseModel"],o);const r=u(i,["preTunedModel"]);r!=null&&d(l,["preTunedModel"],r);const c=u(i,["trainingDataset"]);c!=null&&jA(c);const h=u(i,["config"]);return h!=null&&qA(h,l),l}function VA(i,t){const l={},o=u(i,["baseModel"]);o!=null&&d(l,["baseModel"],o);const r=u(i,["preTunedModel"]);r!=null&&d(l,["preTunedModel"],r);const c=u(i,["trainingDataset"]);c!=null&&ZA(c,l,t);const h=u(i,["config"]);return h!=null&&HA(h,l,t),l}function BA(i,t){const l={},o=u(i,["name"]);return o!=null&&d(l,["_url","name"],o),l}function FA(i,t){const l={},o=u(i,["name"]);return o!=null&&d(l,["_url","name"],o),l}function OA(i,t,l){const o={},r=u(i,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const c=u(i,["pageToken"]);t!==void 0&&c!=null&&d(t,["_query","pageToken"],c);const h=u(i,["filter"]);return t!==void 0&&h!=null&&d(t,["_query","filter"],h),o}function YA(i,t,l){const o={},r=u(i,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const c=u(i,["pageToken"]);t!==void 0&&c!=null&&d(t,["_query","pageToken"],c);const h=u(i,["filter"]);return t!==void 0&&h!=null&&d(t,["_query","filter"],h),o}function $A(i,t){const l={},o=u(i,["config"]);return o!=null&&OA(o,l),l}function JA(i,t){const l={},o=u(i,["config"]);return o!=null&&YA(o,l),l}function XA(i,t){const l={},o=u(i,["sdkHttpResponse"]);o!=null&&d(l,["sdkHttpResponse"],o);const r=u(i,["nextPageToken"]);r!=null&&d(l,["nextPageToken"],r);const c=u(i,["tunedModels"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>ey(m))),d(l,["tuningJobs"],h)}return l}function KA(i,t){const l={},o=u(i,["sdkHttpResponse"]);o!=null&&d(l,["sdkHttpResponse"],o);const r=u(i,["nextPageToken"]);r!=null&&d(l,["nextPageToken"],r);const c=u(i,["tuningJobs"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>pc(m))),d(l,["tuningJobs"],h)}return l}function QA(i,t){const l={},o=u(i,["name"]);o!=null&&d(l,["model"],o);const r=u(i,["name"]);return r!=null&&d(l,["endpoint"],r),l}function jA(i,t){const l={};if(u(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=u(i,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),d(l,["examples","examples"],r)}return l}function ZA(i,t,l){const o={};let r=u(l,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=u(i,["gcsUri"]);t!==void 0&&h!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=u(i,["gcsUri"]);t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let c=u(l,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const h=u(i,["vertexDatasetResource"]);t!==void 0&&h!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(c==="PREFERENCE_TUNING"){const h=u(i,["vertexDatasetResource"]);t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(u(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function ey(i,t){const l={},o=u(i,["sdkHttpResponse"]);o!=null&&d(l,["sdkHttpResponse"],o);const r=u(i,["name"]);r!=null&&d(l,["name"],r);const c=u(i,["state"]);c!=null&&d(l,["state"],Lg(c));const h=u(i,["createTime"]);h!=null&&d(l,["createTime"],h);const m=u(i,["tuningTask","startTime"]);m!=null&&d(l,["startTime"],m);const y=u(i,["tuningTask","completeTime"]);y!=null&&d(l,["endTime"],y);const p=u(i,["updateTime"]);p!=null&&d(l,["updateTime"],p);const x=u(i,["description"]);x!=null&&d(l,["description"],x);const S=u(i,["baseModel"]);S!=null&&d(l,["baseModel"],S);const E=u(i,["_self"]);return E!=null&&d(l,["tunedModel"],QA(E)),l}function pc(i,t){const l={},o=u(i,["sdkHttpResponse"]);o!=null&&d(l,["sdkHttpResponse"],o);const r=u(i,["name"]);r!=null&&d(l,["name"],r);const c=u(i,["state"]);c!=null&&d(l,["state"],Lg(c));const h=u(i,["createTime"]);h!=null&&d(l,["createTime"],h);const m=u(i,["startTime"]);m!=null&&d(l,["startTime"],m);const y=u(i,["endTime"]);y!=null&&d(l,["endTime"],y);const p=u(i,["updateTime"]);p!=null&&d(l,["updateTime"],p);const x=u(i,["error"]);x!=null&&d(l,["error"],x);const S=u(i,["description"]);S!=null&&d(l,["description"],S);const E=u(i,["baseModel"]);E!=null&&d(l,["baseModel"],E);const A=u(i,["tunedModel"]);A!=null&&d(l,["tunedModel"],A);const D=u(i,["preTunedModel"]);D!=null&&d(l,["preTunedModel"],D);const N=u(i,["supervisedTuningSpec"]);N!=null&&d(l,["supervisedTuningSpec"],N);const R=u(i,["preferenceOptimizationSpec"]);R!=null&&d(l,["preferenceOptimizationSpec"],R);const I=u(i,["tuningDataStats"]);I!=null&&d(l,["tuningDataStats"],I);const H=u(i,["encryptionSpec"]);H!=null&&d(l,["encryptionSpec"],H);const V=u(i,["partnerModelTuningSpec"]);V!=null&&d(l,["partnerModelTuningSpec"],V);const B=u(i,["customBaseModel"]);B!=null&&d(l,["customBaseModel"],B);const Y=u(i,["experiment"]);Y!=null&&d(l,["experiment"],Y);const ee=u(i,["labels"]);ee!=null&&d(l,["labels"],ee);const ne=u(i,["outputUri"]);ne!=null&&d(l,["outputUri"],ne);const he=u(i,["pipelineJob"]);he!=null&&d(l,["pipelineJob"],he);const ae=u(i,["serviceAccount"]);ae!=null&&d(l,["serviceAccount"],ae);const te=u(i,["tunedModelDisplayName"]);te!=null&&d(l,["tunedModelDisplayName"],te);const re=u(i,["veoTuningSpec"]);return re!=null&&d(l,["veoTuningSpec"],re),l}function WA(i,t){const l={},o=u(i,["sdkHttpResponse"]);o!=null&&d(l,["sdkHttpResponse"],o);const r=u(i,["name"]);r!=null&&d(l,["name"],r);const c=u(i,["metadata"]);c!=null&&d(l,["metadata"],c);const h=u(i,["done"]);h!=null&&d(l,["done"],h);const m=u(i,["error"]);return m!=null&&d(l,["error"],m),l}function ag(i,t){const l={},o=u(i,["gcsUri"]);o!=null&&d(l,["validationDatasetUri"],o);const r=u(i,["vertexDatasetResource"]);return r!=null&&d(l,["validationDatasetUri"],r),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e_ extends qn{constructor(t){super(),this.apiClient=t,this.get=async l=>await this.getInternal(l),this.list=async(l={})=>new ki(Pn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(l),l),this.tune=async l=>{var o;if(this.apiClient.isVertexAI())if(l.baseModel.startsWith("projects/")){const r={tunedModelName:l.baseModel};!((o=l.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=l.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},l),{preTunedModel:r});return c.baseModel=void 0,await this.tuneInternal(c)}else{const r=Object.assign({},l);return await this.tuneInternal(r)}else{const r=Object.assign({},l),c=await this.tuneMldevInternal(r);let h="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?h=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(h=c.name.split("/operations/")[0]),{name:h,state:oc.JOB_STATE_QUEUED}}}}async getInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=FA(t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>pc(x))}else{const p=BA(t);return m=oe("{name}",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>ey(x))}}async listInternal(t){var l,o,r,c;let h,m="",y={};if(this.apiClient.isVertexAI()){const p=JA(t);return m=oe("tuningJobs",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=KA(x),E=new Gm;return Object.assign(E,S),E})}else{const p=$A(t);return m=oe("tunedModels",p._url),y=p._query,delete p._url,delete p._query,h=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(x=>x.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:x.headers},E})),h.then(x=>{const S=XA(x),E=new Gm;return Object.assign(E,S),E})}}async cancel(t){var l,o,r,c;let h="",m={};if(this.apiClient.isVertexAI()){const y=PA(t);h=oe("{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=zA(t);h=oe("{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async tuneInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI()){const m=VA(t,t);return c=oe("tuningJobs",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:y.headers},x})),r.then(y=>pc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var l,o;let r,c="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=GA(t);return c=oe("tunedModels",m._url),h=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:y.headers},x})),r.then(y=>WA(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t_{async download(t,l){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const n_=1024*1024*8,i_=3,l_=1e3,s_=2,xa="x-goog-upload-status";async function o_(i,t,l){var o;const r=await ty(i,t,l),c=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function a_(i,t,l){var o;const r=await ty(i,t,l),c=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=Rg(c),m=new Ec;return Object.assign(m,h),m}async function ty(i,t,l){var o,r;let c=0,h=0,m=new ac(new Response),y="upload";for(c=i.size;h<c;){const p=Math.min(n_,c-h),x=i.slice(h,h+p);h+p>=c&&(y+=", finalize");let S=0,E=l_;for(;S<i_&&(m=await l.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(h),"Content-Length":String(p)}}}),!(!((o=m==null?void 0:m.headers)===null||o===void 0)&&o[xa]));)S++,await u_(E),E=E*s_;if(h+=p,((r=m==null?void 0:m.headers)===null||r===void 0?void 0:r[xa])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return m}async function r_(i){return{size:i.size,type:i.type}}function u_(i){return new Promise(t=>setTimeout(t,i))}class c_{async upload(t,l,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await o_(t,l,o)}async uploadToFileSearchStore(t,l,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await a_(t,l,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await r_(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d_{create(t,l,o){return new f_(t,l,o)}}class f_{constructor(t,l,o){this.url=t,this.headers=l,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rg="x-goog-api-key";class p_{constructor(t){this.apiKey=t}async addAuthHeaders(t,l){if(t.get(rg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(rg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h_="gl-node/";class m_{constructor(t){var l;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(l=t.vertexai)!==null&&l!==void 0?l:!1,this.apiKey=t.apiKey;const o=sx(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion;const r=new p_(this.apiKey);this.apiClient=new IC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:h_+"web",uploader:new c_,downloader:new t_}),this.models=new QC(this.apiClient),this.live=new OC(this.apiClient,r,new d_),this.batches=new MS(this.apiClient),this.chats=new rT(this.models,this.apiClient),this.caches=new sT(this.apiClient),this.files=new vT(this.apiClient),this.operations=new jC(this.apiClient),this.authTokens=new fA(this.apiClient),this.tunings=new e_(this.apiClient),this.fileSearchStores=new LA(this.apiClient)}}const di=i=>new Promise((t,l)=>{const o=new FileReader;o.readAsDataURL(i),o.onload=()=>{const c=o.result.split(",")[1];t(c)},o.onerror=r=>l(r)}),ny=i=>new Promise((t,l)=>{const o=new FileReader;o.readAsText(i),o.onload=()=>{t(o.result)},o.onerror=r=>l(r)}),g_=async i=>{const t=await i.arrayBuffer(),l=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(l)).map(c=>c.toString(16).padStart(2,"0")).join("")},hc=async(i,t)=>new Promise((l,o)=>{const r=document.createElement("video"),c=document.createElement("canvas"),h=c.getContext("2d"),m=[];if(!h)return o(new Error("Could not get canvas context"));r.preload="metadata";const y=URL.createObjectURL(i);r.src=y,r.muted=!0,r.onloadedmetadata=async()=>{c.width=r.videoWidth,c.height=r.videoHeight;const p=r.duration;if(p===0||!isFinite(p))return URL.revokeObjectURL(y),l([]);const x=p/t,S=async E=>new Promise(A=>{r.currentTime=E,r.onseeked=()=>{h.drawImage(r,0,0,r.videoWidth,r.videoHeight);const D=c.toDataURL("image/jpeg");m.push({base64:D.split(",")[1],mimeType:"image/jpeg"}),A()}});for(let E=0;E<t;E++)await S(E*x);URL.revokeObjectURL(y),l(m)},r.onerror=p=>{URL.revokeObjectURL(y),o(new Error(`Video load error: ${p}`))}}),ug=i=>{if(!i.analysis)return"No analysis has been performed on this file.";const{analysis:t}=i,l=`---------------------------------
`;let o="";return o+=`This document contains the AI-generated analysis of ${i.name}, including time-stamped findings and flagged content for use in case documentation.

`,o+=`OFFICIAL ANALYSIS REPORT
`,o+=`=========================================
`,o+=`File Name: ${i.name}
`,o+=`File Type: ${i.type}
`,o+=`Location: ${i.location||"Not Specified"}
`,o+=`Children Detected by AI: ${t.childrenDetected?"Yes":"No"}
`,o+=`SHA-256 Hash: ${i.hash||"Not Calculated"}
`,o+=`Report Generated: ${new Date().toUTCString()}
`,o+=`=========================================

`,o+=`NEW FINDINGS SUMMARY (This File)
`,o+=l,o+=`${t.newFindingsSummary}

`,o+=`OVERALL SUMMARY
`,o+=l,o+=`${t.summary}

`,o+=`AI CONFIDENCE: ${t.confidenceScore}%
`,o+=`SEVERITY SCORE: ${t.severityScore}/10

`,o+=`KEY OBSERVATIONS
`,o+=l,t.keyObservations.length>0?t.keyObservations.forEach(r=>{o+=`[${r.timestamp}] ${r.description}
`}):o+=`No specific concerning observations were flagged.
`,o+=`
`,o+=`TIMELINE EVENTS
`,o+=l,t.timelineEvents.length>0?t.timelineEvents.forEach(r=>{o+=`[${r.timestamp}] ${r.description} (Subjects: ${r.subjects.join(", ")||"Unknown"})
`}):o+=`No timeline events were extracted.
`,o+=`
`,o+=`CROSS-REFERENCES TO OTHER EVIDENCE
`,o+=l,t.crossReferences.length>0?t.crossReferences.forEach(r=>{o+=`- File "${r.fileName}": ${r.observation}
`}):o+=`No direct cross-references were identified.
`,o+=`
`,o+=`EMOTIONAL & TONE ANALYSIS
`,o+=l,t.emotionalAnalysis.length>0?t.emotionalAnalysis.forEach(r=>{o+=`- ${r.emotion}: ${r.evidence}
`}):o+=`No distinct emotional cues were detected.
`,o+=`
`,o+=`RECOGNIZED EMPLOYEES
`,o+=l,t.recognizedEmployees.length>0?t.recognizedEmployees.forEach(r=>{o+=`- ${r.name} (at ${r.timestamp})
`}):o+=`No registered employees were recognized in the file.
`,o+=`
`,o+=`POTENTIAL ETHICAL/POLICY VIOLATIONS
`,o+=l,t.potentialViolations.length>0?t.potentialViolations.forEach(r=>{o+=`- ${r}
`}):o+=`No potential violations were flagged based on the analysis.
`,o+=`
`,t.fullTranscript&&t.fullTranscript!=="N/A"&&(o+=`FULL TRANSCRIPT
`,o+=l,o+=`${t.fullTranscript}

`),o+=`=========================================
`,o+=`Disclaimer: This report was generated by an AI assistant. It is intended for informational purposes and does not constitute legal advice or a definitive finding of fact. All observations should be reviewed by a qualified human investigator.
`,o},iy=async i=>{try{const t=i.split("/"),l=t[t.length-1],o=await fetch(`/api/storage/profile-file/${encodeURIComponent(l)}`);if(!o.ok)return null;const r=await o.blob(),c=await r.arrayBuffer(),h=btoa(String.fromCharCode(...new Uint8Array(c))),m=r.type||"image/png";return{base64:h,mimeType:m}}catch{return null}},y_="AIzaSyANxJ8to2c_g8Sg_bHggAd342X0Eih_HGU",Ll=new m_({apiKey:y_}),Ui="gemini-3-pro-preview",zl={temperature:.2,topP:.9,topK:40,maxOutputTokens:8192},ly=`You are an AI Evidence Companion. Your mission is to help users review and understand multimedia materials related to potential abuse or manipulation in a workplace serving adults with disabilities  objectively, safely, and in context.

Your core principles are:
1.  **Objectivity & Respect:** Describe what you see and hear factually using neutral, respectful language (e.g., "suggestive dance movements" not judgmental terms). Report actions, tones, and environmental details without interpretation. Treat all findings as observations, not conclusions of intent or guilt. Always note uncertainties (e.g., "unclear video quality").
2.  **Safety & Ethics:** You are not a legal expert. Do not offer legal advice or conclusions of guilt. Instead, identify potential indicators or concerning cues based on the evidence provided. Identify potential violations of workplace policy or ethics, framing them as possibilities, not certainties.
3.  **Context is Key:** Always review the user's testimony and the summary of past evidence before analyzing a new file. Your goal is to connect the dots and build a coherent narrative over time.
4.  **Precision:** Always include precise timestamps (HH:MM:SS) for any event or observation you describe from a video or audio file. If a file is a document or image, use "N/A" for timestamps.
5.  **Confidentiality:** Treat all information as private and sensitive.
6.  **No Speculation:** If something is not visible/audible in the provided media, or is uncertain, say "unclear" and DO NOT infer. Stay within the provided JSON schema strictly.
7.  **Empty Arrays for No Data:** If you do not find specific evidence for a field (e.g., no children detected, no employees recognized, no cross-references), YOU MUST RETURN AN EMPTY ARRAY or FALSE. Do not make up data to fill the schema.`,v_=`You are an AI Legal Information Assistant. Your purpose is to provide general information about legal topics, procedures, and concepts using web search. 

**IMPORTANT RULES:**
1.  **You are NOT a lawyer.** You MUST NOT provide legal advice.
2.  **Always include a disclaimer** at the end of every response stating: "This information is for educational purposes only and does not constitute legal advice. You should consult with a qualified legal professional for advice regarding your individual situation."
3.  Use Google Search to find relevant and up-to-date information.
4.  Answer the user's question clearly and concisely.
5.  Cite your sources from the web search results.`,x_=`You are an AI Case Analyst Assistant. Your purpose is to help the user understand their entire case by synthesizing all provided context.

**IMPORTANT RULES:**
1.  **Synthesize, Don't Speculate:** Base your answers *exclusively* on the provided "CASE CONTEXT" (which includes testimony, evidence summaries, and profiles). Do not invent facts or assume information not present.
2.  **Identify Patterns:** Your primary goal is to identify patterns, connections, and overarching themes across all the evidence.
3.  **Use Web Search for Concepts:** Use Google Search to understand and explain general legal or procedural concepts mentioned in the user's query (e.g., "retaliation," "hostile work environment"), but apply these concepts *only* to the facts within the provided CASE CONTEXT.
4.  **You are NOT a lawyer.** You MUST NOT provide legal advice. Your analysis is for informational purposes to help the user organize their thoughts.
5.  **Always include a disclaimer** at the end of every response stating: "This information is for educational purposes only and does not constitute legal advice. You should consult with a qualified legal professional for advice regarding your individual situation."
6.  Cite any web sources used for defining concepts.`,sy={type:ye.OBJECT,properties:{summary:{type:ye.STRING,description:"A brief, objective summary of the content in 2-3 sentences, considering all context provided."},newFindingsSummary:{type:ye.STRING,description:"A very short summary of what this specific file adds to the case that was not present in the past evidence summary."},severityScore:{type:ye.NUMBER,description:"A score from 1 (minor/neutral) to 10 (severe/abusive) based on concerning cues. The presence of children should dramatically increase this score for any negative behavior."},confidenceScore:{type:ye.NUMBER,description:"A score from 1-100 representing your confidence in this analysis, considering factors like media quality and clarity."},childrenDetected:{type:ye.BOOLEAN,description:"Analyze the media and determine if children are present. Return true if children are visually or audibly detected, otherwise false."},keyObservations:{type:ye.ARRAY,description:"A list of specific, timestamped observations of concerning behavior. THIS IS CRITICAL: EVERY observation MUST have a precise HH:MM:SS timestamp.",items:{type:ye.OBJECT,properties:{timestamp:{type:ye.STRING,description:'Timestamp in HH:MM:SS format for video/audio. Use "N/A" for images/documents. This is mandatory for time-based media.'},description:{type:ye.STRING,description:"A factual, objective description of a single, distinct observation."}},required:["timestamp","description"]}},timelineEvents:{type:ye.ARRAY,description:"A list of key events from this file to build a timeline. Extract factual events, not just concerning ones.",items:{type:ye.OBJECT,properties:{timestamp:{type:ye.STRING,description:'Timestamp in HH:MM:SS format. "N/A" for images/documents.'},description:{type:ye.STRING,description:'A neutral description of the event (e.g., "Jose and Maria are talking in the kitchen.").'},subjects:{type:ye.ARRAY,items:{type:ye.STRING},description:"A list of names of people involved in this event."}},required:["timestamp","description","subjects"]}},crossReferences:{type:ye.ARRAY,description:'Identify patterns or connections between THIS file and the "PAST EVIDENCE SUMMARY".',items:{type:ye.OBJECT,properties:{fileName:{type:ye.STRING,description:"The name of the past file this new evidence connects to."},observation:{type:ye.STRING,description:'Describe the connection or pattern (e.g., "This conversation continues the topic of finances mentioned in transcript-01.txt").'}},required:["fileName","observation"]}},emotionalAnalysis:{type:ye.ARRAY,description:"Analyze the emotional tone. Identify emotions like anger, fear, distress, or intimidation.",items:{type:ye.OBJECT,properties:{emotion:{type:ye.STRING,description:'The detected emotion (e.g., "Anger", "Fear").'},evidence:{type:ye.STRING,description:'The evidence for this emotion (e.g., "Raised voice, sharp tone at 01:23").'}},required:["emotion","evidence"]}},recognizedEmployees:{type:ye.ARRAY,description:"A list of known employees recognized in the media. If no one is recognized, return an empty array.",items:{type:ye.OBJECT,properties:{name:{type:ye.STRING,description:"The name of the recognized employee."},timestamp:{type:ye.STRING,description:'Timestamp of their appearance. "N/A" for images/documents.'},confidence:{type:ye.NUMBER,description:"Confidence score from 0 to 100 for this recognition match."}},required:["name","timestamp","confidence"]}},potentialViolations:{type:ye.ARRAY,description:"List potential legal or ethical categories violated, without making definitive claims.",items:{type:ye.STRING}},fullTranscript:{type:ye.STRING,description:'A full transcription of any speech in the audio or video, or the full text of a document. Use "N/A" if not applicable.'}},required:["summary","newFindingsSummary","severityScore","confidenceScore","childrenDetected","keyObservations","timelineEvents","crossReferences","emotionalAnalysis","recognizedEmployees","potentialViolations","fullTranscript"]},S_={type:ye.OBJECT,properties:{overallSummary:{type:ye.STRING,description:"A high-level summary of the overall relationship dynamics and key patterns observed across all evidence."},nodes:{type:ye.ARRAY,description:"A list of all unique individuals identified in the evidence.",items:{type:ye.OBJECT,properties:{id:{type:ye.STRING,description:"The full name of the individual."}},required:["id"]}},links:{type:ye.ARRAY,description:"A list of connections representing interactions between pairs of individuals.",items:{type:ye.OBJECT,properties:{source:{type:ye.STRING,description:"The name of the first person in the interaction."},target:{type:ye.STRING,description:"The name of the second person in the interaction."},value:{type:ye.NUMBER,description:"The total count of distinct interactions between these two people."},sentiment:{type:ye.STRING,description:'The overall sentiment of the interactions: "positive", "negative", "neutral", or "mixed".',enum:["positive","negative","neutral","mixed"]},summary:{type:ye.STRING,description:"A brief summary describing the nature of the relationship and common interaction themes."},interactions:{type:ye.ARRAY,description:"A list of specific, concrete examples of their interactions.",items:{type:ye.OBJECT,properties:{file:{type:ye.STRING,description:"The file name where the interaction occurred."},timestamp:{type:ye.STRING,description:"The timestamp (HH:MM:SS or N/A) of the interaction."},description:{type:ye.STRING,description:"A brief description of the specific interaction."}},required:["file","timestamp","description"]}}},required:["source","target","value","sentiment","summary","interactions"]}}},required:["overallSummary","nodes","links"]};function oy(i){if(!i||typeof i!="object")throw new Error("Invalid analysis result: not an object");return{summary:typeof i.summary=="string"?i.summary:"No summary available.",newFindingsSummary:typeof i.newFindingsSummary=="string"?i.newFindingsSummary:"No new findings.",severityScore:typeof i.severityScore=="number"?i.severityScore:0,confidenceScore:typeof i.confidenceScore=="number"?i.confidenceScore:0,childrenDetected:typeof i.childrenDetected=="boolean"?i.childrenDetected:!1,keyObservations:Array.isArray(i.keyObservations)?i.keyObservations:[],timelineEvents:Array.isArray(i.timelineEvents)?i.timelineEvents:[],crossReferences:Array.isArray(i.crossReferences)?i.crossReferences:[],emotionalAnalysis:Array.isArray(i.emotionalAnalysis)?i.emotionalAnalysis:[],recognizedEmployees:Array.isArray(i.recognizedEmployees)?i.recognizedEmployees:[],potentialViolations:Array.isArray(i.potentialViolations)?i.potentialViolations:[],fullTranscript:typeof i.fullTranscript=="string"?i.fullTranscript:"N/A"}}function bc(i){let t=i.trim();if(t.startsWith("```")){const l=t.indexOf(`
`),o=t.lastIndexOf("```");l!==-1&&o!==-1&&(t=t.substring(l+1,o).trim())}return t}async function T_(i){const t=Ui,l=Ll.models;let o=`Analyze the provided information for a person named ${i.name} to create a detailed, objective physical description for identification purposes. Focus on stable features.
    
    User-provided details: "${i.details}"`;const r=[];i.referenceUrl&&(o+=`
Reference URL (analyze public information if possible): ${i.referenceUrl}`),r.push({text:o}),i.referenceImage&&(r.push({text:`

Use the following reference image as the primary source for the physical description:`}),r.push({inlineData:{mimeType:i.referenceImage.mimeType,data:i.referenceImage.base64}}));const c=await l.generateContent({model:t,contents:{parts:r},config:{...zl,systemInstruction:"You are an AI assistant tasked with creating objective physical descriptions for identification. Do not infer personality or make assumptions. Be factual and detailed based ONLY on the provided information."}});return c.text?c.text.trim():""}async function cg(i){const t=Ui,l=Ll.models,o=`Read the following user testimony and provide a very brief, one-sentence summary of the main context or concern. This summary will be shown to the user to confirm you've understood their situation. Testimony: "${i}"`,r=await l.generateContent({model:t,contents:{parts:[{text:o}]},config:{...zl,systemInstruction:"You are an AI assistant helping a user analyze evidence. Your task is to summarize their testimony concisely to show you've understood it."}});return r.text?r.text.trim():"No summary available."}async function E_(i,t,l,o,r,c){const h=Ui,m=Ll.models,p=await(async R=>{if(R.file)return R.file;if(!R.storedFileName)return null;try{const I=await fetch(`/api/storage/file/${encodeURIComponent(R.storedFileName)}`);if(!I.ok)return null;const H=await I.blob(),V=H.type||(R.type==="image"?"image/png":R.type==="audio"?"audio/mpeg":R.type==="video"?"video/mp4":"text/plain");return new File([H],R.name,{type:V})}catch{return null}})(i);if(!p)throw new Error(`Could not retrieve file content for ${i.name}`);let x=[],S=`--- START OF CONTEXT ---
`;o&&(S+=`**User's Testimony:**
${o}

`),l&&(S+=`**PAST EVIDENCE SUMMARY (Use this to find patterns and connections):**
${l}

`),S+=`**Current File Context:**
- Location: ${i.location||"Not Specified"}
`,S+=`--- END OF CONTEXT ---

`;let E;c&&c.length>0?E=`${S}RE-ANALYSIS INSTRUCTION: The user has manually identified that the following employees are present in this file: **${c.join(", ")}**. Please re-analyze this ${i.type} file named "${i.name}" with this new information. Your primary goal is to find their interactions and analyze their behavior. All other instructions still apply.`:E=`${S}Analyze this ${i.type} file named "${i.name}". Follow your core principles and use all the context provided. Extract timeline events, find cross-references to the past evidence, and summarize what new information this file provides.

**CRITICAL TASKS:**
1.  **Child Detection:** You MUST analyze the media to determine if children are present. Any negative behavior is significantly more severe if children are present. Report your finding in the 'childrenDetected' field.
2.  **Employee Recognition:** Review the full list of employee profiles below. Scan the media to automatically identify if any of these individuals are present, using their names, descriptions, and reference images. Only include a person in 'recognizedEmployees' if you are reasonably confident based on visible evidence; otherwise return an empty array. Provide a confidence score 0-100.
3.  **Connect to Testimony:** If you find evidence that corroborates or contradicts the user's testimony, explicitly state the connection in your observation description (e.g., "This event at [timestamp] aligns with the user's testimony about...").
4.  **Avoid Speculation:** Only describe what is visible/audible in the provided media. If uncertain, write "unclear" and do not infer.
`,r&&(E+=`
**User's Specific Instructions for this File:** ${r}
`),t.length>0&&(E+=`
**EMPLOYEE PROFILES FOR RECOGNITION:**
`,t.forEach(R=>{E+=`- Name: ${R.name}, User Details: ${R.details}, AI Description: ${R.aiEnhancedDetails||"N/A"}
`}));const A=t.filter(R=>R.referenceImage||R.referenceImagePath);if(A.length>0){E+=`
Here are reference images for the employees. Use them for identification.
`;for(const R of A){let I=null;R.referenceImage?I={base64:R.referenceImage.base64,mimeType:R.referenceImage.mimeType}:R.referenceImagePath&&(I=await iy(R.referenceImagePath)),I&&(x.push({text:`Reference image for ${R.name}:`}),x.push({inlineData:{mimeType:I.mimeType,data:I.base64}}))}}if(i.type==="image"){const R=await di(p);x.unshift({text:E}),x.push({inlineData:{mimeType:p.type,data:R}})}else if(i.type==="video"){let R=[];try{R=await hc(p,16)}catch{}if(R&&R.length>0){const I=R.map(H=>({inlineData:{mimeType:H.mimeType,data:H.base64}}));E=`The user has uploaded a video. Here are sequential frames sampled evenly across the video. Analyze ONLY what is visible in these frames; do not assume anything between frames. ${E}`,x.unshift({text:E}),x.push(...I)}else try{const I=await hc(p,1);if(I&&I.length===1)x.unshift({text:`A video was provided but only a single frame could be extracted. Analyze conservatively and avoid speculation. ${E}`}),x.push({inlineData:{mimeType:I[0].mimeType,data:I[0].base64}});else throw new Error("No frames extracted")}catch{const I=await di(p);x.unshift({text:`A video was provided. Raw content attached. If decoding fails, state 'unclear' rather than speculating. ${E}`}),x.push({inlineData:{mimeType:p.type||"video/mp4",data:I}})}}else if(i.type==="audio"){const R=await di(p);x.unshift({text:E}),x.push({inlineData:{mimeType:p.type,data:R}})}else if(i.type==="document"){const R=await ny(p);E+=`

**DOCUMENT CONTENT TO ANALYZE:**
${R}`,x.unshift({text:E})}const D=await m.generateContent({model:h,contents:{parts:x},config:{...zl,systemInstruction:ly,responseMimeType:"application/json",responseSchema:sy}}),N=bc(D.text||"{}");try{const R=JSON.parse(N);return oy(R)}catch{throw console.error("Failed to parse single-file analysis result:",N),new Error("The analysis failed to produce valid JSON output.")}}async function dg(i,t,l,o,r){if(!Array.isArray(i)||i.length<2)throw new Error("Unified analysis requires at least two files.");const c=Ui,h=Ll.models,m=async N=>{if(N.file)return N.file;if(!N.storedFileName)return null;try{const R=await fetch(`/api/storage/file/${encodeURIComponent(N.storedFileName)}`);if(!R.ok)return console.error(`Failed to fetch file for unified analysis: ${N.name} (Status: ${R.status})`),null;const I=await R.blob(),H=I.type||(N.type==="image"?"image/png":N.type==="audio"?"audio/mpeg":N.type==="video"?"video/mp4":"text/plain");return new File([I],N.name,{type:H})}catch(R){return console.error(`Error retrieving file for unified analysis: ${N.name}`,R),null}};let y=[],p=`--- START OF CONTEXT ---
`;o&&(p+=`**User's Testimony:**
${o}

`),l&&(p+=`**PAST EVIDENCE SUMMARY (Use this to find patterns and connections):**
${l}

`),p+=`**Unified Case Context:**
`,i.forEach((N,R)=>{const I=N.location?` @ ${N.location}`:"";p+=`- File ${R+1}: ${N.name}${I}
`}),p+=`--- END OF CONTEXT ---

`;let x=`${p}Analyze ALL provided files together as a SINGLE CASE. Your output must synthesize combined content and context from the full batch, surfacing connections, contradictions, and timelines that only appear when the files are considered together.

CRITICAL REQUIREMENTS:

1. Treat every file as part of one case; DO NOT produce separate mini-reports.

2. Build a unified timeline across all files. Reference file names and timestamps where helpful.

3. Populate 'crossReferences' using connections between the batch items as well as past evidence.

4. Maintain all standard requirements (timestamps, recognition, childrenDetected, etc.).

5. Be concise, factual, and avoid speculation.

6. **CRITICAL:** If you do not find specific evidence for a category (e.g., no children, no employees, no violations), return an empty array or false. DO NOT HALLUCINATE connections that do not exist.
`;r&&(x+=`
**User's Additional Instructions:** ${r}
`),t.length>0&&(x+=`
**EMPLOYEE PROFILES FOR RECOGNITION:**
`,t.forEach(N=>{x+=`- Name: ${N.name}, User Details: ${N.details}, AI Description: ${N.aiEnhancedDetails||"N/A"}
`}));const S=t.filter(N=>N.referenceImage||N.referenceImagePath);if(S.length>0){x+=`
Here are reference images for the employees. Use them for identification.
`;for(const N of S){let R=null;N.referenceImage?R={base64:N.referenceImage.base64,mimeType:N.referenceImage.mimeType}:N.referenceImagePath&&(R=await iy(N.referenceImagePath)),R&&(y.push({text:`Reference image for ${N.name}:`}),y.push({inlineData:{mimeType:R.mimeType,data:R.base64}}))}}const E=async(N,R)=>{const I=await m(N);if(!I){console.warn(`Skipping file attachment for ${R} because it could not be loaded.`);return}if(N.type==="image"){const H=await di(I);y.push({text:`${R} image:`}),y.push({inlineData:{mimeType:I.type,data:H}})}else if(N.type==="video"){let H=[];try{H=await hc(I,16)}catch(V){console.warn(`Failed to extract frames for ${R}`,V)}if(H&&H.length>0)y.push({text:`${R} video frames:`}),y.push(...H.map(V=>({inlineData:{mimeType:V.mimeType,data:V.base64}})));else{const V=await di(I);y.push({text:`${R} raw video:`}),y.push({inlineData:{mimeType:I.type||"video/mp4",data:V}})}}else if(N.type==="audio"){const H=await di(I);y.push({text:`${R} audio:`}),y.push({inlineData:{mimeType:I.type,data:H}})}else if(N.type==="document"){const H=await ny(I);y.push({text:`

**${R} DOCUMENT CONTENT:**
${H}`})}};y.unshift({text:x});for(const N of i)await E(N,N.name);const A=await h.generateContent({model:c,contents:{parts:y},config:{...zl,systemInstruction:ly,responseMimeType:"application/json",responseSchema:sy}}),D=bc(A.text||"{}");try{const N=JSON.parse(D);return oy(N)}catch{throw console.error("Failed to parse unified analysis result:",D),new Error("The analysis failed to produce valid JSON output.")}}async function fg(i,t){var p,x,S,E;const l=Ui,o=Ll.models,r=t?x_:v_,c=t?`${t}

Based on the entire case context provided above, please answer the following question:

${i}`:i,h=await o.generateContent({model:l,contents:{parts:[{text:c}]},config:{...zl,tools:[{googleSearch:{}}],systemInstruction:r}});let m=h.text||"";const y=((E=(S=(x=(p=h.candidates)==null?void 0:p[0])==null?void 0:x.groundingMetadata)==null?void 0:S.groundingChunks)==null?void 0:E.map(A=>{var D;return(D=A.web)==null?void 0:D.uri}).filter(Boolean))??[];return y.length>0&&(m+=`

**Sources:**
`+[...new Set(y)].map(A=>`- ${A}`).join(`
`)),m+=`

---
*This information is for educational purposes only and does not constitute legal advice. You should consult with a qualified legal professional for advice regarding your individual situation.*`,m}async function C_(i){const t=Ui,l=Ll.models,o=i.filter(y=>y.status==="analyzed"&&y.analysis);if(o.length<1)throw new Error("Not enough analyzed evidence to generate a map.");let r=`--- START OF ANALYZED EVIDENCE ---
`;o.forEach(y=>{r+=`
File Name: ${y.name}
File Type: ${y.type}
Recognized Employees: ${y.analysis.recognizedEmployees.map(p=>p.name).join(", ")||"None"}
Timeline Events:
${y.analysis.timelineEvents.map(p=>`- [${p.timestamp}] ${p.description} (Subjects: ${p.subjects.join(", ")})`).join(`
`)}
---
`}),r+=`--- END OF ANALYZED EVIDENCE ---

`;const c=`${r}
You are a forensic analyst and relationship mapping expert. Your task is to synthesize all the provided evidence into a structured relationship map.

**Instructions:**
1.  **Identify Nodes:** Identify every unique person mentioned as a "Subject" in the timeline events or in "Recognized Employees". These are your nodes.
2.  **Establish Links:** For every pair of people who interact in an event, create a link.
3.  **Analyze Links:** For each link (pair of people):
    a. Count the total number of interactions they have across all files. This is 'value'.
    b. Summarize the a summary of their relationship based on all their interactions.
    c. Determine the overall 'sentiment' of their interactions ('positive', 'negative', 'neutral', 'mixed').
    d. Compile a list of all specific interactions, including the file name, timestamp, and a description of the event.
4.  **Overall Summary:** Provide a high-level summary of the case dynamics, pointing out key relationships, patterns of isolation, or conflicts.
5.  **Output:** Return the data strictly in the provided JSON schema. Ensure all fields are populated correctly. The names in 'source', 'target', and 'nodes' must match exactly.
`,h=await l.generateContent({model:t,contents:{parts:[{text:c}]},config:{...zl,systemInstruction:"You are an AI assistant that synthesizes complex information into a structured JSON relationship map.",responseMimeType:"application/json",responseSchema:S_}}),m=bc(h.text||"{}");try{return JSON.parse(m)}catch{throw console.error("Failed to parse relationship map result:",m),new Error("The relationship map failed to produce valid JSON output.")}}const A_=({view:i,onViewChange:t,hasAnalyzedFiles:l})=>{const o=({label:r,isActive:c,onClick:h,icon:m,disabled:y})=>v.jsxs("button",{onClick:h,disabled:y,className:`flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-md transition-colors ${c?"bg-teal-600 text-white":"text-gray-300 hover:bg-gray-700 disabled:text-gray-500 disabled:hover:bg-transparent disabled:cursor-not-allowed"}`,title:y?"Analyze at least one file to enable the dashboard":"",children:[m,v.jsx("span",{children:r})]});return v.jsxs("header",{className:"bg-gray-800 p-4 border-b border-gray-700 shadow-md flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("h1",{className:"text-2xl font-bold text-teal-400",children:"AI Evidence Companion"}),v.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-700 text-teal-200 border border-gray-600",children:Ui})]}),v.jsx("p",{className:"text-sm text-gray-400",children:"Your private, objective partner in analyzing multimedia evidence."})]}),v.jsx("div",{className:"flex items-center space-x-4",children:v.jsxs("div",{className:"flex items-center space-x-2 p-1 bg-gray-900 rounded-lg",children:[v.jsx(o,{label:"Evidence Chat",isActive:i==="chat",onClick:()=>t("chat"),icon:v.jsx(Wv,{className:"h-5 w-5"})}),v.jsx(o,{label:"Case Dashboard",isActive:i==="dashboard",onClick:()=>t("dashboard"),icon:v.jsx(bg,{className:"h-5 w-5"}),disabled:!l}),v.jsx(o,{label:"Legal Q&A",isActive:i==="qa",onClick:()=>t("qa"),icon:v.jsx(ex,{className:"h-5 w-5"})}),v.jsx(o,{label:"About",isActive:i==="about",onClick:()=>t("about"),icon:v.jsx(tx,{className:"h-5 w-5"})})]})})]})},__="modulepreload",N_=function(i){return"/Evidence/"+i},pg={},ay=function(t,l,o){let r=Promise.resolve();if(l&&l.length>0){let h=function(p){return Promise.all(p.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));r=h(l.map(p=>{if(p=N_(p),p in pg)return;pg[p]=!0;const x=p.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const E=document.createElement("link");if(E.rel=x?"stylesheet":__,x||(E.as="script"),E.crossOrigin="",E.href=p,y&&E.setAttribute("nonce",y),document.head.appendChild(E),x)return new Promise((A,D)=>{E.addEventListener("load",A),E.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return r.then(h=>{for(const m of h||[])m.status==="rejected"&&c(m.reason);return t().catch(c)})},wa=({className:i})=>v.jsxs("svg",{className:`animate-spin ${i||"h-5 w-5"}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w_=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),ry=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),bl=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),uy=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:i||"h-4 w-4",children:v.jsx("path",{d:"M3 5a2 2 0 012-2h4l2 2h6a2 2 0 012 2v2H7.236a2 2 0 00-1.79 1.106L3 16.118V5zm18 6H8.618l-3.2 6.4A2 2 0 007.236 19H19a2 2 0 001.789-1.106L22 13a2 2 0 00-1-2z"})}),Gn={"Content-Type":"application/json"},cy="averybee24601/Evidence",b_="main",R_=`https://api.github.com/repos/${cy}/contents`,Rc=`https://raw.githubusercontent.com/${cy}/${b_}`,tc=async()=>{const i=window.prompt("Enter password to perform this action:");return!i||!i.trim()?null:i.trim()};async function M_(i){const t=await di(i),l=await fetch("/api/storage/upload",{method:"POST",headers:Gn,body:JSON.stringify({fileName:i.name,fileData:t})});if(!l.ok){const o=await l.text();throw new Error(o||"Failed to save uploaded file.")}return l.json()}async function I_(i,t,l){const o=await fetch("/api/storage/analysis",{method:"POST",headers:Gn,body:JSON.stringify({originalFileName:i,storedFileName:t,analysis:l})});if(!o.ok){const r=await o.text();throw new Error(r||"Failed to save analysis document.")}return o.json()}async function nc(i,t,l,o){const r=await fetch("/api/storage/analysis",{method:"POST",headers:Gn,body:JSON.stringify({originalFileNames:i,storedFileNames:t,combinedName:l,analysis:o})});if(!r.ok){const c=await r.text();throw new Error(c||"Failed to save unified analysis document.")}return r.json()}async function ic(i){const t=await fetch("/api/storage/evidence-delete",{method:"POST",headers:Gn,body:JSON.stringify(i)});if(!t.ok){const l=await t.text();throw new Error(l||"Failed to delete evidence.")}return t.json()}async function D_(i){const t=await fetch("/api/storage/evidence-rename",{method:"POST",headers:Gn,body:JSON.stringify(i)});if(!t.ok){const l=await t.text();throw new Error(l||"Failed to rename evidence.")}return t.json()}async function mc(i){const t=await fetch("/api/storage/reveal",{method:"POST",headers:Gn,body:JSON.stringify(i)});if(!t.ok){const l=await t.text();throw new Error(l||"Failed to reveal file location.")}}async function lc(i){const t=await fetch("/api/storage/profile",{method:"POST",headers:Gn,body:JSON.stringify({employee:i})});if(!t.ok){const l=await t.text();throw new Error(l||"Failed to save profile.")}return t.json()}async function k_(){try{const l=await z_();if(l.length>0)return l}catch(l){console.warn("Failed to list profiles from GitHub, falling back to local:",l)}const i=await fetch("/api/storage/profiles",{method:"GET"});if(!i.ok){const l=await i.text();throw new Error(l||"Failed to list profiles.")}const t=await i.json();return(t==null?void 0:t.profiles)||[]}async function U_(i,t){const l=await fetch("/api/storage/profile-delete",{method:"POST",headers:Gn,body:JSON.stringify({jsonPath:i,baseName:t})});if(!l.ok){const o=await l.text();throw new Error(o||"Failed to delete profile.")}}async function hg(i){const t=await fetch("/api/storage/testimony",{method:"POST",headers:Gn,body:JSON.stringify(i)});if(!t.ok){const l=await t.text();throw new Error(l||"Failed to save testimony.")}return t.json()}async function Hs(i){const t=await fetch(`${R_}/${i}`);if(!t.ok){if(t.status===404)return[];throw new Error(`Failed to fetch GitHub dir: ${i}`)}return t.json()}async function dy(i){const t=i.split("/").map(encodeURIComponent).join("/"),l=`${Rc}/${t}`,o=await fetch(l);if(!o.ok)throw new Error(`Failed to fetch file: ${l}`);return o.text()}function L_(i){const t=i.toLowerCase().split(".").pop();return["jpg","jpeg","png","gif","webp"].includes(t||"")?"image":["mp4","mov","webm","mkv","avi"].includes(t||"")?"video":["mp3","wav","m4a","ogg"].includes(t||"")?"audio":"document"}async function z_(){const i=[],t=async l=>{const o=await Hs(`app/data/${l}`),r=o.filter(c=>c.name.toLowerCase().endsWith(".profile.json"));for(const c of r)try{const h=await dy(c.path),m=JSON.parse(h),y=c.name.replace(/\.profile\.json$/i,""),p=o.find(S=>S.name.startsWith(`${y}.reference.`)),x=p?`app/data/${l}/${p.name}`:void 0;i.push({id:`emp-${y}`,name:m.name||y,details:m.description||"",aiEnhancedDetails:m.aiEnhancedDetails||void 0,referenceUrl:m.referenceUrl||void 0,referenceImagePath:x,profileJsonPath:c.path,status:"ready"})}catch(h){console.error(`Error parsing profile ${c.name}:`,h)}};return await Promise.all([t("profiles").catch(()=>{}),t("Profiles").catch(()=>{})]),i.map(l=>{if(l.referenceImagePath){const o=l.referenceImagePath.split("/").map(encodeURIComponent).join("/");return{...l,referenceImagePath:`${Rc}/${o}`}}return l})}async function P_(){const i=[],[t,l,o,r]=await Promise.all([Hs("app/data/analyzed files").catch(()=>[]),Hs("app/data/Unified files").catch(()=>[]),Hs("app/data/analysis reports").catch(()=>[]),Hs("app/data/Unified analysis reports").catch(()=>[])]),c=[...t,...l],h=[...o,...r];for(const m of c){if(m.name.startsWith("."))continue;const y=L_(m.name),p=m.path.split("/").map(encodeURIComponent).join("/"),x=`${Rc}/${p}`,S={id:`gh-${m.sha}`,name:m.name,type:y,url:x,file:new File([],m.name,{type:"application/octet-stream"}),status:"new",storedFileName:m.name,storedFilePath:m.path,analysisDocuments:[]},E=m.name;E.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\$&");const A=h.filter(D=>D.name.startsWith(`Analysis of ${E}`)&&D.name.endsWith(".txt"));if(A.length>0){const D=A.sort((N,R)=>R.name.localeCompare(N.name))[0];try{const N=await dy(D.path),R=q_(N);S.status="analyzed",S.analysis=R,S.recognitionVerified=!0}catch(N){console.error(`Failed to load report ${D.name}`,N)}S.analysisDocuments=A.map(N=>N.path)}i.push(S)}return{evidenceFiles:i,evidenceCases:[]}}function q_(i){const t=r=>{const c=new RegExp(`${r}:\\s*([\\s\\S]*?)(?=\\n[A-Z][a-z ]+:|$)`,"i"),h=i.match(c);return h?h[1].trim():""},l=r=>{const c=i.indexOf(r);if(c===-1)return[];const h=i.indexOf(`

`,c);return i.substring(c+r.length,h===-1?void 0:h).split(`
`).filter(y=>y.trim().startsWith("-")).map(y=>y.trim().replace(/^- \[.*?\] /,"").replace(/^- /,""))},o=r=>{const c=i.indexOf(r);if(c===-1)return[];let h=i.indexOf(`

`,c);return h===-1&&(h=i.length),i.substring(c+r.length,h).split(`
`).filter(y=>y.trim().startsWith("-")).map(y=>{const p=y.match(/^- \[(.*?)\] (.*)/);return p?{timestamp:p[1],description:p[2]}:{timestamp:"N/A",description:y.replace(/^- /,"")}})};return{summary:t("Summary"),newFindingsSummary:t("New Findings Summary"),confidenceScore:parseInt(t("Confidence Score").replace("%",""))||0,severityScore:parseInt(t("Severity Score"))||0,childrenDetected:t("Children Detected").toLowerCase()==="yes",keyObservations:o("Key Observations:"),timelineEvents:o("Timeline Events:"),crossReferences:l("Cross-References:").map(r=>({fileName:"Ref",observation:r})),emotionalAnalysis:l("Emotional Analysis:").map(r=>{const c=r.split(":");return{emotion:c[0]||"Unknown",evidence:c.slice(1).join(":").trim()}}),recognizedEmployees:l("Recognized Employees:").map(r=>{const c=r.match(/^(.*?) \(at (.*?)\) - (\d+)%/);return c?{name:c[1],timestamp:c[2],confidence:parseInt(c[3])}:{name:r,timestamp:"0:00",confidence:0}}),potentialViolations:l("Potential Violations:"),fullTranscript:t("Full Transcript")}}const H_=({type:i})=>{switch(i){case"image":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-400 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"video":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-purple-400 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 001.553.832l3-2a1 1 0 000-1.664l-3-2z"})});case"audio":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-green-400 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})});case"document":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-yellow-400 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V8a2 2 0 00-2-2h-5L9 4H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z",clipRule:"evenodd"})});default:return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-gray-400 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V8a2 2 0 00-2-2h-5L9 4H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z",clipRule:"evenodd"})})}},G_=({status:i})=>{switch(i){case"analyzing":return v.jsx(wa,{className:"h-4 w-4 text-teal-400"});case"analyzed-pending-review":case"analyzed":return v.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500",title:"Analyzed"});case"error":return v.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500",title:"Error"});case"new":default:return v.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-500",title:"New"})}},V_=({file:i,isSelected:t,onSelect:l,onDelete:o,onRename:r})=>{const c="p-2 transition-colors duration-200 w-full text-left group rounded-lg flex items-center",h="bg-teal-700 text-white",m="hover:bg-gray-700",y=!!i.file,p=async I=>{if(I.stopPropagation(),!y&&i.analysis){const H=ug(i),V=new Blob([H],{type:"text/plain;charset=utf-8"}),B=URL.createObjectURL(V),Y=document.createElement("a");Y.href=B,Y.download=`Analysis Report - ${i.name}.txt`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(B);return}if(y&&i.analysis&&i.file){try{const H=(await ay(async()=>{const{default:ae}=await import("./jszip.min-CNR1kY_t.js").then(te=>te.j);return{default:ae}},[])).default,V=new H;V.file(i.name,i.file);const B=ug(i),Y=`Analysis Report - ${i.name}.txt`;V.file(Y,B);const ee=await V.generateAsync({type:"blob"}),ne=`Evidence Package - ${i.name}.zip`,he=document.createElement("a");he.href=URL.createObjectURL(ee),he.download=ne,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(he.href)}catch(H){console.error("Error creating zip file:",H),alert("Could not create the download package. Please try again.")}return}if(y&&i.url){const H=document.createElement("a");H.href=i.url,H.download=i.name,document.body.appendChild(H),H.click(),document.body.removeChild(H)}},x=I=>{I.stopPropagation();const H=i.url||(i.storedFileName?`/api/storage/file/${encodeURIComponent(i.storedFileName)}`:void 0);if(!H){alert("Source file not available. Re-upload to preview.");return}window.open(H,"_blank","noopener,noreferrer")},S=I=>{I.stopPropagation(),window.confirm(`Are you sure you want to permanently delete "${i.name}"? This action cannot be undone.`)&&o(i.id)},E=I=>{I.stopPropagation(),(i.storedFileName||i.name).split(".").pop();const V=i.storedFileName||i.name,B=window.prompt("Enter new file name",V||"");if(!B)return;const Y=B.trim();Y&&r(i.id,Y)},A=async I=>{I.stopPropagation();const H=i.storedFilePath||(i.storedFileName?`app/data/analyzed files/${i.storedFileName}`:void 0);if(!H){alert("This item is not saved on disk yet.");return}try{await mc({relativePath:H})}catch(V){console.error("Failed to reveal file:",V),alert((V==null?void 0:V.message)||"Unable to reveal file location.")}},D=async I=>{I.stopPropagation();const H=i.analysisDocuments||[],V=H.length>0?H[H.length-1]:void 0;if(!V){alert("No analysis report has been saved for this item yet.");return}try{await mc({relativePath:V})}catch(B){console.error("Failed to reveal report:",B),alert((B==null?void 0:B.message)||"Unable to reveal report location.")}},N=y?i.analysis?"Download file & analysis (.zip)":"Download original file":i.analysis?"Download analysis report only":"Source file not available",R=`SHA-256: ${i.hash||"Not calculated"}${y?"":`
(Source file needs to be re-uploaded for preview/re-analysis)`}`;return v.jsxs("div",{onClick:()=>l(i.id),className:`${c} ${t?h:m} cursor-pointer`,title:R,children:[v.jsx(H_,{type:i.type}),v.jsx("span",{className:"truncate text-sm flex-grow",children:i.name}),v.jsxs("div",{className:"ml-2 flex-shrink-0 flex items-center space-x-2",children:[v.jsx("button",{onClick:A,title:"Reveal analyzed file in folder",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity",children:v.jsx(uy,{className:"h-4 w-4"})}),v.jsx("button",{onClick:D,title:"Reveal analysis report in folder",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity",children:v.jsx(bl,{className:"h-4 w-4"})}),v.jsx("button",{onClick:x,title:"Open in new tab",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-4 w-4",children:v.jsx("path",{d:"M12 5c-5 0-9.27 3.11-11 7 1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7zm0 12a5 5 0 110-10 5 5 0 010 10zm0-2a3 3 0 100-6 3 3 0 000 6z"})})}),v.jsx("button",{onClick:p,title:N,disabled:!y&&!i.analysis,className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity disabled:opacity-20 disabled:cursor-not-allowed",children:!y&&i.analysis?v.jsx(bl,{className:"h-4 w-4"}):v.jsx(w_,{className:"h-4 w-4"})}),v.jsx("button",{onClick:S,title:"Delete file",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-red-400 transition-opacity",children:v.jsx(ry,{className:"h-4 w-4"})}),v.jsx("button",{onClick:E,title:"Rename file",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:v.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-9.193 9.193a1 1 0 01-.293.195l-3 1a1 1 0 01-1.265-1.265l1-3a1 1 0 01.195-.293l9.193-9.193zM12.172 5L4 13.172V16h2.828L15 7.828 12.172 5z"})})}),v.jsx(G_,{status:i.status})]})]})},B_=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"})}),F_=({caseItem:i,files:t,onSelect:l,onDelete:o,onAppend:r})=>{const c=i.fileIds.map(x=>t.find(S=>S.id===x)).filter(x=>!!x),h=x=>{if(x.stopPropagation(),c.length===0){alert("Source files not available.");return}const S=A=>A.url||(A.storedFileName?`/api/storage/file/${encodeURIComponent(A.storedFileName)}`:void 0),E=c.map(A=>({file:A,url:S(A)})).filter(A=>!!A.url);if(E.length===0){alert("None of the original files are available. Re-upload to preview.");return}try{const A=window.open("","_blank","noopener,noreferrer,width=1200,height=800");if(!A){alert("Popup blocked. Please allow popups for this site to view unified files.");return}const D=E.map(({file:R,url:I})=>`
			<div class="card">
				<div class="title">${R.name}</div>
				<iframe class="frame" src="${I}" sandbox="allow-same-origin allow-scripts"></iframe>
			</div>`).join(""),N=`<!DOCTYPE html>
	<html>
	<head>
	<meta charset="utf-8" />
	<title>${i.name} - Comparison</title>
	<style>
	html, body { margin:0; padding:0; height:100%; background:#0f172a; color:#e5e7eb; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; }
	.bar { padding:10px 14px; background:#111827; border-bottom:1px solid #374151; font-size:14px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:8px;}
	.grid { display:grid; height:calc(100% - 46px); grid-template-columns:repeat(auto-fit, minmax(320px, 1fr)); gap:12px; padding:12px; box-sizing:border-box; }
	.card { border:1px solid #374151; border-radius:8px; background:#111827; display:flex; flex-direction:column; min-height:0; }
	.title { padding:8px 12px; font-weight:600; font-size:13px; border-bottom:1px solid #374151; }
	.frame { flex:1; width:100%; min-height:240px; border:0; background:#0f172a; border-bottom-left-radius:8px; border-bottom-right-radius:8px; }
	</style>
	</head>
	<body>
		<div class="bar">
			<div>Unified view: ${i.name}</div>
			<div style="opacity:.8;font-size:12px">${E.length} file${E.length===1?"":"s"} loaded</div>
		</div>
		<div class="grid">${D}</div>
	</body>
	</html>`;A.document.open(),A.document.write(N),A.document.close()}catch(A){console.error("Failed to open unified view:",A),alert("An error occurred while trying to open the unified view.")}},m=async x=>{if(x.stopPropagation(),c.length===0){alert("Source files not available.");return}try{const S=(await ay(async()=>{const{default:I}=await import("./jszip.min-CNR1kY_t.js").then(H=>H.j);return{default:I}},[])).default,E=new S,A=async I=>{if(I.file)E.file(I.name,I.file);else if(I.storedFileName){const H=await fetch(`/api/storage/file/${encodeURIComponent(I.storedFileName)}`);if(H.ok){const V=await H.blob();E.file(I.name,V)}}};for(const I of c)await A(I);if(i.analysisDocumentFileName){const I=await fetch(`/api/storage/file/${encodeURIComponent(i.analysisDocumentFileName)}`);if(I.ok){const H=await I.blob(),V=`Analysis - ${i.name}.txt`;E.file(V,H)}}const D=await E.generateAsync({type:"blob"}),N=`Evidence Package - ${i.name}.zip`,R=document.createElement("a");R.href=URL.createObjectURL(D),R.download=N,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(R.href)}catch(S){console.error("Error preparing download:",S),alert("Could not create the unified download package. Please try again.")}},y=async x=>{x.stopPropagation();const S=i.analysisDocumentPath||(i.analysisDocumentFileName?`app/data/analysis reports/${i.analysisDocumentFileName}`:void 0);if(!S){alert("No saved unified analysis report to reveal yet.");return}try{await mc({relativePath:S})}catch(E){console.error("Failed to reveal unified report:",E),alert((E==null?void 0:E.message)||"Unable to reveal report location.")}},p=v.jsx("div",{className:"ml-2 h-3 w-3 rounded-full",style:{backgroundColor:i.status==="analyzing"?"#f59e0b":i.status==="analyzed"?"#10b981":i.status==="error"?"#ef4444":"#6b7280"},title:i.status});return v.jsxs("div",{title:i.name,className:"p-2 transition-colors duration-200 w-full text-left group rounded-lg flex items-center hover:bg-gray-700 cursor-pointer",onClick:()=>l&&l(i.id),children:[v.jsxs("div",{className:"flex flex-col flex-grow",children:[v.jsx("span",{className:"truncate text-sm",children:i.name}),v.jsxs("span",{className:"text-xs text-gray-500",children:[i.fileIds.length," file",i.fileIds.length===1?"":"s"]})]}),v.jsxs("div",{className:"ml-2 flex-shrink-0 flex items-center space-x-2",children:[r&&v.jsx("button",{onClick:x=>{x.stopPropagation(),r(i.id)},title:"Append files and re-run unified analysis",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-teal-400 hover:text-teal-300 transition-opacity",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-4 w-4",children:v.jsx("path",{d:"M13 11h6v2h-6v6h-2v-6H5v-2h6V5h2v6z"})})}),v.jsx("button",{onClick:h,title:"Open both files side-by-side",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-4 w-4",children:v.jsx("path",{d:"M12 5c-5 0-9.27 3.11-11 7 1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7zm0 12a5 5 0 110-10 5 5 0 010 10zm0-2a3 3 0 100-6 3 3 0 000 6z"})})}),v.jsx("button",{onClick:m,title:"Download originals + unified analysis",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity",children:v.jsx(B_,{className:"h-4 w-4"})}),v.jsx("button",{onClick:y,title:"Reveal unified analysis report in folder",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-gray-400 hover:text-white transition-opacity",children:v.jsx(uy,{className:"h-4 w-4"})}),o&&v.jsx("button",{onClick:x=>{x.stopPropagation(),o(i.id)},title:"Delete this unified analysis",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 text-red-400 hover:text-red-300 transition-opacity",children:v.jsx(ry,{className:"h-4 w-4"})}),p]})]})},fy=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 16.5l2 2 4-4m-6-4.5a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0zM18 18.5A4.5 4.5 0 0013.5 14H10.5A4.5 4.5 0 006 18.5V21h12v-2.5z"})}),O_=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Y_=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),$_=280,J_=200,mg=i=>typeof i=="number"?i:i==="auto"?400:parseInt(i,10)||400,ba=({isOpen:i,onClose:t,title:l,children:o,initialSize:r={width:500,height:400},initialPosition:c={x:100,y:100},isResizable:h=!0})=>{const[m,y]=Q.useState(c),[p,x]=Q.useState({width:mg(r.width),height:mg(r.height)}),[S,E]=Q.useState(!1),[A,D]=Q.useState(!1),N=Q.useRef({startX:0,startY:0,startLeft:0,startTop:0,startWidth:0,startHeight:0,handle:""}),[R,I]=Q.useState(10),[H,V]=Q.useState(!1),B=Q.useCallback(()=>{const te=document.querySelectorAll(".draggable-frame");let re=9;te.forEach(me=>{const Ie=parseInt(me.style.zIndex)||0;Ie>re&&(re=Ie)}),I(re+1)},[]);Q.useEffect(()=>{i&&B()},[i,B]);const Y=te=>{te.target.closest("button")||(te.preventDefault(),B(),E(!0),N.current={...N.current,startX:te.clientX,startY:te.clientY,startLeft:m.x,startTop:m.y})},ee=(te,re)=>{te.preventDefault(),te.stopPropagation(),B(),D(!0),N.current={startX:te.clientX,startY:te.clientY,startLeft:m.x,startTop:m.y,startWidth:p.width,startHeight:p.height,handle:re}},ne=Q.useCallback(te=>{if(S){const re=N.current.startLeft+te.clientX-N.current.startX,me=N.current.startTop+te.clientY-N.current.startY;y({x:re,y:me})}else if(A){const{startX:re,startY:me,startLeft:Ie,startTop:ie,startWidth:ce,startHeight:U,handle:Z}=N.current;let de=ce,_e=U,Re=Ie,_=ie;Z.includes("e")&&(de=ce+(te.clientX-re)),Z.includes("w")&&(de=ce-(te.clientX-re)),Z.includes("s")&&(_e=U+(te.clientY-me)),Z.includes("n")&&(_e=U-(te.clientY-me));const q=Math.max(de,$_),W=Math.max(_e,J_);Z.includes("w")&&(Re=Ie+(ce-q)),Z.includes("n")&&(_=ie+(U-W)),y({x:Re,y:_}),x({width:q,height:W})}},[S,A]),he=Q.useCallback(()=>{E(!1),D(!1)},[]);if(Q.useEffect(()=>(window.addEventListener("mousemove",ne),window.addEventListener("mouseup",he),()=>{window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",he)}),[ne,he]),!i)return null;const ae=["n","s","e","w","ne","nw","se","sw"];return v.jsxs("div",{className:"draggable-frame fixed bg-gray-800 border border-gray-600 rounded-lg shadow-2xl flex flex-col overflow-hidden transition-opacity duration-200",style:{left:`${m.x}px`,top:`${m.y}px`,width:`${p.width}px`,height:H?"auto":`${p.height}px`,zIndex:R},onMouseDown:B,children:[v.jsxs("header",{className:"bg-gray-700 h-8 flex items-center justify-between px-2 cursor-move flex-shrink-0",onMouseDown:Y,children:[v.jsx("span",{className:"text-xs font-bold text-gray-300 truncate",children:l}),v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx("button",{onClick:()=>V(!H),className:"p-1 rounded-full hover:bg-gray-600 text-gray-400",children:v.jsx(Y_,{className:"h-3 w-3"})}),v.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-red-500 text-gray-400 hover:text-white",children:v.jsx(O_,{className:"h-3 w-3"})})]})]}),v.jsx("div",{className:`flex-grow overflow-auto ${H?"hidden":""}`,children:o}),h&&!H&&ae.map(te=>v.jsx("div",{className:`absolute resize-handle-${te}`,onMouseDown:re=>ee(re,te)},te))]})},X_=({isOpen:i,onClose:t,onSave:l,employeeToEdit:o})=>{const[r,c]=Q.useState(""),[h,m]=Q.useState(""),[y,p]=Q.useState(""),[x,S]=Q.useState(null),E=Q.useRef(null),A=!!o;if(Q.useEffect(()=>{i&&(A?(c(o.name),m(o.details),p(o.referenceUrl||""),S(null)):(c(""),m(""),p(""),S(null),E.current&&(E.current.value="")))},[i,o,A]),!i)return null;const D=async()=>{if(r.trim()&&h.trim()){let R;x&&(R={base64:await di(x),mimeType:x.type}),l({name:r.trim(),details:h.trim(),referenceUrl:y.trim()||void 0,referenceImage:R},o==null?void 0:o.id)}},N=A?"Edit Employee Profile":"Add Employee Profile";return v.jsx(ba,{isOpen:i,onClose:t,title:N,initialPosition:{x:window.innerWidth-550,y:100},initialSize:{width:512,height:"auto"},children:v.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl h-full flex flex-col",children:[v.jsxs("div",{className:"space-y-3 text-sm flex-grow",children:[v.jsx("input",{type:"text",value:r,onChange:R=>c(R.target.value),placeholder:"* Employee Name",className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500"}),v.jsx("textarea",{value:h,onChange:R=>m(R.target.value),placeholder:"* Details (appearance, disability, etc.)",className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 resize-y",rows:3}),v.jsx("input",{type:"url",value:y,onChange:R=>p(R.target.value),placeholder:"Reference URL (optional, e.g., social media)",className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",disabled:A,title:A?"Reference URL cannot be changed after initial research.":""}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs("label",{className:`flex-grow text-xs p-2 rounded-md truncate ${A?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-700 text-gray-400 cursor-pointer hover:bg-gray-600"}`,children:[x?x.name:"Reference Image (optional)",v.jsx("input",{type:"file",accept:"image/*",ref:E,onChange:R=>{var I;return S(((I=R.target.files)==null?void 0:I[0])||null)},className:"hidden",disabled:A})]}),x&&v.jsx("button",{onClick:()=>{S(null),E.current&&(E.current.value="")},className:"text-red-400 text-xs",children:" clear"})]}),A&&v.jsx("p",{className:"text-xs text-gray-500 italic",children:"Reference URL and Image cannot be changed after an employee has been researched. To use new reference material, please delete and re-add the profile."})]}),v.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[v.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors",children:"Cancel"}),v.jsx("button",{onClick:D,disabled:!r.trim()||!h.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-500 rounded-md transition-colors disabled:bg-gray-500",children:A?"Save Changes":"Add & Research"})]})]})})},K_=({status:i})=>{switch(i){case"researching":return v.jsxs("div",{className:"flex items-center text-xs text-teal-400",children:[v.jsx(wa,{className:"h-3 w-3 mr-1"})," AI researching..."]});case"ready":return v.jsxs("div",{className:"flex items-center text-xs text-green-400",children:[v.jsx(fy,{className:"h-3 w-3 mr-1"})," AI Ready"]});case"error":return v.jsx("div",{className:"text-xs text-red-400",children:"Error during research"});default:return v.jsx("div",{className:"text-xs text-gray-400",children:"New"})}},Q_=({isOpen:i,employee:t,onClose:l,onEdit:o,onDelete:r})=>!i||!t?null:v.jsx(ba,{isOpen:i,onClose:l,title:`Profile: ${t.name}`,initialPosition:{x:window.innerWidth-500,y:150},initialSize:{width:480,height:"auto"},children:v.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl h-full flex flex-col",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsx("h2",{className:"text-xl font-bold text-teal-400",children:t.name}),v.jsx(K_,{status:t.status})]}),v.jsxs("div",{className:"mt-4 space-y-4 text-sm flex-grow overflow-y-auto pr-2",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-gray-400 text-xs uppercase mb-1",children:"User-Provided Details"}),v.jsx("p",{className:"text-gray-200 bg-gray-700/50 p-2 rounded-md",children:t.details})]}),t.aiEnhancedDetails&&v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-gray-400 text-xs uppercase mb-1",children:"AI-Enhanced Description"}),v.jsx("p",{className:"text-gray-300 italic bg-gray-700/50 p-2 rounded-md",children:t.aiEnhancedDetails})]}),t.referenceUrl&&v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-gray-400 text-xs uppercase mb-1",children:"Reference URL"}),v.jsx("a",{href:t.referenceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-teal-400 hover:underline break-all",children:t.referenceUrl})]}),t.referenceImage&&v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-gray-400 text-xs uppercase mb-1",children:"Reference Image"}),v.jsx("img",{src:`data:${t.referenceImage.mimeType};base64,${t.referenceImage.base64}`,alt:`Reference for ${t.name}`,className:"max-h-40 rounded-md"})]})]}),v.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[v.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors",children:"Close"}),v.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-500 rounded-md transition-colors",children:"Edit"}),v.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 rounded-md transition-colors",children:"Delete"})]})]})}),py=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),j_=({status:i})=>{switch(i){case"researching":return v.jsxs("div",{className:"flex items-center text-xs text-teal-400",children:[v.jsx(wa,{className:"h-3 w-3 mr-1"})," researching..."]});case"ready":return v.jsxs("div",{className:"flex items-center text-xs text-green-400",children:[v.jsx(fy,{className:"h-3 w-3 mr-1"})," AI Ready"]});case"error":return v.jsx("div",{className:"text-xs text-red-400",children:"Error"});default:return v.jsx("div",{className:"text-xs text-gray-400",children:"New"})}},Z_=({employees:i,onAddEmployee:t,onUpdateEmployee:l,onSetEmployees:o,onDeleteEmployee:r})=>{const[c,h]=Q.useState(!1),[m,y]=Q.useState(!1),[p,x]=Q.useState(null),S=14,E=i.length<S,[A,D]=Q.useState(!1),N=()=>{x(null),h(!0)},R=B=>{x(B),y(!0)},I=B=>{x(B),y(!1),h(!0)},H=B=>{window.confirm("Are you sure you want to permanently delete this employee profile from disk?")&&(r(B),y(!1),x(null))},V=(B,Y)=>{Y?l(Y,{name:B.name,details:B.details}):t(B),h(!1)};return v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:["Employee Profiles (Max ",S,")"]}),v.jsx("button",{onClick:()=>D(!A),className:"text-xs text-gray-300 hover:text-white",title:A?"Expand":"Collapse",children:A?"Show":"Hide"})]}),!A&&v.jsx("div",{className:"mt-3 space-y-2 max-h-40 overflow-y-auto pr-1",children:i.map(B=>v.jsx("div",{className:"bg-gray-700/50 p-2 rounded-md cursor-pointer hover:bg-gray-700 transition-colors",onClick:()=>R(B),children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("p",{className:"font-bold text-teal-300 truncate",children:B.name}),v.jsx(j_,{status:B.status})]})},B.id))}),E?v.jsxs("button",{onClick:N,className:"w-full mt-2 flex items-center justify-center space-x-2 bg-teal-600/50 hover:bg-teal-600 border border-teal-600 text-teal-200 hover:text-white font-bold py-1.5 rounded-md transition-colors",children:[v.jsx(py,{className:"h-4 w-4"}),v.jsx("span",{children:"Add Employee Profile"})]}):v.jsxs("p",{className:"text-xs text-gray-500 text-center bg-gray-700/50 p-2 rounded-md mt-2",children:["You have reached the maximum of ",S," employees."]}),v.jsx(X_,{isOpen:c,onClose:()=>h(!1),onSave:V,employeeToEdit:p}),v.jsx(Q_,{isOpen:m,employee:p,onClose:()=>y(!1),onEdit:()=>{p&&I(p)},onDelete:()=>{p&&H(p.id)}})]})},W_=({isOpen:i,onClose:t,employees:l,onSave:o})=>{const[r,c]=Q.useState(""),[h,m]=Q.useState("");if(Q.useEffect(()=>{var p;i&&(m(""),c(((p=l[0])==null?void 0:p.id)||""))},[i,l]),!i)return null;const y=()=>{const p=l.find(x=>x.id===r);!p||!h.trim()||o({employeeId:r,employeeName:p.name,testimony:h.trim()})};return v.jsx(ba,{isOpen:i,onClose:t,title:"Add Employee Testimony",initialPosition:{x:window.innerWidth-580,y:140},initialSize:{width:520,height:"auto"},children:v.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl h-full flex flex-col text-sm",children:[v.jsxs("div",{className:"space-y-3 flex-grow",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Employee Profile"}),v.jsx("select",{value:r,onChange:p=>c(p.target.value),className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:l.map(p=>v.jsx("option",{value:p.id,children:p.name},p.id))}),l.length===0&&v.jsx("p",{className:"text-xs text-red-400 mt-1",children:"No employee profiles available. Add an employee profile first."})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Testimony"}),v.jsx("textarea",{value:h,onChange:p=>m(p.target.value),placeholder:"Enter the employee's testimony",rows:6,className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-y"})]})]}),v.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[v.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors",children:"Cancel"}),v.jsx("button",{onClick:y,disabled:!r||!h.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-500 rounded-md transition-colors disabled:bg-gray-500",children:"Add Testimony"})]})]})})},hy=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),gn=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),Fs=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Os=({className:i})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.253 9.253 9 9.563 9h4.874c.31 0 .563.253.563.563v4.874c0 .31-.253.563-.563.563H9.563C9.253 15 9 14.747 9 14.437V9.563z"})]}),eN=()=>new Promise(i=>{const t=speechSynthesis.getVoices();if(t&&t.length>0){i(t);return}const l=()=>{const o=speechSynthesis.getVoices();o&&o.length>0&&(speechSynthesis.removeEventListener("voiceschanged",l),i(o))};speechSynthesis.addEventListener("voiceschanged",l),setTimeout(()=>{speechSynthesis.removeEventListener("voiceschanged",l),i(speechSynthesis.getVoices())},1200)}),tN=["Female","Natasha","Olivia","Sonia","Emma","Zira","Hazel","Aria","Jenny","Neural"],nN=async(i=["en-AU","en-GB","en-US"])=>{const t=await eN();if(!t||t.length===0)return;for(const o of i){const r=t.filter(m=>(m.lang||"").toLowerCase().startsWith(o.toLowerCase()));if(r.length===0)continue;const c=r.find(m=>tN.some(y=>(m.name||"").toLowerCase().includes(y.toLowerCase())));if(c)return c;const h=r.find(m=>/(google|microsoft)/i.test(m.name));return h||r[0]}return t.filter(o=>(o.lang||"").toLowerCase().startsWith("en"))[0]||t[0]};let ca;const Ii=async()=>ca||(ca=await nN(["en-AU","en-GB","en-US"]),ca),iN=(i,t={})=>{const l=new SpeechSynthesisUtterance(i);return t.voice&&(l.voice=t.voice),l.rate=t.rate??1,l.pitch=t.pitch??1,t.onstart&&(l.onstart=t.onstart),t.onend&&(l.onend=t.onend),speechSynthesis.speak(l),l},Wt=()=>speechSynthesis.cancel(),Rl=()=>speechSynthesis.pause(),Ml=()=>speechSynthesis.resume(),Il=async(i,t={})=>{if(!i||i.trim().length===0)return;const l=1800,o=[];let r=i.trim();for(;r.length>l;){let m=r.lastIndexOf(". ",l);m===-1&&(m=r.lastIndexOf("? ",l)),m===-1&&(m=r.lastIndexOf("! ",l)),m===-1&&(m=l),o.push(r.slice(0,m+1)),r=r.slice(m+1)}r.length>0&&o.push(r);let c=!1;const h=m=>{if(m>=o.length){t.onend&&t.onend();return}return iN(o[m],{voice:t.voice,rate:t.rate,pitch:t.pitch,onstart:()=>{c||(c=!0,t.onstart&&t.onstart())},onend:()=>h(m+1)})};h(0)},lN=({witnesses:i,employees:t=[],onAddWitness:l,onDeleteWitness:o,onUpdateWitness:r,onSaveWitness:c})=>{const[h,m]=Q.useState(!1),[y,p]=Q.useState(null),[x,S]=Q.useState(null),[E,A]=Q.useState(!1),[D,N]=Q.useState(null),[R,I]=Q.useState(!1),[H,V]=Q.useState(!1),B=Y=>{l(Y),m(!1)};return v.jsxs("div",{className:"mt-3",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-400",children:"Employee Testimony"}),v.jsx("div",{className:"flex items-center space-x-2",children:v.jsx("button",{onClick:()=>V(!H),className:"text-xs text-gray-300 hover:text-white px-2 py-1 rounded bg-gray-700/50",title:H?"Show":"Hide",children:H?"Show":"Hide"})})]}),!H&&v.jsxs("div",{className:"space-y-3",children:[i.map(Y=>v.jsxs("div",{className:"bg-gray-700/50 p-2 rounded-md",children:[v.jsxs("div",{className:"flex items-center justify-between mb-1",children:[v.jsx("p",{className:"font-bold text-teal-300 truncate",children:Y.employeeName}),v.jsxs("div",{className:"flex items-center space-x-2",children:[x!==Y.id?v.jsxs("button",{onClick:async()=>{var he;speechSynthesis.speaking&&Wt();const ee=await Ii(),ne=((he=Y.testimony)==null?void 0:he.trim())||"No testimony available.";Il(ne,{voice:ee,rate:1,pitch:1,onstart:()=>{S(Y.id),A(!1)},onend:()=>{S(null),A(!1)}})},className:"text-xs text-indigo-300 hover:text-white flex items-center space-x-1",title:"Listen",children:[v.jsx(gn,{className:"h-3 w-3"}),v.jsx("span",{children:"Listen"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:()=>{E?(Ml(),A(!1)):(Rl(),A(!0))},className:"text-xs text-blue-300 hover:text-white flex items-center space-x-1",title:E?"Resume":"Pause",children:[E?v.jsx(gn,{className:"h-3 w-3"}):v.jsx(Fs,{className:"h-3 w-3"}),v.jsx("span",{children:E?"Resume":"Pause"})]}),v.jsxs("button",{onClick:()=>{Wt(),S(null),A(!1)},className:"text-xs text-red-400 hover:text-white flex items-center space-x-1",title:"Stop",children:[v.jsx(Os,{className:"h-3 w-3"}),v.jsx("span",{children:"Stop"})]})]}),v.jsxs("button",{onClick:()=>{p(Y.id),c&&c(Y.id),r&&r(Y.id,{isSaved:!0}),setTimeout(()=>p(null),1200)},className:"text-xs text-gray-300 hover:text-white flex items-center space-x-1",title:"Save testimony",children:[v.jsx(hy,{className:"h-3 w-3"}),v.jsx("span",{children:"Save"})]}),v.jsx("button",{onClick:()=>o(Y.id),className:"text-xs text-red-400 hover:text-red-300",children:"Delete"})]})]}),Y.isSaved?v.jsx("div",{className:"w-full bg-gray-700/50 text-xs p-2 rounded-md max-h-36 overflow-y-auto",children:v.jsx("p",{className:"whitespace-pre-wrap text-gray-200",children:Y.testimony||"(empty)"})}):v.jsx("textarea",{className:"w-full bg-gray-700 text-xs p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-y",rows:4,value:Y.testimony,onChange:ee=>r&&r(Y.id,{testimony:ee.target.value}),placeholder:`Enter ${Y.employeeName}'s testimony here`}),y===Y.id&&v.jsx("p",{className:"text-[10px] text-green-400 mt-1",children:"Saved"}),Y.contextSummary!==void 0&&v.jsx("div",{onClick:()=>{const ee=`emp-testimony-full-${Y.id}`,ne=document.getElementById(ee);ne&&(ne.style.display="flex")},className:"mt-2 text-left w-full text-[11px] text-gray-300 bg-gray-700/40 p-2 rounded hover:bg-gray-700 transition-colors cursor-pointer",title:"Click to view the full testimony",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"pr-2",children:[v.jsx("span",{className:"font-semibold text-teal-400 underline",children:"AI Context Summary:"})," ",Y.contextSummary||"No summary yet."]}),v.jsx("div",{className:"flex items-center space-x-2 ml-2 flex-shrink-0",onClick:ee=>ee.stopPropagation(),children:D!==Y.id?v.jsx("button",{onClick:async()=>{if(!Y.contextSummary)return;speechSynthesis.speaking&&Wt();const ee=await Ii();Il(Y.contextSummary,{voice:ee,rate:1,pitch:1,onstart:()=>{N(Y.id),I(!1)},onend:()=>{N(null),I(!1)}})},className:"text-[11px] text-indigo-300 hover:text-white flex items-center space-x-1",title:"Listen",children:v.jsx("span",{className:"underline",children:"Listen"})}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>{R?(Ml(),I(!1)):(Rl(),I(!0))},className:"text-[11px] text-blue-300 hover:text-white flex items-center space-x-1",title:R?"Resume":"Pause",children:v.jsx("span",{className:"underline",children:R?"Resume":"Pause"})}),v.jsx("button",{onClick:()=>{Wt(),N(null),I(!1)},className:"text-[11px] text-red-400 hover:text-white flex items-center space-x-1",title:"Stop",children:v.jsx("span",{className:"underline",children:"Stop"})})]})})]})}),v.jsx("div",{id:`emp-testimony-full-${Y.id}`,style:{display:"none"},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:v.jsxs("div",{className:"bg-gray-800 w-[640px] max-w-[90vw] max-h-[85vh] rounded-lg shadow-xl border border-gray-700 overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-700 sticky top-0 bg-gray-800",children:[v.jsxs("h4",{className:"text-sm font-semibold text-gray-200",children:[Y.employeeName,"  Full Testimony"]}),v.jsx("button",{onClick:ee=>{ee.currentTarget.parentElement.parentElement.parentElement.style.display="none"},className:"text-gray-400 hover:text-white",children:""})]}),v.jsx("div",{className:"p-4 text-sm",children:v.jsx("p",{className:"whitespace-pre-wrap text-gray-200",children:Y.testimony||"(empty)"})})]})})]},Y.id)),i.length===0&&v.jsx("p",{className:"text-xs text-gray-500",children:"No employee testimonies added yet."})]}),v.jsx("div",{className:"flex justify-end mt-2",children:v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-1 bg-indigo-600/60 hover:bg-indigo-600 text-white px-2 py-1 rounded text-xs",title:"Add Employee Testimony",children:[v.jsx(py,{className:"h-3 w-3"}),v.jsx("span",{children:"Add testimony"})]})}),v.jsx(W_,{isOpen:h,onClose:()=>m(!1),employees:t,onSave:B})]})},sN=({testimony:i,contextSummary:t,onSave:l,additionalTestimonies:o=[]})=>{const[r,c]=Q.useState(i),[h,m]=Q.useState(!1),[y,p]=Q.useState(!1),[x,S]=Q.useState(!1),[E,A]=Q.useState(!1),[D,N]=Q.useState(!1),[R,I]=Q.useState(!1),[H,V]=Q.useState(()=>!i);Q.useEffect(()=>{i&&!H&&i!==r&&c(i)},[i,H]);const B=()=>{l(r),V(!1)},Y=()=>{V(!0)},ee=()=>(r||"").trim()||"No testimony available.",ne=async()=>{if(!("speechSynthesis"in window)){alert("Text-to-speech is not supported in this browser.");return}speechSynthesis.speaking&&Wt();const re=await Ii(),me=ee();Il(me,{voice:re,rate:1,pitch:1,onstart:()=>{p(!0),S(!1)},onend:()=>{p(!1),S(!1)}})},he=async()=>{if(!("speechSynthesis"in window)){alert("Text-to-speech is not supported in this browser.");return}if(!t)return;speechSynthesis.speaking&&Wt();const re=await Ii();Il(t,{voice:re,rate:1,pitch:1,onstart:()=>{N(!0),I(!1)},onend:()=>{N(!1),I(!1)}})},ae=()=>{y&&(x?(Ml(),S(!1)):(Rl(),S(!0)))},te=()=>{Wt(),p(!1),S(!1)};return v.jsxs("div",{className:"border-b border-gray-700 pb-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-400",children:"My Testimony"}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("button",{onClick:()=>A(!E),className:"text-xs text-gray-300 hover:text-white px-2 py-1 rounded bg-gray-700/50",title:E?"Show":"Hide",children:E?"Show":"Hide"}),y?v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:ae,className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded",children:[x?v.jsx(gn,{className:"h-4 w-4"}):v.jsx(Fs,{className:"h-4 w-4"}),v.jsx("span",{children:x?"Resume":"Pause"})]}),v.jsxs("button",{onClick:te,className:"flex items-center space-x-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:[v.jsx(Os,{className:"h-4 w-4"}),v.jsx("span",{children:"Stop"})]})]}):v.jsxs("button",{onClick:ne,className:"flex items-center space-x-1 bg-indigo-600/70 hover:bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded",children:[v.jsx(gn,{className:"h-4 w-4"}),v.jsx("span",{children:"Listen"})]})]})]}),!E&&v.jsx("div",{className:"relative group",children:H?v.jsxs(v.Fragment,{children:[v.jsx("textarea",{value:r,onChange:re=>c(re.target.value),placeholder:"Write your personal statement here. This will give the AI context for its analysis.",className:"w-full bg-gray-700 text-sm p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 resize-y",rows:5,autoFocus:!0}),v.jsxs("button",{onClick:B,className:"absolute bottom-2 right-2 bg-teal-600 hover:bg-teal-500 text-white px-2 py-1 rounded-md transition-colors text-xs font-medium flex items-center gap-1",title:"Save Testimony",children:[v.jsx(hy,{className:"h-3 w-3"})," Save"]})]}):v.jsxs("div",{className:"w-full bg-gray-700/50 text-sm p-2 rounded-md max-h-40 overflow-y-auto cursor-pointer hover:bg-gray-700 transition-colors relative",onClick:Y,title:"Click to edit",children:[v.jsx("p",{className:"whitespace-pre-wrap text-gray-200",children:r||"(empty)"}),v.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx("span",{className:"text-xs text-gray-400 bg-gray-800 px-1 rounded border border-gray-600",children:"Click to Edit"})})]})}),!E&&t!==void 0&&v.jsx("div",{onClick:()=>m(!0),className:"mt-2 text-left w-full text-[11px] text-gray-300 bg-gray-700/40 p-2 rounded hover:bg-gray-700 transition-colors cursor-pointer",title:"Click to view your full testimony",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"pr-2",children:[v.jsx("span",{className:"font-semibold text-teal-400 underline",children:"AI Context Summary:"})," ",t||"No summary yet."]}),v.jsx("div",{className:"flex items-center space-x-2 ml-2 flex-shrink-0",onClick:re=>re.stopPropagation(),children:D?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>{R?(Ml(),I(!1)):(Rl(),I(!0))},className:"text-[11px] text-blue-300 hover:text-white flex items-center space-x-1",title:R?"Resume":"Pause",children:v.jsx("span",{className:"underline",children:R?"Resume":"Pause"})}),v.jsx("button",{onClick:()=>{Wt(),N(!1),I(!1)},className:"text-[11px] text-red-400 hover:text-white flex items-center space-x-1",title:"Stop",children:v.jsx("span",{className:"underline",children:"Stop"})})]}):v.jsx("button",{onClick:he,className:"text-[11px] text-indigo-300 hover:text-white flex items-center space-x-1",title:"Listen",children:v.jsx("span",{className:"underline",children:"Listen"})})})]})}),h&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:v.jsxs("div",{className:"bg-gray-800 w-[640px] max-w-[90vw] max-h-[85vh] rounded-lg shadow-xl border border-gray-700 overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-700 sticky top-0 bg-gray-800",children:[v.jsx("h4",{className:"text-sm font-semibold text-gray-200",children:"My Full Testimony"}),v.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white",children:""})]}),v.jsx("div",{className:"p-4 text-sm",children:H?v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsx("textarea",{value:r,onChange:re=>c(re.target.value),className:"w-full flex-grow bg-gray-700 text-sm p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 resize-y min-h-[300px]",placeholder:"Edit your testimony..."}),v.jsx("div",{className:"flex justify-end mt-2",children:v.jsx("button",{onClick:B,className:"bg-teal-600 hover:bg-teal-500 text-white px-3 py-1.5 rounded text-sm font-medium",children:"Save Changes"})})]}):v.jsxs("div",{onClick:Y,className:"cursor-pointer group relative min-h-[100px]",children:[v.jsx("p",{className:"whitespace-pre-wrap text-gray-200",children:r||"(empty)"}),v.jsx("div",{className:"absolute top-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx("span",{className:"text-xs text-gray-400 bg-gray-800 px-1 rounded border border-gray-600",children:"Click to Edit"})})]})})]})})]})},oN=({files:i,cases:t=[],selectedFileId:l,onSelectFile:o,onSelectCase:r,onAppendCase:c,onDeleteCase:h,onDeleteFile:m,onRenameFile:y,employees:p,onAddEmployee:x,onUpdateEmployee:S,onSetEmployees:E,onDeleteEmployee:A,witnesses:D=[],onAddWitness:N,onDeleteWitness:R,onUpdateWitness:I,onSaveWitness:H,testimony:V,contextSummary:B,onSaveTestimony:Y})=>{const[ee,ne]=Cl.useState("completed"),[he,ae]=Cl.useState(!0),[te,re]=Cl.useState(!0),[me,Ie]=Cl.useState(!0),ie=new Set(t.flatMap(j=>j.fileIds||[])),ce=j=>!ie.has(j.id),U=i.filter(j=>(j.status==="new"||j.status==="analyzing")&&ce(j)),Z=i.filter(j=>(j.status==="analyzed-pending-review"||j.status==="analyzed-needs-manual-tagging")&&ce(j)),de=i.filter(j=>j.status==="analyzed"&&ce(j)),_e=i.filter(j=>j.status==="error"&&ce(j)),Re=t,_=(j,xe,Ee)=>v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wide mb-2 mt-4 first:mt-0",children:j}),xe.length===0?v.jsx("p",{className:"text-xs text-gray-600 italic mb-2",children:Ee}):v.jsx("div",{className:"space-y-1",children:xe.map(we=>v.jsx(V_,{file:we,isSelected:we.id===l,onSelect:W,onDelete:m,onRename:y},we.id))})]}),q=(j,xe,Ee)=>v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wide mb-2 mt-4",children:j}),xe.length===0?v.jsx("p",{className:"text-xs text-gray-600 italic mb-2",children:Ee}):v.jsx("div",{className:"space-y-1",children:xe.map(we=>v.jsx(F_,{caseItem:we,files:i,onSelect:r,onDelete:h,onAppend:c},we.id))})]}),W=j=>{o(j===l?null:j)};return v.jsxs("aside",{className:"w-full h-full bg-gray-800 p-4 border-r border-gray-700 flex flex-col",children:[v.jsxs("div",{className:"mb-2 border-b border-gray-700 pb-2",children:[v.jsxs("button",{onClick:()=>ae(!he),className:"w-full text-left text-sm font-semibold text-gray-300 hover:text-white flex items-center justify-between",children:[v.jsx("span",{children:"My Testimony"}),v.jsx("svg",{className:`h-4 w-4 transition-transform ${he?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!he&&v.jsx("div",{className:"mt-2",children:v.jsx(sN,{testimony:V,contextSummary:B,onSave:Y,additionalTestimonies:D.map(j=>({name:j.employeeName,testimony:j.testimony}))})})]}),D&&N&&v.jsxs("div",{className:"mb-2 border-b border-gray-700 pb-2",children:[v.jsxs("button",{onClick:()=>re(!te),className:"w-full text-left text-sm font-semibold text-gray-300 hover:text-white flex items-center justify-between",children:[v.jsxs("span",{children:["Witnesses (",D.length,")"]}),v.jsx("svg",{className:`h-4 w-4 transition-transform ${te?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!te&&v.jsx("div",{className:"mt-2",children:v.jsx(lN,{witnesses:D,employees:p,onAddWitness:j=>N(j),onDeleteWitness:j=>R&&R(j),onUpdateWitness:(j,xe)=>I&&I(j,xe),onSaveWitness:j=>H&&H(j)})})]}),v.jsxs("div",{className:"flex-grow flex flex-col min-h-0 pt-2",children:[v.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-300",children:"Evidence Locker"}),v.jsxs("div",{className:"flex space-x-1 mb-2 border-b border-gray-700",children:[v.jsxs("button",{onClick:()=>ne("completed"),className:`px-3 py-1.5 text-xs font-medium rounded-t transition-colors ${ee==="completed"?"bg-gray-700 text-white":"text-gray-400 hover:text-gray-300"}`,children:["Completed (",de.length,")"]}),v.jsxs("button",{onClick:()=>ne("pending"),className:`px-3 py-1.5 text-xs font-medium rounded-t transition-colors ${ee==="pending"?"bg-gray-700 text-white":"text-gray-400 hover:text-gray-300"}`,children:["Pending (",U.length,")"]}),v.jsxs("button",{onClick:()=>ne("review"),className:`px-3 py-1.5 text-xs font-medium rounded-t transition-colors ${ee==="review"?"bg-gray-700 text-white":"text-gray-400 hover:text-gray-300"}`,children:["Review (",Z.length,")"]}),v.jsxs("button",{onClick:()=>ne("unified"),className:`px-3 py-1.5 text-xs font-medium rounded-t transition-colors ${ee==="unified"?"bg-gray-700 text-white":"text-gray-400 hover:text-gray-300"}`,children:["Unified (",Re.length,")"]}),_e.length>0&&v.jsxs("button",{onClick:()=>ne("errors"),className:`px-3 py-1.5 text-xs font-medium rounded-t transition-colors ${ee==="errors"?"bg-gray-700 text-white":"text-red-400 hover:text-red-300"}`,children:["Errors (",_e.length,")"]})]}),v.jsxs("div",{className:"flex-grow overflow-y-auto pr-2",children:[ee==="pending"&&_("Pending & Unanalyzed",U,"Upload new files or start an analysis to see them here."),ee==="review"&&_("Needs Review",Z,"Files requiring manual review will appear here."),ee==="completed"&&_("Completed Analyses",de,"Completed analyses will appear here once finished."),ee==="unified"&&q("Unified Analyses",Re,"Unified (paired) analyses will appear here."),ee==="errors"&&_("Errors",_e,"Files with errors will appear here if analysis fails.")]})]}),v.jsxs("div",{className:"mt-2 border-t border-gray-700 pt-2 flex-shrink-0",children:[v.jsxs("button",{onClick:()=>Ie(!me),className:"w-full text-left text-sm font-semibold text-gray-300 hover:text-white flex items-center justify-between mb-2",children:[v.jsxs("span",{children:["Employee Profiles (",p.length,")"]}),v.jsx("svg",{className:`h-4 w-4 transition-transform ${me?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!me&&v.jsx(Z_,{employees:p,onAddEmployee:x,onUpdateEmployee:S,onSetEmployees:E,onDeleteEmployee:A})]})]})};function Mc(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Li=Mc();function my(i){Li=i}var Bs={exec:()=>null};function Ve(i,t=""){let l=typeof i=="string"?i:i.source,o={replace:(r,c)=>{let h=typeof c=="string"?c:c.source;return h=h.replace(wt.caret,"$1"),l=l.replace(r,h),o},getRegex:()=>new RegExp(l,t)};return o}var aN=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),wt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i")},rN=/^(?:[ \t]*(?:\n|$))+/,uN=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,cN=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ys=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,dN=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ic=/(?:[*+-]|\d{1,9}[.)])/,gy=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,yy=Ve(gy).replace(/bull/g,Ic).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),fN=Ve(gy).replace(/bull/g,Ic).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Dc=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,pN=/^[^\n]+/,kc=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,hN=Ve(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",kc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),mN=Ve(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ic).getRegex(),Ra="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Uc=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,gN=Ve("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Uc).replace("tag",Ra).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vy=Ve(Dc).replace("hr",Ys).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ra).getRegex(),yN=Ve(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vy).getRegex(),Lc={blockquote:yN,code:uN,def:hN,fences:cN,heading:dN,hr:Ys,html:gN,lheading:yy,list:mN,newline:rN,paragraph:vy,table:Bs,text:pN},gg=Ve("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ys).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ra).getRegex(),vN={...Lc,lheading:fN,table:gg,paragraph:Ve(Dc).replace("hr",Ys).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gg).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ra).getRegex()},xN={...Lc,html:Ve(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Uc).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Bs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ve(Dc).replace("hr",Ys).replace("heading",` *#{1,6} *[^
]`).replace("lheading",yy).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},SN=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,TN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,xy=/^( {2,}|\\)\n(?!\s*$)/,EN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ma=/[\p{P}\p{S}]/u,zc=/[\s\p{P}\p{S}]/u,Sy=/[^\s\p{P}\p{S}]/u,CN=Ve(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,zc).getRegex(),Ty=/(?!~)[\p{P}\p{S}]/u,AN=/(?!~)[\s\p{P}\p{S}]/u,_N=/(?:[^\s\p{P}\p{S}]|~)/u,NN=Ve(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",aN?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ey=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,wN=Ve(Ey,"u").replace(/punct/g,Ma).getRegex(),bN=Ve(Ey,"u").replace(/punct/g,Ty).getRegex(),Cy="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",RN=Ve(Cy,"gu").replace(/notPunctSpace/g,Sy).replace(/punctSpace/g,zc).replace(/punct/g,Ma).getRegex(),MN=Ve(Cy,"gu").replace(/notPunctSpace/g,_N).replace(/punctSpace/g,AN).replace(/punct/g,Ty).getRegex(),IN=Ve("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Sy).replace(/punctSpace/g,zc).replace(/punct/g,Ma).getRegex(),DN=Ve(/\\(punct)/,"gu").replace(/punct/g,Ma).getRegex(),kN=Ve(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),UN=Ve(Uc).replace("(?:-->|$)","-->").getRegex(),LN=Ve("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",UN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Sa=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,zN=Ve(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Sa).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ay=Ve(/^!?\[(label)\]\[(ref)\]/).replace("label",Sa).replace("ref",kc).getRegex(),_y=Ve(/^!?\[(ref)\](?:\[\])?/).replace("ref",kc).getRegex(),PN=Ve("reflink|nolink(?!\\()","g").replace("reflink",Ay).replace("nolink",_y).getRegex(),yg=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Pc={_backpedal:Bs,anyPunctuation:DN,autolink:kN,blockSkip:NN,br:xy,code:TN,del:Bs,emStrongLDelim:wN,emStrongRDelimAst:RN,emStrongRDelimUnd:IN,escape:SN,link:zN,nolink:_y,punctuation:CN,reflink:Ay,reflinkSearch:PN,tag:LN,text:EN,url:Bs},qN={...Pc,link:Ve(/^!?\[(label)\]\((.*?)\)/).replace("label",Sa).getRegex(),reflink:Ve(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Sa).getRegex()},gc={...Pc,emStrongRDelimAst:MN,emStrongLDelim:bN,url:Ve(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",yg).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ve(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",yg).getRegex()},HN={...gc,br:Ve(xy).replace("{2,}","*").getRegex(),text:Ve(gc.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},da={normal:Lc,gfm:vN,pedantic:xN},zs={normal:Pc,gfm:gc,breaks:HN,pedantic:qN},GN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vg=i=>GN[i];function mn(i,t){if(t){if(wt.escapeTest.test(i))return i.replace(wt.escapeReplace,vg)}else if(wt.escapeTestNoEncode.test(i))return i.replace(wt.escapeReplaceNoEncode,vg);return i}function xg(i){try{i=encodeURI(i).replace(wt.percentDecode,"%")}catch{return null}return i}function Sg(i,t){var c;let l=i.replace(wt.findPipe,(h,m,y)=>{let p=!1,x=m;for(;--x>=0&&y[x]==="\\";)p=!p;return p?"|":" |"}),o=l.split(wt.splitPipe),r=0;if(o[0].trim()||o.shift(),o.length>0&&!((c=o.at(-1))!=null&&c.trim())&&o.pop(),t)if(o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;r<o.length;r++)o[r]=o[r].trim().replace(wt.slashPipe,"|");return o}function Ps(i,t,l){let o=i.length;if(o===0)return"";let r=0;for(;r<o&&i.charAt(o-r-1)===t;)r++;return i.slice(0,o-r)}function VN(i,t){if(i.indexOf(t[1])===-1)return-1;let l=0;for(let o=0;o<i.length;o++)if(i[o]==="\\")o++;else if(i[o]===t[0])l++;else if(i[o]===t[1]&&(l--,l<0))return o;return l>0?-2:-1}function Tg(i,t,l,o,r){let c=t.href,h=t.title||null,m=i[1].replace(r.other.outputLinkReplace,"$1");o.state.inLink=!0;let y={type:i[0].charAt(0)==="!"?"image":"link",raw:l,href:c,title:h,text:m,tokens:o.inlineTokens(m)};return o.state.inLink=!1,y}function BN(i,t,l){let o=i.match(l.other.indentCodeCompensation);if(o===null)return t;let r=o[1];return t.split(`
`).map(c=>{let h=c.match(l.other.beginningSpace);if(h===null)return c;let[m]=h;return m.length>=r.length?c.slice(r.length):c}).join(`
`)}var Ta=class{constructor(i){Qe(this,"options");Qe(this,"rules");Qe(this,"lexer");this.options=i||Li}space(i){let t=this.rules.block.newline.exec(i);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(i){let t=this.rules.block.code.exec(i);if(t){let l=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?l:Ps(l,`
`)}}}fences(i){let t=this.rules.block.fences.exec(i);if(t){let l=t[0],o=BN(l,t[3]||"",this.rules);return{type:"code",raw:l,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:o}}}heading(i){let t=this.rules.block.heading.exec(i);if(t){let l=t[2].trim();if(this.rules.other.endingHash.test(l)){let o=Ps(l,"#");(this.options.pedantic||!o||this.rules.other.endingSpaceChar.test(o))&&(l=o.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(i){let t=this.rules.block.hr.exec(i);if(t)return{type:"hr",raw:Ps(t[0],`
`)}}blockquote(i){let t=this.rules.block.blockquote.exec(i);if(t){let l=Ps(t[0],`
`).split(`
`),o="",r="",c=[];for(;l.length>0;){let h=!1,m=[],y;for(y=0;y<l.length;y++)if(this.rules.other.blockquoteStart.test(l[y]))m.push(l[y]),h=!0;else if(!h)m.push(l[y]);else break;l=l.slice(y);let p=m.join(`
`),x=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");o=o?`${o}
${p}`:p,r=r?`${r}
${x}`:x;let S=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(x,c,!0),this.lexer.state.top=S,l.length===0)break;let E=c.at(-1);if((E==null?void 0:E.type)==="code")break;if((E==null?void 0:E.type)==="blockquote"){let A=E,D=A.raw+`
`+l.join(`
`),N=this.blockquote(D);c[c.length-1]=N,o=o.substring(0,o.length-A.raw.length)+N.raw,r=r.substring(0,r.length-A.text.length)+N.text;break}else if((E==null?void 0:E.type)==="list"){let A=E,D=A.raw+`
`+l.join(`
`),N=this.list(D);c[c.length-1]=N,o=o.substring(0,o.length-E.raw.length)+N.raw,r=r.substring(0,r.length-A.raw.length)+N.raw,l=D.substring(c.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:c,text:r}}}list(i){let t=this.rules.block.list.exec(i);if(t){let l=t[1].trim(),o=l.length>1,r={type:"list",raw:"",ordered:o,start:o?+l.slice(0,-1):"",loose:!1,items:[]};l=o?`\\d{1,9}\\${l.slice(-1)}`:`\\${l}`,this.options.pedantic&&(l=o?l:"[*+-]");let c=this.rules.other.listItemRegex(l),h=!1;for(;i;){let y=!1,p="",x="";if(!(t=c.exec(i))||this.rules.block.hr.test(i))break;p=t[0],i=i.substring(p.length);let S=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,I=>" ".repeat(3*I.length)),E=i.split(`
`,1)[0],A=!S.trim(),D=0;if(this.options.pedantic?(D=2,x=S.trimStart()):A?D=t[1].length+1:(D=t[2].search(this.rules.other.nonSpaceChar),D=D>4?1:D,x=S.slice(D),D+=t[1].length),A&&this.rules.other.blankLine.test(E)&&(p+=E+`
`,i=i.substring(E.length+1),y=!0),!y){let I=this.rules.other.nextBulletRegex(D),H=this.rules.other.hrRegex(D),V=this.rules.other.fencesBeginRegex(D),B=this.rules.other.headingBeginRegex(D),Y=this.rules.other.htmlBeginRegex(D);for(;i;){let ee=i.split(`
`,1)[0],ne;if(E=ee,this.options.pedantic?(E=E.replace(this.rules.other.listReplaceNesting,"  "),ne=E):ne=E.replace(this.rules.other.tabCharGlobal,"    "),V.test(E)||B.test(E)||Y.test(E)||I.test(E)||H.test(E))break;if(ne.search(this.rules.other.nonSpaceChar)>=D||!E.trim())x+=`
`+ne.slice(D);else{if(A||S.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||V.test(S)||B.test(S)||H.test(S))break;x+=`
`+E}!A&&!E.trim()&&(A=!0),p+=ee+`
`,i=i.substring(ee.length+1),S=ne.slice(D)}}r.loose||(h?r.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(h=!0));let N=null,R;this.options.gfm&&(N=this.rules.other.listIsTask.exec(x),N&&(R=N[0]!=="[ ] ",x=x.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:p,task:!!N,checked:R,loose:!1,text:x,tokens:[]}),r.raw+=p}let m=r.items.at(-1);if(m)m.raw=m.raw.trimEnd(),m.text=m.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let y=0;y<r.items.length;y++)if(this.lexer.state.top=!1,r.items[y].tokens=this.lexer.blockTokens(r.items[y].text,[]),!r.loose){let p=r.items[y].tokens.filter(S=>S.type==="space"),x=p.length>0&&p.some(S=>this.rules.other.anyLine.test(S.raw));r.loose=x}if(r.loose)for(let y=0;y<r.items.length;y++)r.items[y].loose=!0;return r}}html(i){let t=this.rules.block.html.exec(i);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(i){let t=this.rules.block.def.exec(i);if(t){let l=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),o=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:l,raw:t[0],href:o,title:r}}}table(i){var h;let t=this.rules.block.table.exec(i);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let l=Sg(t[1]),o=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(h=t[3])!=null&&h.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],c={type:"table",raw:t[0],header:[],align:[],rows:[]};if(l.length===o.length){for(let m of o)this.rules.other.tableAlignRight.test(m)?c.align.push("right"):this.rules.other.tableAlignCenter.test(m)?c.align.push("center"):this.rules.other.tableAlignLeft.test(m)?c.align.push("left"):c.align.push(null);for(let m=0;m<l.length;m++)c.header.push({text:l[m],tokens:this.lexer.inline(l[m]),header:!0,align:c.align[m]});for(let m of r)c.rows.push(Sg(m,c.header.length).map((y,p)=>({text:y,tokens:this.lexer.inline(y),header:!1,align:c.align[p]})));return c}}lheading(i){let t=this.rules.block.lheading.exec(i);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(i){let t=this.rules.block.paragraph.exec(i);if(t){let l=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:l,tokens:this.lexer.inline(l)}}}text(i){let t=this.rules.block.text.exec(i);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(i){let t=this.rules.inline.escape.exec(i);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(i){let t=this.rules.inline.tag.exec(i);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(i){let t=this.rules.inline.link.exec(i);if(t){let l=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(l)){if(!this.rules.other.endAngleBracket.test(l))return;let c=Ps(l.slice(0,-1),"\\");if((l.length-c.length)%2===0)return}else{let c=VN(t[2],"()");if(c===-2)return;if(c>-1){let h=(t[0].indexOf("!")===0?5:4)+t[1].length+c;t[2]=t[2].substring(0,c),t[0]=t[0].substring(0,h).trim(),t[3]=""}}let o=t[2],r="";if(this.options.pedantic){let c=this.rules.other.pedanticHrefTitle.exec(o);c&&(o=c[1],r=c[3])}else r=t[3]?t[3].slice(1,-1):"";return o=o.trim(),this.rules.other.startAngleBracket.test(o)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(l)?o=o.slice(1):o=o.slice(1,-1)),Tg(t,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(i,t){let l;if((l=this.rules.inline.reflink.exec(i))||(l=this.rules.inline.nolink.exec(i))){let o=(l[2]||l[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[o.toLowerCase()];if(!r){let c=l[0].charAt(0);return{type:"text",raw:c,text:c}}return Tg(l,r,l[0],this.lexer,this.rules)}}emStrong(i,t,l=""){let o=this.rules.inline.emStrongLDelim.exec(i);if(!(!o||o[3]&&l.match(this.rules.other.unicodeAlphaNumeric))&&(!(o[1]||o[2])||!l||this.rules.inline.punctuation.exec(l))){let r=[...o[0]].length-1,c,h,m=r,y=0,p=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*i.length+r);(o=p.exec(t))!=null;){if(c=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!c)continue;if(h=[...c].length,o[3]||o[4]){m+=h;continue}else if((o[5]||o[6])&&r%3&&!((r+h)%3)){y+=h;continue}if(m-=h,m>0)continue;h=Math.min(h,h+m+y);let x=[...o[0]][0].length,S=i.slice(0,r+o.index+x+h);if(Math.min(r,h)%2){let A=S.slice(1,-1);return{type:"em",raw:S,text:A,tokens:this.lexer.inlineTokens(A)}}let E=S.slice(2,-2);return{type:"strong",raw:S,text:E,tokens:this.lexer.inlineTokens(E)}}}}codespan(i){let t=this.rules.inline.code.exec(i);if(t){let l=t[2].replace(this.rules.other.newLineCharGlobal," "),o=this.rules.other.nonSpaceChar.test(l),r=this.rules.other.startingSpaceChar.test(l)&&this.rules.other.endingSpaceChar.test(l);return o&&r&&(l=l.substring(1,l.length-1)),{type:"codespan",raw:t[0],text:l}}}br(i){let t=this.rules.inline.br.exec(i);if(t)return{type:"br",raw:t[0]}}del(i){let t=this.rules.inline.del.exec(i);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(i){let t=this.rules.inline.autolink.exec(i);if(t){let l,o;return t[2]==="@"?(l=t[1],o="mailto:"+l):(l=t[1],o=l),{type:"link",raw:t[0],text:l,href:o,tokens:[{type:"text",raw:l,text:l}]}}}url(i){var l;let t;if(t=this.rules.inline.url.exec(i)){let o,r;if(t[2]==="@")o=t[0],r="mailto:"+o;else{let c;do c=t[0],t[0]=((l=this.rules.inline._backpedal.exec(t[0]))==null?void 0:l[0])??"";while(c!==t[0]);o=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:o,href:r,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(i){let t=this.rules.inline.text.exec(i);if(t){let l=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:l}}}},sn=class yc{constructor(t){Qe(this,"tokens");Qe(this,"options");Qe(this,"state");Qe(this,"tokenizer");Qe(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Li,this.options.tokenizer=this.options.tokenizer||new Ta,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let l={other:wt,block:da.normal,inline:zs.normal};this.options.pedantic?(l.block=da.pedantic,l.inline=zs.pedantic):this.options.gfm&&(l.block=da.gfm,this.options.breaks?l.inline=zs.breaks:l.inline=zs.gfm),this.tokenizer.rules=l}static get rules(){return{block:da,inline:zs}}static lex(t,l){return new yc(l).lex(t)}static lexInline(t,l){return new yc(l).inlineTokens(t)}lex(t){t=t.replace(wt.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let l=0;l<this.inlineQueue.length;l++){let o=this.inlineQueue[l];this.inlineTokens(o.src,o.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,l=[],o=!1){var r,c,h;for(this.options.pedantic&&(t=t.replace(wt.tabCharGlobal,"    ").replace(wt.spaceLine,""));t;){let m;if((c=(r=this.options.extensions)==null?void 0:r.block)!=null&&c.some(p=>(m=p.call({lexer:this},t,l))?(t=t.substring(m.raw.length),l.push(m),!0):!1))continue;if(m=this.tokenizer.space(t)){t=t.substring(m.raw.length);let p=l.at(-1);m.raw.length===1&&p!==void 0?p.raw+=`
`:l.push(m);continue}if(m=this.tokenizer.code(t)){t=t.substring(m.raw.length);let p=l.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+m.raw,p.text+=`
`+m.text,this.inlineQueue.at(-1).src=p.text):l.push(m);continue}if(m=this.tokenizer.fences(t)){t=t.substring(m.raw.length),l.push(m);continue}if(m=this.tokenizer.heading(t)){t=t.substring(m.raw.length),l.push(m);continue}if(m=this.tokenizer.hr(t)){t=t.substring(m.raw.length),l.push(m);continue}if(m=this.tokenizer.blockquote(t)){t=t.substring(m.raw.length),l.push(m);continue}if(m=this.tokenizer.list(t)){t=t.substring(m.raw.length),l.push(m);continue}if(m=this.tokenizer.html(t)){t=t.substring(m.raw.length),l.push(m);continue}if(m=this.tokenizer.def(t)){t=t.substring(m.raw.length);let p=l.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+m.raw,p.text+=`
`+m.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[m.tag]||(this.tokens.links[m.tag]={href:m.href,title:m.title},l.push(m));continue}if(m=this.tokenizer.table(t)){t=t.substring(m.raw.length),l.push(m);continue}if(m=this.tokenizer.lheading(t)){t=t.substring(m.raw.length),l.push(m);continue}let y=t;if((h=this.options.extensions)!=null&&h.startBlock){let p=1/0,x=t.slice(1),S;this.options.extensions.startBlock.forEach(E=>{S=E.call({lexer:this},x),typeof S=="number"&&S>=0&&(p=Math.min(p,S))}),p<1/0&&p>=0&&(y=t.substring(0,p+1))}if(this.state.top&&(m=this.tokenizer.paragraph(y))){let p=l.at(-1);o&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+m.raw,p.text+=`
`+m.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):l.push(m),o=y.length!==t.length,t=t.substring(m.raw.length);continue}if(m=this.tokenizer.text(t)){t=t.substring(m.raw.length);let p=l.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+m.raw,p.text+=`
`+m.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):l.push(m);continue}if(t){let p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,l}inline(t,l=[]){return this.inlineQueue.push({src:t,tokens:l}),l}inlineTokens(t,l=[]){var y,p,x,S,E;let o=t,r=null;if(this.tokens.links){let A=Object.keys(this.tokens.links);if(A.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)A.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,r.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let c;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)c=r[2]?r[2].length:0,o=o.slice(0,r.index+c)+"["+"a".repeat(r[0].length-c-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);o=((p=(y=this.options.hooks)==null?void 0:y.emStrongMask)==null?void 0:p.call({lexer:this},o))??o;let h=!1,m="";for(;t;){h||(m=""),h=!1;let A;if((S=(x=this.options.extensions)==null?void 0:x.inline)!=null&&S.some(N=>(A=N.call({lexer:this},t,l))?(t=t.substring(A.raw.length),l.push(A),!0):!1))continue;if(A=this.tokenizer.escape(t)){t=t.substring(A.raw.length),l.push(A);continue}if(A=this.tokenizer.tag(t)){t=t.substring(A.raw.length),l.push(A);continue}if(A=this.tokenizer.link(t)){t=t.substring(A.raw.length),l.push(A);continue}if(A=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(A.raw.length);let N=l.at(-1);A.type==="text"&&(N==null?void 0:N.type)==="text"?(N.raw+=A.raw,N.text+=A.text):l.push(A);continue}if(A=this.tokenizer.emStrong(t,o,m)){t=t.substring(A.raw.length),l.push(A);continue}if(A=this.tokenizer.codespan(t)){t=t.substring(A.raw.length),l.push(A);continue}if(A=this.tokenizer.br(t)){t=t.substring(A.raw.length),l.push(A);continue}if(A=this.tokenizer.del(t)){t=t.substring(A.raw.length),l.push(A);continue}if(A=this.tokenizer.autolink(t)){t=t.substring(A.raw.length),l.push(A);continue}if(!this.state.inLink&&(A=this.tokenizer.url(t))){t=t.substring(A.raw.length),l.push(A);continue}let D=t;if((E=this.options.extensions)!=null&&E.startInline){let N=1/0,R=t.slice(1),I;this.options.extensions.startInline.forEach(H=>{I=H.call({lexer:this},R),typeof I=="number"&&I>=0&&(N=Math.min(N,I))}),N<1/0&&N>=0&&(D=t.substring(0,N+1))}if(A=this.tokenizer.inlineText(D)){t=t.substring(A.raw.length),A.raw.slice(-1)!=="_"&&(m=A.raw.slice(-1)),h=!0;let N=l.at(-1);(N==null?void 0:N.type)==="text"?(N.raw+=A.raw,N.text+=A.text):l.push(A);continue}if(t){let N="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(N);break}else throw new Error(N)}}return l}},Ea=class{constructor(i){Qe(this,"options");Qe(this,"parser");this.options=i||Li}space(i){return""}code({text:i,lang:t,escaped:l}){var c;let o=(c=(t||"").match(wt.notSpaceStart))==null?void 0:c[0],r=i.replace(wt.endingNewline,"")+`
`;return o?'<pre><code class="language-'+mn(o)+'">'+(l?r:mn(r,!0))+`</code></pre>
`:"<pre><code>"+(l?r:mn(r,!0))+`</code></pre>
`}blockquote({tokens:i}){return`<blockquote>
${this.parser.parse(i)}</blockquote>
`}html({text:i}){return i}def(i){return""}heading({tokens:i,depth:t}){return`<h${t}>${this.parser.parseInline(i)}</h${t}>
`}hr(i){return`<hr>
`}list(i){let t=i.ordered,l=i.start,o="";for(let h=0;h<i.items.length;h++){let m=i.items[h];o+=this.listitem(m)}let r=t?"ol":"ul",c=t&&l!==1?' start="'+l+'"':"";return"<"+r+c+`>
`+o+"</"+r+`>
`}listitem(i){var l;let t="";if(i.task){let o=this.checkbox({checked:!!i.checked});i.loose?((l=i.tokens[0])==null?void 0:l.type)==="paragraph"?(i.tokens[0].text=o+" "+i.tokens[0].text,i.tokens[0].tokens&&i.tokens[0].tokens.length>0&&i.tokens[0].tokens[0].type==="text"&&(i.tokens[0].tokens[0].text=o+" "+mn(i.tokens[0].tokens[0].text),i.tokens[0].tokens[0].escaped=!0)):i.tokens.unshift({type:"text",raw:o+" ",text:o+" ",escaped:!0}):t+=o+" "}return t+=this.parser.parse(i.tokens,!!i.loose),`<li>${t}</li>
`}checkbox({checked:i}){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>
`}table(i){let t="",l="";for(let r=0;r<i.header.length;r++)l+=this.tablecell(i.header[r]);t+=this.tablerow({text:l});let o="";for(let r=0;r<i.rows.length;r++){let c=i.rows[r];l="";for(let h=0;h<c.length;h++)l+=this.tablecell(c[h]);o+=this.tablerow({text:l})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+o+`</table>
`}tablerow({text:i}){return`<tr>
${i}</tr>
`}tablecell(i){let t=this.parser.parseInline(i.tokens),l=i.header?"th":"td";return(i.align?`<${l} align="${i.align}">`:`<${l}>`)+t+`</${l}>
`}strong({tokens:i}){return`<strong>${this.parser.parseInline(i)}</strong>`}em({tokens:i}){return`<em>${this.parser.parseInline(i)}</em>`}codespan({text:i}){return`<code>${mn(i,!0)}</code>`}br(i){return"<br>"}del({tokens:i}){return`<del>${this.parser.parseInline(i)}</del>`}link({href:i,title:t,tokens:l}){let o=this.parser.parseInline(l),r=xg(i);if(r===null)return o;i=r;let c='<a href="'+i+'"';return t&&(c+=' title="'+mn(t)+'"'),c+=">"+o+"</a>",c}image({href:i,title:t,text:l,tokens:o}){o&&(l=this.parser.parseInline(o,this.parser.textRenderer));let r=xg(i);if(r===null)return mn(l);i=r;let c=`<img src="${i}" alt="${l}"`;return t&&(c+=` title="${mn(t)}"`),c+=">",c}text(i){return"tokens"in i&&i.tokens?this.parser.parseInline(i.tokens):"escaped"in i&&i.escaped?i.text:mn(i.text)}},qc=class{strong({text:i}){return i}em({text:i}){return i}codespan({text:i}){return i}del({text:i}){return i}html({text:i}){return i}text({text:i}){return i}link({text:i}){return""+i}image({text:i}){return""+i}br(){return""}},on=class vc{constructor(t){Qe(this,"options");Qe(this,"renderer");Qe(this,"textRenderer");this.options=t||Li,this.options.renderer=this.options.renderer||new Ea,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new qc}static parse(t,l){return new vc(l).parse(t)}static parseInline(t,l){return new vc(l).parseInline(t)}parse(t,l=!0){var r,c;let o="";for(let h=0;h<t.length;h++){let m=t[h];if((c=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&c[m.type]){let p=m,x=this.options.extensions.renderers[p.type].call({parser:this},p);if(x!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(p.type)){o+=x||"";continue}}let y=m;switch(y.type){case"space":{o+=this.renderer.space(y);continue}case"hr":{o+=this.renderer.hr(y);continue}case"heading":{o+=this.renderer.heading(y);continue}case"code":{o+=this.renderer.code(y);continue}case"table":{o+=this.renderer.table(y);continue}case"blockquote":{o+=this.renderer.blockquote(y);continue}case"list":{o+=this.renderer.list(y);continue}case"html":{o+=this.renderer.html(y);continue}case"def":{o+=this.renderer.def(y);continue}case"paragraph":{o+=this.renderer.paragraph(y);continue}case"text":{let p=y,x=this.renderer.text(p);for(;h+1<t.length&&t[h+1].type==="text";)p=t[++h],x+=`
`+this.renderer.text(p);l?o+=this.renderer.paragraph({type:"paragraph",raw:x,text:x,tokens:[{type:"text",raw:x,text:x,escaped:!0}]}):o+=x;continue}default:{let p='Token with "'+y.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return o}parseInline(t,l=this.renderer){var r,c;let o="";for(let h=0;h<t.length;h++){let m=t[h];if((c=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&c[m.type]){let p=this.options.extensions.renderers[m.type].call({parser:this},m);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(m.type)){o+=p||"";continue}}let y=m;switch(y.type){case"escape":{o+=l.text(y);break}case"html":{o+=l.html(y);break}case"link":{o+=l.link(y);break}case"image":{o+=l.image(y);break}case"strong":{o+=l.strong(y);break}case"em":{o+=l.em(y);break}case"codespan":{o+=l.codespan(y);break}case"br":{o+=l.br(y);break}case"del":{o+=l.del(y);break}case"text":{o+=l.text(y);break}default:{let p='Token with "'+y.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return o}},pa,Gs=(pa=class{constructor(i){Qe(this,"options");Qe(this,"block");this.options=i||Li}preprocess(i){return i}postprocess(i){return i}processAllTokens(i){return i}emStrongMask(i){return i}provideLexer(){return this.block?sn.lex:sn.lexInline}provideParser(){return this.block?on.parse:on.parseInline}},Qe(pa,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Qe(pa,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),pa),FN=class{constructor(...i){Qe(this,"defaults",Mc());Qe(this,"options",this.setOptions);Qe(this,"parse",this.parseMarkdown(!0));Qe(this,"parseInline",this.parseMarkdown(!1));Qe(this,"Parser",on);Qe(this,"Renderer",Ea);Qe(this,"TextRenderer",qc);Qe(this,"Lexer",sn);Qe(this,"Tokenizer",Ta);Qe(this,"Hooks",Gs);this.use(...i)}walkTokens(i,t){var o,r;let l=[];for(let c of i)switch(l=l.concat(t.call(this,c)),c.type){case"table":{let h=c;for(let m of h.header)l=l.concat(this.walkTokens(m.tokens,t));for(let m of h.rows)for(let y of m)l=l.concat(this.walkTokens(y.tokens,t));break}case"list":{let h=c;l=l.concat(this.walkTokens(h.items,t));break}default:{let h=c;(r=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&r[h.type]?this.defaults.extensions.childTokens[h.type].forEach(m=>{let y=h[m].flat(1/0);l=l.concat(this.walkTokens(y,t))}):h.tokens&&(l=l.concat(this.walkTokens(h.tokens,t)))}}return l}use(...i){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(l=>{let o={...l};if(o.async=this.defaults.async||o.async||!1,l.extensions&&(l.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let c=t.renderers[r.name];c?t.renderers[r.name]=function(...h){let m=r.renderer.apply(this,h);return m===!1&&(m=c.apply(this,h)),m}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let c=t[r.level];c?c.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),o.extensions=t),l.renderer){let r=this.defaults.renderer||new Ea(this.defaults);for(let c in l.renderer){if(!(c in r))throw new Error(`renderer '${c}' does not exist`);if(["options","parser"].includes(c))continue;let h=c,m=l.renderer[h],y=r[h];r[h]=(...p)=>{let x=m.apply(r,p);return x===!1&&(x=y.apply(r,p)),x||""}}o.renderer=r}if(l.tokenizer){let r=this.defaults.tokenizer||new Ta(this.defaults);for(let c in l.tokenizer){if(!(c in r))throw new Error(`tokenizer '${c}' does not exist`);if(["options","rules","lexer"].includes(c))continue;let h=c,m=l.tokenizer[h],y=r[h];r[h]=(...p)=>{let x=m.apply(r,p);return x===!1&&(x=y.apply(r,p)),x}}o.tokenizer=r}if(l.hooks){let r=this.defaults.hooks||new Gs;for(let c in l.hooks){if(!(c in r))throw new Error(`hook '${c}' does not exist`);if(["options","block"].includes(c))continue;let h=c,m=l.hooks[h],y=r[h];Gs.passThroughHooks.has(c)?r[h]=p=>{if(this.defaults.async&&Gs.passThroughHooksRespectAsync.has(c))return(async()=>{let S=await m.call(r,p);return y.call(r,S)})();let x=m.call(r,p);return y.call(r,x)}:r[h]=(...p)=>{if(this.defaults.async)return(async()=>{let S=await m.apply(r,p);return S===!1&&(S=await y.apply(r,p)),S})();let x=m.apply(r,p);return x===!1&&(x=y.apply(r,p)),x}}o.hooks=r}if(l.walkTokens){let r=this.defaults.walkTokens,c=l.walkTokens;o.walkTokens=function(h){let m=[];return m.push(c.call(this,h)),r&&(m=m.concat(r.call(this,h))),m}}this.defaults={...this.defaults,...o}}),this}setOptions(i){return this.defaults={...this.defaults,...i},this}lexer(i,t){return sn.lex(i,t??this.defaults)}parser(i,t){return on.parse(i,t??this.defaults)}parseMarkdown(i){return(t,l)=>{let o={...l},r={...this.defaults,...o},c=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&o.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=i),r.async)return(async()=>{let h=r.hooks?await r.hooks.preprocess(t):t,m=await(r.hooks?await r.hooks.provideLexer():i?sn.lex:sn.lexInline)(h,r),y=r.hooks?await r.hooks.processAllTokens(m):m;r.walkTokens&&await Promise.all(this.walkTokens(y,r.walkTokens));let p=await(r.hooks?await r.hooks.provideParser():i?on.parse:on.parseInline)(y,r);return r.hooks?await r.hooks.postprocess(p):p})().catch(c);try{r.hooks&&(t=r.hooks.preprocess(t));let h=(r.hooks?r.hooks.provideLexer():i?sn.lex:sn.lexInline)(t,r);r.hooks&&(h=r.hooks.processAllTokens(h)),r.walkTokens&&this.walkTokens(h,r.walkTokens);let m=(r.hooks?r.hooks.provideParser():i?on.parse:on.parseInline)(h,r);return r.hooks&&(m=r.hooks.postprocess(m)),m}catch(h){return c(h)}}}onError(i,t){return l=>{if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,i){let o="<p>An error occurred:</p><pre>"+mn(l.message+"",!0)+"</pre>";return t?Promise.resolve(o):o}if(t)return Promise.reject(l);throw l}}},Di=new FN;function $e(i,t){return Di.parse(i,t)}$e.options=$e.setOptions=function(i){return Di.setOptions(i),$e.defaults=Di.defaults,my($e.defaults),$e};$e.getDefaults=Mc;$e.defaults=Li;$e.use=function(...i){return Di.use(...i),$e.defaults=Di.defaults,my($e.defaults),$e};$e.walkTokens=function(i,t){return Di.walkTokens(i,t)};$e.parseInline=Di.parseInline;$e.Parser=on;$e.parser=on.parse;$e.Renderer=Ea;$e.TextRenderer=qc;$e.Lexer=sn;$e.lexer=sn.lex;$e.Tokenizer=Ta;$e.Hooks=Gs;$e.parse=$e;$e.options;$e.setOptions;$e.use;$e.walkTokens;$e.parseInline;on.parse;sn.lex;const Ny=({message:i})=>{const t=i.role==="user",l=i.role==="system",o=r=>({__html:$e(r,{gfm:!0,breaks:!0})});return l?v.jsx("div",{className:"text-center my-4",children:v.jsx("p",{className:"text-xs text-gray-500 bg-gray-800/50 rounded-full px-4 py-1 inline-block",children:i.content})}):v.jsx("div",{className:`flex my-2 ${t?"justify-end":"justify-start"}`,children:v.jsx("div",{className:`max-w-xl lg:max-w-2xl px-4 py-3 rounded-2xl shadow ${t?"bg-teal-600 text-white rounded-br-none":"bg-gray-700 text-gray-200 rounded-bl-none"}`,children:i.isLoading?v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),v.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),v.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}):v.jsx("div",{className:"prose prose-sm prose-invert",dangerouslySetInnerHTML:o(i.content)})})})},ON=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),YN=({onFilesDropped:i})=>{const[t,l]=Q.useState(!1),o=Q.useRef(null),r=p=>{p.preventDefault(),p.stopPropagation(),l(!0)},c=p=>{p.preventDefault(),p.stopPropagation(),l(!1)},h=p=>{if(p.preventDefault(),p.stopPropagation(),l(!1),p.dataTransfer.files&&p.dataTransfer.files.length>0){const x=Array.from(p.dataTransfer.files).slice(0,5);i(x)}},m=p=>{if(p.target.files&&p.target.files.length>0){const x=Array.from(p.target.files).slice(0,5);i(x)}},y=()=>{var p;(p=o.current)==null||p.click()};return v.jsx("div",{className:"p-4 bg-gray-800 border-t border-gray-700",children:v.jsxs("div",{className:`relative bg-gray-700 rounded-xl flex items-center justify-center transition-all duration-200 h-24 border-2 border-dashed ${t?"border-teal-500 bg-teal-500/10":"border-gray-600"}`,onDragOver:r,onDragLeave:c,onDrop:h,children:[v.jsx("input",{ref:o,type:"file",multiple:!0,onChange:m,className:"hidden",accept:"image/*,video/*,audio/*,.txt,.md"}),v.jsxs("div",{className:"text-center text-gray-400",children:[v.jsx("p",{children:"Drag & drop up to 5 files here"}),v.jsx("p",{className:"text-xs my-1",children:"or"}),v.jsxs("button",{onClick:y,className:"flex items-center mx-auto space-x-2 bg-gray-600 hover:bg-gray-500 text-gray-200 px-3 py-1 rounded-md text-sm transition-colors",children:[v.jsx(ON,{className:"h-4 w-4"}),v.jsx("span",{children:"Choose Files"})]})]})]})})},$N=({messages:i,onFilesDropped:t,isLoading:l})=>{const o=Q.useRef(null),r=()=>{var c;(c=o.current)==null||c.scrollIntoView({behavior:"smooth"})};return Q.useEffect(()=>{r()},[i]),v.jsxs("div",{className:"flex-grow flex flex-col bg-gray-900 h-full",children:[v.jsxs("div",{className:"flex-grow p-4 overflow-y-auto relative",children:[i.length===0?v.jsx("div",{className:"flex h-full items-center justify-center text-center p-4",children:v.jsx("p",{className:"bg-gray-800/80 rounded-full px-4 py-2 text-gray-400",children:"Welcome! Add employee profiles and drop files to begin."})}):i.map(c=>v.jsx(Ny,{message:c},c.id)),v.jsx("div",{ref:o})]}),v.jsx(YN,{onFilesDropped:t})]})},JN=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5L19 19H5L12 5Z"})}),XN=({onSendMessage:i,onFilesDropped:t,isLoading:l})=>{const[o,r]=Q.useState(""),c=Q.useRef(null),[h,m]=Q.useState(!1),y=()=>{o.trim()&&(i(o.trim()),r(""),c.current&&(c.current.style.height="auto"))},p=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),y())},x=N=>{r(N.target.value),N.target.style.height="auto",N.target.style.height=`${N.target.scrollHeight}px`},S=N=>{N.preventDefault(),N.stopPropagation(),m(!0)},E=N=>{N.preventDefault(),N.stopPropagation(),m(!1)},A=N=>{if(N.preventDefault(),N.stopPropagation(),m(!1),N.dataTransfer.files&&N.dataTransfer.files.length>0){const R=Array.from(N.dataTransfer.files).slice(0,5);t(R)}};return v.jsx("div",{className:"p-4 bg-gray-800 border-t border-gray-700",children:v.jsxs("div",{className:`relative bg-gray-700 rounded-xl flex items-center transition-all duration-200 ${h?"ring-2 ring-teal-500 shadow-lg":""}`,onDragOver:S,onDragLeave:E,onDrop:A,children:[h&&v.jsx("div",{className:"absolute inset-0 bg-teal-500/20 rounded-xl flex items-center justify-center pointer-events-none",children:v.jsx("p",{className:"font-bold text-teal-300",children:"Drop to Upload"})}),v.jsx("textarea",{ref:c,value:o,onChange:x,onKeyDown:p,placeholder:"Type a message or drag & drop up to 5 files here...",className:"w-full bg-transparent p-3 pl-4 pr-14 text-gray-200 placeholder-gray-400 resize-none focus:outline-none",rows:1,style:{maxHeight:"12rem"},disabled:l}),v.jsx("div",{className:"absolute right-2 bottom-2 flex items-center space-x-1",children:v.jsx("button",{onClick:y,disabled:l||!o.trim(),className:"p-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 disabled:bg-gray-600 disabled:cursor-not-allowed transition-colors",children:v.jsx(JN,{className:"h-5 w-5"})})})]})})},KN=({messages:i,onSendMessage:t,isLoading:l})=>{const o=Q.useRef(null),[r,c]=Q.useState(!1),h=()=>{var p;(p=o.current)==null||p.scrollIntoView({behavior:"smooth"})};Q.useEffect(()=>{h()},[i]);const m=p=>{t(p,r)},y=p=>{};return v.jsxs("div",{className:"flex-grow flex flex-col bg-gray-900 h-full",children:[v.jsxs("div",{className:"p-3 border-b border-gray-700 bg-gray-800/50",children:[v.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:r,onChange:p=>c(p.target.checked),className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500 focus:ring-offset-gray-800"}),v.jsx("span",{className:"text-sm font-medium text-gray-200 select-none",children:"Analyze Entire Case Context"})]}),v.jsx("p",{className:"text-xs text-gray-500 mt-1 pl-7",children:"When enabled, the AI will review all evidence, profiles, and testimony to answer your question."})]}),v.jsxs("div",{className:"flex-grow p-4 overflow-y-auto",children:[i.map(p=>v.jsx(Ny,{message:p},p.id)),v.jsx("div",{ref:o})]}),v.jsx(XN,{onSendMessage:m,onFilesDropped:y,isLoading:l})]})},Eg=({score:i})=>{const t=Math.max(0,Math.min(10,i||0)),o=t<=4?`rgb(${Math.round(255*(t/4))}, 255, 0)`:`rgb(255, ${Math.round(255*(1-(t-4)/6))}, 0)`,r=`${t*10}%`;return v.jsxs("div",{children:[v.jsxs("div",{className:"text-xs text-gray-400 mb-1 flex justify-between",children:[v.jsx("span",{children:"Severity Score"}),v.jsxs("span",{children:[t,"/10"]})]}),v.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2.5",children:v.jsx("div",{className:"h-2.5 rounded-full transition-all duration-500",style:{width:r,backgroundColor:o}})})]})},QN=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),wy=({className:i})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jN=({file:i,onConfirm:t})=>{var y;const l=((y=i.analysis)==null?void 0:y.recognizedEmployees)||[],[o,r]=Q.useState(l.reduce((p,x)=>({...p,[x.name]:!0}),{})),c=p=>{r(x=>({...x,[p]:!x[p]}))},h=()=>{const p=l.filter(x=>o[x.name]);t(i.id,p)},m=l.every(p=>o[p.name]);return v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsxs("div",{className:"pb-3 border-b border-gray-700 mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-teal-400",children:"Recognition Review"}),v.jsxs("p",{className:"text-xs text-gray-400",children:[`Confirm the AI's findings for "`,i.name,'" before saving the report.']})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 space-y-2",children:l.length===0?v.jsx("div",{className:"text-center text-gray-500 pt-10",children:v.jsx("p",{children:"No registered employees were detected in this file."})}):l.map((p,x)=>v.jsxs("div",{className:`p-2 rounded-md flex justify-between items-center transition-colors ${o[p.name]?"bg-gray-700":"bg-red-900/50"}`,children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-semibold text-sm",children:p.name}),v.jsxs("p",{className:"text-xs text-gray-400",children:["Confidence: ",p.confidence,"% at ",p.timestamp]})]}),v.jsx("div",{className:"flex space-x-2",children:v.jsx("button",{onClick:()=>c(p.name),title:o[p.name]?"Mark as incorrect":"Confirm match",children:o[p.name]?v.jsx(wy,{className:"h-6 w-6 text-gray-500 hover:text-red-400"}):v.jsx(QN,{className:"h-6 w-6 text-gray-500 hover:text-green-400"})})})]},x))}),v.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:v.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center space-x-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 rounded-md transition-colors",children:[v.jsx(bl,{className:"h-5 w-5"}),v.jsx("span",{children:m&&l.length>0?"Confirm All & Save Report":"Save Confirmed & Finalize"})]})})]})},ZN=({file:i,allEmployees:t,onConfirm:l})=>{const[o,r]=Q.useState([]),[c,h]=Q.useState(""),m=t.filter(S=>!o.includes(S.name)),y=()=>{c&&!o.includes(c)&&r(S=>[...S,c]),h("")},p=S=>{r(E=>E.filter(A=>A!==S))},x=()=>{l(i.id,o)};return v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsxs("div",{className:"pb-3 border-b border-gray-700 mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-teal-400",children:"Manual Recognition"}),v.jsxs("p",{className:"text-xs text-gray-400",children:['AI analysis for "',i.name,'" did not detect any registered employees. Please select who is present in this file.']})]}),v.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-3 py-2",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"employee-select",className:"block text-sm font-medium text-gray-300 mb-1",children:"Select an Employee"}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsxs("select",{id:"employee-select",value:c,onChange:S=>h(S.target.value),className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm",disabled:m.length===0,children:[v.jsx("option",{value:"",children:"-- Choose an employee --"}),m.map(S=>v.jsx("option",{value:S.name,children:S.name},S.id))]}),v.jsx("button",{onClick:y,disabled:!c,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-500 rounded-md transition-colors disabled:bg-gray-600",children:"Add"})]})]}),o.length>0&&v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Selected for Re-analysis:"}),v.jsx("ul",{className:"space-y-2",children:o.map(S=>v.jsxs("li",{className:"flex items-center justify-between bg-gray-700/50 p-2 rounded-md",children:[v.jsx("span",{className:"text-sm text-gray-200",children:S}),v.jsx("button",{onClick:()=>p(S),title:"Remove",children:v.jsx(wy,{className:"h-5 w-5 text-gray-400 hover:text-red-400"})})]},S))})]})]}),v.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex flex-col space-y-2",children:[v.jsxs("button",{onClick:x,disabled:o.length===0,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 rounded-md transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed",children:[v.jsx(bl,{className:"h-5 w-5"}),v.jsx("span",{children:"Re-analyze with Selected Profiles"})]}),v.jsx("button",{onClick:()=>l(i.id,[]),className:"w-full text-sm text-gray-300 bg-gray-700 hover:bg-gray-600 rounded-md py-2 transition-colors",title:"Continue without manual tags",children:"Skip (Continue without tags)"})]})]})},WN=({file:i,caseItem:t=null,employees:l,onRecognitionReview:o,onRerunAnalysis:r,onUpdateUnifiedAnalysis:c,onRerunUnifiedCase:h,onRerunSingle:m})=>{const[y,p]=Q.useState(!1),[x,S]=Q.useState(!1),E=Q.useRef(void 0),A=typeof window<"u"&&"speechSynthesis"in window,[D,N]=Q.useState(!1),[R,I]=Q.useState(null),[H,V]=Q.useState("These files are images only. Do not infer that children are present unless there is clear, direct, unambiguous visual evidence. If uncertain, set 'Children Detected by AI' to 'No' and include a brief uncertainty note.");Q.useEffect(()=>{t&&t.analysis?(N(!1),I(t.analysis)):I(null)},[t==null?void 0:t.id]);const[B,Y]=Q.useState("");Q.useEffect(()=>{if(i){const ie=i.type==="image"?"This is an image file. Do not infer that children are present unless there is clear, direct, unambiguous visual evidence. If uncertain, set 'Children Detected by AI' to 'No'.":"Re-analyze this file. Be concise, factual, and avoid speculation.";Y(ie)}},[i==null?void 0:i.id]),Q.useEffect(()=>{if(!A)return;let ie=!1;return(async()=>{const ce=await Ii();ie||(E.current=ce)})(),()=>{ie=!0,(speechSynthesis.speaking||speechSynthesis.pending)&&Wt()}},[A]);const ee=async ie=>{if(!A){alert("Text-to-speech is not supported in this browser.");return}const ce=ie.trim();if(!ce)return;(speechSynthesis.speaking||speechSynthesis.pending)&&Wt(),p(!1),S(!1);let U=E.current;if(!U)try{U=await Ii(),U&&(E.current=U)}catch(Z){console.error("Unable to resolve a preferred voice for speech synthesis.",Z)}Il(ce,{voice:U,rate:1,pitch:1,onstart:()=>{p(!0),S(!1)},onend:()=>{p(!1),S(!1)}})},ne=()=>{!A||!y||(x?(Ml(),S(!1)):(Rl(),S(!0)))},he=()=>{A&&(Wt(),p(!1),S(!1))},ae=()=>{var ce,U,Z,de,_e,Re;const ie=window.open("","_blank");if(ie&&i&&i.analysis){const _=i.analysis,q=`
                <html>
                <head>
                    <title>Analysis Report: ${i.name}</title>
                    <link rel="stylesheet" href="/report.css">
                </head>
                <body>
                    <header>
                        <h1>Analysis Report</h1>
                        <p><strong>File:</strong> ${i.name}</p>
                        <p><strong>Type:</strong> ${i.type}</p>
                        <p><strong>Location:</strong> ${i.location||"Not Specified"}</p>
                        <p><strong>Children Detected by AI:</strong> ${_.childrenDetected?"Yes":"No"}</p>
                        <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
                        <p><strong>SHA-256 Hash:</strong> ${i.hash}</p>
                    </header>
                    <main>
                        <section>
                            <h2>New Findings Summary (from this file)</h2>
                            <p>${_.newFindingsSummary}</p>
                        </section>
                        <section>
                            <h2>Overall Summary</h2>
                            <p>${_.summary}</p>
                        </section>
                        <section>
                            <h2>AI Confidence: ${_.confidenceScore}%</h2>
                            <h2>Severity Score: ${_.severityScore}/10</h2>
                        </section>
                        <section>
                            <h2>Key Observations</h2>
                            <ul>
                                ${((ce=_.keyObservations)==null?void 0:ce.map(W=>`<li><strong>${W.timestamp}:</strong> ${W.description}</li>`).join(""))||""}
                            </ul>
                        </section>
                        <section>
                            <h2>Timeline Events</h2>
                            <ul>
                                ${((U=_.timelineEvents)==null?void 0:U.map(W=>`<li><strong>${W.timestamp}:</strong> ${W.description} <em>(Subjects: ${W.subjects.join(", ")})</em></li>`).join(""))||""}
                            </ul>
                        </section>
                        <section>
                            <h2>Cross-References to Past Evidence</h2>
                            <ul>
                                ${((Z=_.crossReferences)==null?void 0:Z.map(W=>`<li><strong>File: ${W.fileName}:</strong> ${W.observation}</li>`).join(""))||""}
                            </ul>
                        </section>
                        <section>
                            <h2>Emotional Analysis</h2>
                             <ul>
                                ${((de=_.emotionalAnalysis)==null?void 0:de.map(W=>`<li><strong>${W.emotion}:</strong> ${W.evidence}</li>`).join(""))||""}
                            </ul>
                        </section>
                         <section>
                            <h2>Recognized Employees</h2>
                            <ul>
                                ${(((_e=_.recognizedEmployees)==null?void 0:_e.length)||0)>0?_.recognizedEmployees.map(W=>`<li><strong>${W.name}</strong> (at ${W.timestamp}) - <em>${W.confidence}% confidence</em></li>`).join(""):"<li>None specified or detected.</li>"}
                            </ul>
                        </section>
                         <section>
                            <h2>Potential Violations</h2>
                            <ul>
                                ${(((Re=_.potentialViolations)==null?void 0:Re.length)||0)>0?_.potentialViolations.map(W=>`<li>${W}</li>`).join(""):"<li>None detected.</li>"}
                            </ul>
                        </section>
                        ${_.fullTranscript&&_.fullTranscript!=="N/A"?`
                        <section>
                            <h2>Full Transcript</h2>
                            <pre>${_.fullTranscript}</pre>
                        </section>
                        `:""}
                    </main>
                    <footer>
                        <p>This report was generated by the AI Evidence Companion. It is intended for informational purposes and does not constitute legal advice.</p>
                    </footer>
                </body>
                </html>
            `;ie.document.write(q),ie.document.close(),ie.print()}};if(!i&&(!t||!t.analysis))return v.jsx("aside",{className:"w-full h-full bg-gray-800 p-6 border-l border-gray-700 flex flex-col items-center justify-center text-center",children:v.jsxs("div",{className:"text-gray-500",children:[v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Analysis Report"}),v.jsx("p",{children:"Select a file or unified case to view its analysis report."})]})});if(!i&&t&&t.analysis){const ie=t.analysis,ce=()=>{const _=[];return _.push(`Unified analysis report for ${t.name}.`),_.push(`New findings summary: ${ie.newFindingsSummary}.`),_.push(`Overall summary: ${ie.summary}.`),_.push(`Confidence ${ie.confidenceScore} percent. Severity ${ie.severityScore} of 10.`),ie.keyObservations&&ie.keyObservations.length>0&&(_.push("Key observations:"),ie.keyObservations.slice(0,12).forEach((q,W)=>{const j=q.timestamp&&q.timestamp!=="N/A"?`at ${q.timestamp}`:"";_.push(`${W+1}. ${j} ${q.description}`)})),ie.timelineEvents&&ie.timelineEvents.length>0&&(_.push("Timeline highlights:"),ie.timelineEvents.slice(0,8).forEach((q,W)=>{_.push(`${W+1}. ${q.timestamp}: ${q.description}.`)})),_.join(" ")},U=async()=>ee(ce()),Z=(_,q,W)=>{const j=!q||Array.isArray(q)&&q.length===0;return v.jsxs("div",{className:"py-3",children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-300 mb-2",children:_}),j?v.jsx("p",{className:"text-sm text-gray-400 italic",children:W||"None detected."}):q]})},de=()=>{!t||!R||!c||(c(t.id,R),N(!1))},_e=()=>{!t||!h||h(t.id,H)},Re=({label:_,value:q,onChange:W,min:j=0,max:xe=100,suffix:Ee})=>v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:_}),v.jsx("input",{type:"number",className:"w-full bg-gray-700 rounded px-2 py-1 text-sm",value:q,min:j,max:xe,onChange:we=>W(Number(we.target.value))}),Ee&&v.jsx("span",{className:"text-xs text-gray-500",children:Ee})]});return v.jsxs("aside",{className:"w-full h-full bg-gray-800 p-4 border-l border-gray-700 flex flex-col",children:[v.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-700 mb-2",children:[v.jsxs("h3",{className:"text-lg font-bold text-teal-400 truncate pr-4",title:t.name,children:["Unified Report: ",t.name]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("button",{onClick:()=>{N(!D),I(ie)},className:"flex items-center space-x-2 bg-gray-700 hover:bg-gray-600 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:v.jsx("span",{children:D?"Cancel Edit":"Edit"})}),y?v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:ne,className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:[x?v.jsx(gn,{className:"h-4 w-4"}):v.jsx(Fs,{className:"h-4 w-4"}),v.jsx("span",{children:x?"Resume":"Pause"})]}),v.jsxs("button",{onClick:he,className:"flex items-center space-x-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:[v.jsx(Os,{className:"h-4 w-4"}),v.jsx("span",{children:"Stop"})]})]}):v.jsxs("button",{onClick:U,className:"flex items-center space-x-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:[v.jsx(gn,{className:"h-4 w-4"}),v.jsx("span",{children:"Listen"})]})]})]}),D&&R?v.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"New Findings Summary"}),v.jsx("textarea",{className:"w-full bg-gray-700 rounded p-2 text-sm",rows:4,value:R.newFindingsSummary,onChange:_=>I({...R,newFindingsSummary:_.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Overall Summary"}),v.jsx("textarea",{className:"w-full bg-gray-700 rounded p-2 text-sm",rows:5,value:R.summary,onChange:_=>I({...R,summary:_.target.value})})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[v.jsx(Re,{label:"Confidence",value:R.confidenceScore,onChange:_=>I({...R,confidenceScore:_}),min:0,max:100,suffix:" %"}),v.jsx(Re,{label:"Severity",value:R.severityScore,onChange:_=>I({...R,severityScore:_}),min:0,max:10}),v.jsx("div",{className:"flex items-end",children:v.jsxs("label",{className:"inline-flex items-center space-x-2 mb-1",children:[v.jsx("input",{type:"checkbox",checked:R.childrenDetected,onChange:_=>I({...R,childrenDetected:_.target.checked}),className:"form-checkbox h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded"}),v.jsx("span",{className:"text-xs text-gray-300",children:"Children Detected by AI"})]})})]}),v.jsx("div",{className:"flex justify-end pt-2 border-t border-gray-700",children:v.jsx("button",{onClick:de,className:"bg-teal-600 hover:bg-teal-500 text-white text-xs font-bold py-2 px-4 rounded-md",children:"Save Changes"})})]}):v.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 divide-y divide-gray-700",children:[Z("New Findings Summary",v.jsx("p",{className:"text-sm",children:ie.newFindingsSummary})),Z("Overall Summary",v.jsx("p",{className:"text-sm",children:ie.summary})),v.jsxs("div",{className:"py-3",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-400 mb-2",children:"Confidence"}),v.jsxs("p",{className:"text-2xl font-bold text-teal-300",children:[ie.confidenceScore,v.jsx("span",{className:"text-lg",children:"%"})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-300 mb-2",children:"Severity"}),v.jsx(Eg,{score:ie.severityScore})]})]}),v.jsxs("div",{className:"mt-3",children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-300",children:"Children Detected by AI"}),v.jsx("p",{className:`text-sm font-bold ${ie.childrenDetected?"text-red-400":"text-gray-300"}`,children:ie.childrenDetected?"Yes":"No"})]})]}),Z("Key Observations",v.jsx("ul",{className:"space-y-2 text-sm",children:(ie.keyObservations||[]).map((_,q)=>v.jsxs("li",{className:"flex items-start",children:[_.timestamp!=="N/A"&&v.jsx("span",{className:"bg-gray-600 text-xs font-mono rounded px-1.5 py-0.5 mr-2 mt-0.5",children:_.timestamp}),v.jsx("p",{className:"flex-1",children:_.description})]},q))}),"No specific concerning observations were flagged."),Z("Timeline Events",v.jsx("ul",{className:"space-y-2 text-sm",children:(ie.timelineEvents||[]).map((_,q)=>v.jsxs("li",{children:[v.jsx("span",{className:"bg-gray-600 text-xs font-mono rounded px-1.5 py-0.5 mr-2",children:_.timestamp}),_.description," ",v.jsxs("span",{className:"text-gray-400 text-xs",children:["(",_.subjects.join(", "),")"]})]},q))}),"No timeline events were extracted."),Z("Cross-References to Past Evidence",v.jsx("ul",{className:"space-y-2 text-sm",children:(ie.crossReferences||[]).map((_,q)=>v.jsxs("li",{children:[v.jsxs("strong",{children:[_.fileName,":"]})," ",_.observation]},q))}),"No connections to past evidence were identified."),Z("Emotional Analysis",v.jsx("ul",{className:"space-y-1.5 text-sm",children:(ie.emotionalAnalysis||[]).map((_,q)=>v.jsxs("li",{children:[v.jsxs("strong",{children:[_.emotion,":"]})," ",_.evidence]},q))}),"No distinct emotional cues were detected."),Z("Recognized Employees",v.jsx("ul",{className:"space-y-1.5 text-sm",children:(ie.recognizedEmployees||[]).map((_,q)=>v.jsxs("li",{children:[v.jsx("strong",{children:_.name})," (at ",_.timestamp,") - ",v.jsxs("em",{children:[_.confidence,"% confidence"]})]},q))})),Z("Potential Violations",v.jsx("ul",{className:"space-y-1.5 text-sm list-disc list-inside",children:(ie.potentialViolations||[]).map((_,q)=>v.jsx("li",{children:_},q))})),ie.fullTranscript&&ie.fullTranscript!=="N/A"&&Z("Full Transcript",v.jsxs("details",{children:[v.jsx("summary",{className:"font-semibold text-sm text-gray-300 cursor-pointer hover:text-white",children:"View Full Transcript"}),v.jsx("div",{className:"mt-2 p-2 bg-gray-900 rounded-md text-xs max-h-48 overflow-y-auto",children:v.jsx("p",{className:"whitespace-pre-wrap font-mono",children:ie.fullTranscript})})]}))]}),v.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[v.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Re-run Unified Analysis (optional notes)"}),v.jsx("textarea",{className:"w-full bg-gray-700 rounded p-2 text-sm",rows:3,value:H,onChange:_=>V(_.target.value)}),v.jsx("div",{className:"mt-2 flex justify-end",children:v.jsx("button",{onClick:_e,className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold py-2 px-4 rounded-md",children:"Re-run Unified Analysis"})})]})]})}if(i.status==="analyzed-pending-review"&&i.analysis)return v.jsxs("aside",{className:"w-full h-full bg-gray-800 p-4 border-l border-gray-700 flex flex-col",children:[v.jsx(jN,{file:i,onConfirm:o}),v.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[v.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Re-run Analysis (optional notes)"}),v.jsx("textarea",{className:"w-full bg-gray-700 rounded p-2 text-sm",rows:3,value:B,onChange:ie=>Y(ie.target.value)}),v.jsx("div",{className:"mt-2 flex justify-end",children:v.jsx("button",{onClick:()=>m&&m(i.id,B),className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold py-2 px-4 rounded-md",children:"Re-run Analysis"})})]})]});if(i.status==="analyzed-needs-manual-tagging")return v.jsx("aside",{className:"w-full h-full bg-gray-800 p-4 border-l border-gray-700 flex flex-col",children:v.jsx(ZN,{file:i,allEmployees:l,onConfirm:r})});if(!i.analysis)return v.jsx("aside",{className:"w-full h-full bg-gray-800 p-6 border-l border-gray-700 flex flex-col items-center justify-center text-center",children:v.jsxs("div",{className:"text-gray-500",children:[v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Analysis Report"}),v.jsx("p",{children:"This file has not been analyzed yet."}),i.status==="analyzing"&&v.jsx("p",{className:"text-teal-400",children:"Analysis in progress..."})]})});const{analysis:te}=i,re=()=>{const ie=[];return ie.push(`Analysis report for ${i.name}.`),ie.push(`New findings summary: ${te.newFindingsSummary}.`),ie.push(`Overall summary: ${te.summary}.`),ie.push(`Confidence ${te.confidenceScore} percent. Severity ${te.severityScore} of 10.`),te.keyObservations&&te.keyObservations.length>0&&(ie.push("Key observations:"),te.keyObservations.slice(0,12).forEach((ce,U)=>{const Z=ce.timestamp&&ce.timestamp!=="N/A"?`at ${ce.timestamp}`:"";ie.push(`${U+1}. ${Z} ${ce.description}`)})),te.timelineEvents&&te.timelineEvents.length>0&&(ie.push("Timeline highlights:"),te.timelineEvents.slice(0,8).forEach((ce,U)=>{ie.push(`${U+1}. ${ce.timestamp}: ${ce.description}.`)})),ie.join(" ")},me=async()=>{te&&await ee(re())},Ie=(ie,ce,U)=>{const Z=!ce||Array.isArray(ce)&&ce.length===0;return v.jsxs("div",{className:"py-3",children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-300 mb-2",children:ie}),Z?v.jsx("p",{className:"text-sm text-gray-400 italic",children:U||"None detected."}):ce]})};return v.jsxs("aside",{className:"w-full h-full bg-gray-800 p-4 border-l border-gray-700 flex flex-col",children:[v.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-700 mb-2",children:[v.jsxs("h3",{className:"text-lg font-bold text-teal-400 truncate pr-4",title:i.name,children:["Report: ",i.name]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[y?v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:ne,className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:[x?v.jsx(gn,{className:"h-4 w-4"}):v.jsx(Fs,{className:"h-4 w-4"}),v.jsx("span",{children:x?"Resume":"Pause"})]}),v.jsxs("button",{onClick:he,className:"flex items-center space-x-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:[v.jsx(Os,{className:"h-4 w-4"}),v.jsx("span",{children:"Stop"})]})]}):v.jsxs("button",{onClick:me,className:"flex items-center space-x-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:[v.jsx(gn,{className:"h-4 w-4"}),v.jsx("span",{children:"Listen"})]}),v.jsxs("button",{onClick:ae,className:"flex items-center space-x-2 bg-teal-600 hover:bg-teal-500 text-white text-xs font-bold py-2 px-3 rounded-md transition-colors",children:[v.jsx(bl,{className:"h-4 w-4"}),v.jsx("span",{children:"Generate Report"})]})]})]}),v.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 divide-y divide-gray-700",children:[Ie("New Findings Summary",v.jsx("p",{className:"text-sm",children:te.newFindingsSummary})),Ie("Overall Summary",v.jsx("p",{className:"text-sm",children:te.summary})),v.jsxs("div",{className:"py-3",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-400 mb-2",children:"Confidence"}),v.jsxs("p",{className:"text-2xl font-bold text-teal-300",children:[te.confidenceScore,v.jsx("span",{className:"text-lg",children:"%"})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-300 mb-2",children:"Severity"}),v.jsx(Eg,{score:te.severityScore})]})]}),v.jsxs("div",{className:"mt-3",children:[v.jsx("h4",{className:"font-semibold text-sm text-gray-300",children:"Children Detected by AI"}),v.jsx("p",{className:`text-sm font-bold ${te.childrenDetected?"text-red-400":"text-gray-300"}`,children:te.childrenDetected?"Yes":"No"})]})]}),Ie("Key Observations",v.jsx("ul",{className:"space-y-2 text-sm",children:(te.keyObservations||[]).map((ie,ce)=>v.jsxs("li",{className:"flex items-start",children:[ie.timestamp!=="N/A"&&v.jsx("span",{className:"bg-gray-600 text-xs font-mono rounded px-1.5 py-0.5 mr-2 mt-0.5",children:ie.timestamp}),v.jsx("p",{className:"flex-1",children:ie.description})]},ce))}),"No specific concerning observations were flagged."),Ie("Timeline Events",v.jsx("ul",{className:"space-y-2 text-sm",children:(te.timelineEvents||[]).map((ie,ce)=>v.jsxs("li",{children:[v.jsx("span",{className:"bg-gray-600 text-xs font-mono rounded px-1.5 py-0.5 mr-2",children:ie.timestamp}),ie.description," ",v.jsxs("span",{className:"text-gray-400 text-xs",children:["(",ie.subjects.join(", "),")"]})]},ce))}),"No timeline events were extracted."),Ie("Cross-References to Past Evidence",v.jsx("ul",{className:"space-y-2 text-sm",children:(te.crossReferences||[]).map((ie,ce)=>v.jsxs("li",{children:[v.jsxs("strong",{children:[ie.fileName,":"]})," ",ie.observation]},ce))}),"No connections to past evidence were identified."),Ie("Emotional Analysis",v.jsx("ul",{className:"space-y-1.5 text-sm",children:(te.emotionalAnalysis||[]).map((ie,ce)=>v.jsxs("li",{children:[v.jsxs("strong",{children:[ie.emotion,":"]})," ",ie.evidence]},ce))}),"No distinct emotional cues were detected."),Ie("Recognized Employees",v.jsx("ul",{className:"space-y-1.5 text-sm",children:(te.recognizedEmployees||[]).map((ie,ce)=>v.jsxs("li",{children:[v.jsx("strong",{children:ie.name})," (at ",ie.timestamp,") - ",v.jsxs("em",{children:[ie.confidence,"% confidence"]})]},ce))})),Ie("Potential Violations",v.jsx("ul",{className:"space-y-1.5 text-sm list-disc list-inside",children:(te.potentialViolations||[]).map((ie,ce)=>v.jsx("li",{children:ie},ce))})),te.fullTranscript&&te.fullTranscript!=="N/A"&&Ie("Full Transcript",v.jsxs("details",{children:[v.jsx("summary",{className:"font-semibold text-sm text-gray-300 cursor-pointer hover:text-white",children:"View Full Transcript"}),v.jsx("div",{className:"mt-2 p-2 bg-gray-900 rounded-md text-xs max-h-48 overflow-y-auto",children:v.jsx("p",{className:"whitespace-pre-wrap font-mono",children:te.fullTranscript})})]}))]}),v.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[v.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Re-run Analysis (optional notes)"}),v.jsx("textarea",{className:"w-full bg-gray-700 rounded p-2 text-sm",rows:3,value:B,onChange:ie=>Y(ie.target.value)}),v.jsx("div",{className:"mt-2 flex justify-end",children:v.jsx("button",{onClick:()=>m&&m(i.id,B),className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold py-2 px-4 rounded-md",children:"Re-run Analysis"})})]})]})},Cg=({files:i,allFiles:t=[],isOpen:l,onConfirm:o,onCancel:r,maxUnifiedFiles:c=7})=>{const[h,m]=Q.useState(""),[y,p]=Q.useState(""),x=(i==null?void 0:i.length)??0,S=Math.max(0,c-x),E=i&&i.length>0?i[0].id:"none",[A,D]=Q.useState(Array(S).fill(""));if(Q.useEffect(()=>{l&&(D(Array(S).fill("")),m(""),p(""))},[l,E,S]),!l||!i||i.length===0)return null;const N=new Set((i||[]).map(B=>B.id)),R=t.filter(B=>i&&!N.has(B.id)&&B.status==="new").sort((B,Y)=>B.name.localeCompare(Y.name)),I=(B,Y)=>{const ee=[...A];ee[B]=Y,D(ee)},H=()=>{if(!i)return;let B=i.slice(0,c);A.forEach(Y=>{if(Y){const ee=t.find(ne=>ne.id===Y);ee&&B.push(ee)}}),o(B.slice(0,c),h,y)},V=i.length>1?`Analysis Setup for ${i.length} Files`:"Analysis Setup";return v.jsx(ba,{isOpen:l,onClose:r,title:V,initialPosition:{x:Math.max(16,window.innerWidth/2-360),y:80},initialSize:{width:720,height:560},children:v.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl h-full flex flex-col",children:[v.jsx("p",{className:"text-sm text-gray-300 mb-2 font-medium",children:"Provide context for the following file(s):"}),v.jsx("div",{className:"text-xs bg-gray-700/60 p-3 rounded-md max-h-40 overflow-y-auto mb-5 border border-gray-600/40",children:v.jsx("ul",{className:"list-disc list-inside text-gray-200 space-y-1",children:i.map(B=>v.jsx("li",{className:"break-words",children:B.name},B.id))})}),v.jsxs("div",{className:"space-y-4 flex-grow",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Analyze with (optional - up to ",S," additional file",S===1?"":"s",")"]}),v.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map((B,Y)=>v.jsxs("select",{value:B,onChange:ee=>I(Y,ee.target.value),className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-1 focus:ring-teal-500 text-xs",children:[v.jsxs("option",{value:"",children:["-- File ",Y+1," --"]}),R.filter(ee=>!A.includes(ee.id)||ee.id===B).map(ee=>v.jsx("option",{value:ee.id,children:ee.name},ee.id))]},Y))}),v.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Select additional unanalyzed files to cross-reference together."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300 mb-1",children:"Location of Event(s)"}),v.jsx("input",{type:"text",id:"location",value:h,onChange:B=>m(B.target.value),placeholder:"e.g., Main office, Community outing",className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm"}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This location will be applied to all selected files."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-gray-300 mb-1",children:"Instructions / Notes (Optional)"}),v.jsx("textarea",{id:"instructions",value:y,onChange:B=>p(B.target.value),placeholder:"e.g., Focus on the interaction between Jose and Maria.",className:"w-full bg-gray-700 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm resize-y",rows:3}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provide any specific instructions for the AI analysis."})]})]}),v.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[v.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors",children:"Cancel"}),v.jsx("button",{onClick:H,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-500 rounded-md transition-colors",children:"Start Analysis"})]})]})})},Ag={negative:"#F87171",positive:"#4ADE80",neutral:"#9CA3AF",mixed:"#FBBF24"},ew=({data:i})=>{const[t,l]=Q.useState(null),o=800,r=600,c=o/2,h=r/2,m=Math.min(o,r)/2-60,y=Q.useMemo(()=>{const p=new Map,x=i.nodes.length>0?2*Math.PI/i.nodes.length:0;return i.nodes.forEach((S,E)=>{const A=E*x-Math.PI/2;p.set(S.id,{x:c+m*Math.cos(A),y:h+m*Math.sin(A)})}),p},[i.nodes,c,h,m]);return v.jsxs("div",{className:"flex h-full",children:[v.jsx("div",{className:"flex-grow relative bg-gray-800/50 rounded-lg m-4 overflow-hidden",children:v.jsxs("svg",{viewBox:`0 0 ${o} ${r}`,className:"w-full h-full",children:[i.links.map((p,x)=>{const S=y.get(p.source),E=y.get(p.target);if(!S||!E)return null;const A=t===p;return v.jsxs("g",{className:"cursor-pointer group",onClick:()=>l(p),children:[v.jsx("line",{x1:S.x,y1:S.y,x2:E.x,y2:E.y,stroke:Ag[p.sentiment],strokeWidth:A?Math.max(3,p.value)+3:Math.max(2,p.value),className:"transition-all duration-200",opacity:A?1:.6}),v.jsx("line",{x1:S.x,y1:S.y,x2:E.x,y2:E.y,stroke:"transparent",strokeWidth:"20"})]},x)}),i.nodes.map(p=>{const x=y.get(p.id);if(!x)return null;const S=t&&(t.source===p.id||t.target===p.id);return v.jsxs("g",{transform:`translate(${x.x}, ${x.y})`,className:"transition-all duration-200",children:[v.jsx("circle",{r:S?24:20,fill:"#1F2937",stroke:S?"#fbbbf2":"#38bdf8",strokeWidth:"2"}),v.jsx("text",{textAnchor:"middle",dy:"0.3em",fill:"#E5E7EB",fontSize:"12",className:"font-semibold select-none pointer-events-none",children:p.id})]},p.id)})]})}),v.jsxs("aside",{className:"w-96 flex-shrink-0 bg-gray-800 p-4 overflow-y-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-teal-400 border-b border-gray-700 pb-2 mb-4",children:"Interaction Details"}),t?v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("h4",{className:"font-semibold text-gray-200",children:[t.source,"  ",t.target]}),v.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[v.jsxs("span",{children:[t.value," interactions"]}),v.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-500"}),v.jsx("span",{style:{color:Ag[t.sentiment]},className:"font-bold capitalize",children:t.sentiment})]})]}),v.jsxs("div",{children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-300 mb-1",children:"Relationship Summary"}),v.jsx("p",{className:"text-sm text-gray-400",children:t.summary})]}),v.jsxs("div",{children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Interaction Log"}),v.jsx("ul",{className:"space-y-3 text-xs max-h-[60vh] overflow-y-auto pr-2",children:t.interactions.map((p,x)=>v.jsxs("li",{className:"p-2 bg-gray-700/50 rounded-md",children:[v.jsxs("p",{className:"font-mono text-teal-300 truncate",children:[p.file," @ ",p.timestamp]}),v.jsx("p",{className:"mt-1 text-gray-300",children:p.description})]},x))})]})]}):v.jsx("div",{className:"text-center text-gray-500 pt-16",children:v.jsx("p",{children:"Select a line between two people to see details about their interactions."})})]})]})},tw=({files:i,mapData:t,isLoading:l,onGenerateMap:o})=>{const r=i.filter(c=>c.status==="analyzed").length;return l?v.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center p-8 bg-gray-900",children:[v.jsx(wa,{className:"h-12 w-12 text-teal-400 mb-4"}),v.jsx("h2",{className:"text-xl font-semibold text-gray-200",children:"Synthesizing Case Data..."}),v.jsx("p",{className:"text-gray-400",children:"The AI is analyzing all evidence to build the relationship map. This may take a moment."})]}):t?v.jsxs("div",{className:"flex-grow flex flex-col bg-gray-900 h-full overflow-y-auto",children:[v.jsxs("div",{className:"p-6",children:[v.jsx("h2",{className:"text-xl font-bold text-teal-400 mb-2",children:"AI Case Summary"}),v.jsx("p",{className:"text-sm text-gray-300 mb-4 prose prose-sm prose-invert max-w-none",children:t.overallSummary})]}),v.jsx("div",{className:"flex-grow relative",children:v.jsx(ew,{data:t})})]}):v.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center p-8 bg-gray-900",children:[v.jsx(bg,{className:"h-16 w-16 text-gray-600 mb-4"}),v.jsx("h2",{className:"text-2xl font-bold text-gray-200",children:"Case Relationship Dashboard"}),v.jsx("p",{className:"max-w-md mt-2 text-gray-400",children:"Generate an interactive map to visualize the relationships and interactions between individuals across all your analyzed evidence."}),v.jsx("button",{onClick:o,disabled:r<1,className:"mt-6 bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 px-6 rounded-lg transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed",children:r<1?"Analyze at least one file first":"Generate Relationship Map"})]})},_g=({onMouseDown:i})=>v.jsx("div",{onMouseDown:i,className:"flex-shrink-0 w-1.5 cursor-ew-resize bg-gray-700 hover:bg-teal-500 active:bg-teal-400 transition-colors duration-200"}),nw=({type:i})=>{const t="h-8 w-8 mx-auto mb-2";switch(i){case"image":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${t} text-blue-400`,viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"video":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${t} text-purple-400`,viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 001.553.832l3-2a1 1 0 000-1.664l-3-2z"})});case"audio":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${t} text-green-400`,viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})});case"document":return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${t} text-yellow-400`,viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V8a2 2 0 00-2-2h-5L9 4H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z",clipRule:"evenodd"})});default:return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${t} text-gray-400`,viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V8a2 2 0 00-2-2h-5L9 4H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z",clipRule:"evenodd"})})}},iw=({file:i,onAnalyze:t})=>{const l=()=>{const o=i.url||(i.storedFileName?`/api/storage/file/${encodeURIComponent(i.storedFileName)}`:void 0);if(!o){alert("Source file not available. Re-upload to preview.");return}window.open(o,"_blank","noopener,noreferrer")};return v.jsxs("div",{className:"w-40 h-44 flex-shrink-0 bg-gray-700/50 rounded-lg flex flex-col p-3 text-center justify-between group relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-gray-900/20 opacity-0 group-hover:opacity-100 transition-opacity"}),v.jsxs("div",{className:"relative",children:[v.jsx(nw,{type:i.type}),v.jsx("p",{className:"text-xs text-gray-300 truncate",children:i.name})]}),v.jsx("button",{onClick:l,className:"relative w-full mb-2 flex items-center justify-center space-x-2 bg-gray-600/70 hover:bg-gray-600 text-white font-semibold py-1.5 rounded-md transition-all text-xs",children:v.jsx("span",{children:"Open"})}),v.jsxs("button",{onClick:()=>t(i.id),className:"relative w-full flex items-center justify-center space-x-2 bg-teal-600/80 hover:bg-teal-600 text-white font-bold py-2 rounded-md transition-all text-sm",children:[v.jsx(bl,{className:"h-4 w-4"}),v.jsx("span",{children:"Analyze"})]})]})},lw=({files:i,onAnalyze:t})=>i.length===0?null:v.jsx("div",{className:"flex-shrink-0 border-b border-gray-700",style:{height:"260px"},children:v.jsxs("div",{className:"p-4 bg-gray-800/30 h-full flex flex-col",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:"Unanalyzed Files"}),v.jsxs("span",{className:"text-xs text-gray-500 bg-gray-700 px-2 py-0.5 rounded",children:[i.length," file",i.length!==1?"s":""]})]}),v.jsx("div",{className:"flex-grow overflow-x-auto overflow-y-hidden",children:v.jsx("div",{className:"flex space-x-3 h-full pb-2",children:i.map(l=>v.jsx(iw,{file:l,onAnalyze:t},l.id))})})]})}),Ng=[{type:"h2",id:"heading-1",text:"Welcome to Your AI Evidence Companion"},{type:"p",id:"p-1",text:"This tool is designed to be your private, intelligent assistant for reviewing and understanding sensitive multimedia evidence. It helps you organize your thoughts, identify key moments, and build a clear picture of events, all in a secure and objective way."},{type:"h3",id:"heading-2",text:"How It Works: A Step-by-Step Guide"},{type:"h4",id:"heading-3",text:"Step 1: Tell Your Story (My Testimony)"},{type:"p",id:"p-2",text:`In the top-left corner, you'll find the "My Testimony" box. Think of this as giving the AI your side of the story. Write down what happened, who was involved, and what your concerns are. When you save it, the AI creates a short summary to confirm it understands. This context is crucialit helps the AI know what to look for when it analyzes your evidence.`},{type:"h4",id:"heading-4",text:"Step 2: Create Employee Profiles"},{type:"p",id:"p-3",text:`Before analyzing evidence, it's helpful to tell the AI who to look for. Under the "Employee Profiles" section, you can add profiles for individuals involved.`},{type:"li",id:"li-1",text:"Why is this important? Profiles help the AI accurately identify people in photos, videos, and transcripts."},{type:"li",id:"li-2",text:"What should I include? Add their name and a detailed description, including physical appearance, mannerisms, or any relevant disabilities. The more detail, the better. You can also add a reference photo or a link to a public profile (like LinkedIn) to help the AI."},{type:"li",id:"li-3",text:"AI-Enhanced Description: After you add a profile, the AI will research the information you provided and add its own detailed, objective description to improve its recognition accuracy."},{type:"h4",id:"heading-5",text:"Step 3: Upload Your Evidence"},{type:"p",id:"p-4",text:'In the main "Evidence Chat" view, you can drag and drop files (images, videos, audio, or text documents) into the upload zone at the bottom. Once uploaded, they will appear in the "Unanalyzed Files" bar at the top of the chat panel, ready for analysis.'},{type:"h4",id:"heading-6",text:"Step 4: Start the Analysis"},{type:"p",id:"p-5",text:'Click "Analyze" on any file. A window will pop up asking for the location of the event and any special instructions (e.g., "focus on the conversation at the 5-minute mark"). Once you start, the AI gets to work:'},{type:"li",id:"li-4",text:"It watches videos frame-by-frame, listens to audio, and reads documents."},{type:"li",id:"li-5",text:"It identifies who is present based on the profiles you created."},{type:"li",id:"li-6",text:"It flags key moments with precise timestamps (e.g., [00:02:15])."},{type:"li",id:"li-7",text:"It analyzes emotional tones, transcribes conversations, and looks for patterns or potential policy violations."},{type:"h4",id:"heading-7",text:"Step 5: Review the Results"},{type:"p",id:"p-6",text:"After the initial analysis, you play a key role."},{type:"li",id:"li-8",text:"Recognition Review: The app will show you which employees the AI thinks it found. You can confirm if the AI was correct or mark any mismatches. This makes the final report more accurate."},{type:"li",id:"li-9",text:"Manual Tagging: If the AI doesn't find anyone, it will ask for your help. You can manually tell it who is in the file, and it will re-analyze the evidence with that new information."},{type:"li",id:"li-10",text:"The Final Report: Once confirmed, a detailed report appears in the right-hand panel, breaking down everything the AI found."},{type:"h3",id:"heading-8",text:"Understanding Your Workspace"},{type:"li",id:"li-11",text:"Evidence Locker (Left Panel): This is where all your analyzed files are stored. You can see their status (analyzed, error, etc.), select a file to view its report, delete it, or download the original file and its report as a package."},{type:"li",id:"li-12",text:'Case Dashboard (Top Tab): Once you have analyzed evidence, this tab becomes active. It generates an interactive "Relationship Map" that visually shows who interacts with whom, how often, and whether those interactions are generally positive, negative, or neutral.'},{type:"li",id:"li-13",text:"Legal Q&A (Top Tab): This is a safe space to ask general questions about legal topics. The AI will use web search to provide informative answers, but it will always remind you that it is not a lawyer and cannot give legal advice. You can check a box to let it use your entire case file for context in its answers."},{type:"li",id:"li-14",text:"Analysis Report (Right Panel): When you select a file from the Evidence Locker, its full report appears here. You can see the summary, severity score, a list of all key observations, a full transcript, and more. Use the details dropdowns to expand sections."},{type:"h3",id:"heading-9",text:"Your Privacy and Control"},{type:"p",id:"p-7",text:"This is the most important part: All your datayour testimony, employee profiles, and uploaded filesis stored only on your computer, in your web browser. Nothing is uploaded to a central server or seen by anyone else. You are in complete control. If you clear your browser's data or delete a file from the app, it is gone permanently."},{type:"h3",id:"heading-10",text:"Why This Tool Matters"},{type:"p",id:"p-8",text:"For individuals with disabilities, their caregivers, or anyone facing workplace harassment or discrimination, documenting events can be overwhelming and emotionally taxing. This tool helps by:"},{type:"li",id:"li-15",text:"Providing Objectivity: The AI provides a neutral, factual analysis, which can help separate emotion from evidence."},{type:"li",id:"li-16",text:"Organizing Chaos: It turns hours of media into a structured, time-stamped report, making it easier to see patterns."},{type:"li",id:"li-17",text:"Empowering Users: It gives you a powerful tool to build a clear, organized case, putting you in a stronger position to advocate for yourself or others."},{type:"p",id:"p-9",text:"Thank you for using the AI Evidence Companion. We hope it provides the clarity and support you need."}],sw=()=>{const[i,t]=Q.useState(!1),[l,o]=Q.useState(!1),[r,c]=Q.useState(null);Q.useEffect(()=>()=>{speechSynthesis.speaking&&speechSynthesis.cancel()},[]);const h=async()=>{if(!("speechSynthesis"in window)){alert("Sorry, your browser does not support text-to-speech.");return}if(speechSynthesis.speaking)return;const x=await Ii(),S=Ng.map(E=>E.text).join(" ");Il(S,{voice:x,rate:1,pitch:1,onstart:()=>{o(!1),t(!0),c(null)},onend:()=>{t(!1),c(null)}})},m=()=>{Wt(),t(!1),o(!1),c(null)},y=()=>{l?(Ml(),o(!1)):(Rl(),o(!0))},p=()=>{let x=[];const S=[],E=()=>{x.length>0&&(S.push(v.jsx("ul",{className:"list-disc list-inside",children:x.map(A=>v.jsx("li",{id:A.id,className:`${r===A.id?"speaking-highlight":""} p-2 -ml-2 rounded`,children:A.text},A.id))},`ul-${S.length}`)),x=[])};return Ng.forEach(A=>{const D=`${r===A.id?"speaking-highlight":""} p-2 -ml-2 rounded`;A.type==="li"?x.push(A):(E(),S.push(Cl.createElement(A.type,{key:A.id,id:A.id,className:D},A.text)))}),E(),S};return v.jsxs("div",{className:"bg-gray-900 h-full flex flex-col",children:[v.jsxs("div",{className:"flex-shrink-0 bg-gray-800 p-4 border-b border-gray-700 sticky top-0 z-10",children:[v.jsx("h2",{className:"text-xl font-bold text-teal-400",children:"About AI Evidence Companion"}),v.jsx("div",{className:"mt-3 flex items-center space-x-3",children:i?v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:y,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-md transition-colors w-32 justify-center",children:[l?v.jsx(gn,{className:"h-5 w-5"}):v.jsx(Fs,{className:"h-5 w-5"}),v.jsx("span",{children:l?"Resume":"Pause"})]}),v.jsxs("button",{onClick:m,className:"flex items-center space-x-2 bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-md transition-colors",children:[v.jsx(Os,{className:"h-5 w-5"}),v.jsx("span",{children:"Stop"})]})]}):v.jsxs("button",{onClick:h,className:"flex items-center space-x-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-4 rounded-md transition-colors",children:[v.jsx(gn,{className:"h-5 w-5"}),v.jsx("span",{children:"Read Aloud"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto",children:v.jsx("div",{className:"prose prose-sm prose-invert max-w-4xl mx-auto p-8",children:p()})})]})},ow=["text/plain","text/markdown"],qs=7,fa=i=>{const t=i.filter(o=>o.status==="analyzed"&&o.analysis);if(t.length===0)return"";let l=`Here is a summary of previously analyzed evidence:

`;return t.forEach(o=>{l+=`---
File: ${o.name}
Type: ${o.type}
Summary: ${o.analysis.summary}
Key Observations:
${o.analysis.keyObservations.map(r=>`- [${r.timestamp}] ${r.description}`).join(`
`)}
---
`}),l},aw=()=>{const[i,t]=Q.useState([]),[l,o]=Q.useState([]),[r,c]=Q.useState(()=>{try{const k=localStorage.getItem("employeeTestimonies");return k?JSON.parse(k):[]}catch{return[]}}),[h,m]=Q.useState(()=>localStorage.getItem("testimony")||""),[y,p]=Q.useState(()=>localStorage.getItem("contextSummary")||""),[x,S]=Q.useState([]),[E,A]=Q.useState([{id:"system-qa-intro",role:"system",content:"Ask a general question about legal topics. The AI will use web search to provide an informed answer."}]),[D,N]=Q.useState(!1),[R,I]=Q.useState(!1),[H,V]=Q.useState(null),[B,Y]=Q.useState(null),[ee,ne]=Q.useState(!1),[he,ae]=Q.useState(null),[te,re]=Q.useState(()=>{try{const k=localStorage.getItem("evidenceCases");return k?JSON.parse(k):[]}catch{return[]}}),[me,Ie]=Q.useState(null),[ie,ce]=Q.useState(!1),[U,Z]=Q.useState("chat"),[de,_e]=Q.useState(null),[Re,_]=Q.useState(!1),[q,W]=Q.useState(320),[j,xe]=Q.useState(450),[Ee,we]=Q.useState(null),pt=Q.useRef({startX:0,startLeftWidth:0,startRightWidth:0});Q.useEffect(()=>{(async()=>{N(!0),S($=>[...$,{id:"sys-loading-gh",role:"system",content:"Loading public evidence and profiles from GitHub..."}]);try{const $=await k_();$.length>0&&o($);const X=await P_();X.evidenceFiles.length>0&&t(X.evidenceFiles),S(O=>O.filter(le=>le.id!=="sys-loading-gh").concat({id:"sys-loaded-gh",role:"system",content:`Loaded ${X.evidenceFiles.length} files and ${$.length} profiles from GitHub.`}))}catch($){console.error("Failed to load data from GitHub:",$),S(X=>X.filter(O=>O.id!=="sys-loading-gh").concat({id:"sys-error-gh",role:"system",content:"Failed to load some data from GitHub. Please check your connection."}))}finally{N(!1)}})()},[]),Q.useEffect(()=>{localStorage.setItem("evidenceCases",JSON.stringify(te))},[te]),Q.useEffect(()=>{try{localStorage.setItem("employeeTestimonies",JSON.stringify(r))}catch{}},[r]),Q.useEffect(()=>{localStorage.setItem("testimony",h)},[h]),Q.useEffect(()=>{localStorage.setItem("contextSummary",y)},[y]);const tt=Q.useCallback((k,$)=>{k.preventDefault(),pt.current={startX:k.clientX,startLeftWidth:q,startRightWidth:j},we($)},[q,j]);Q.useEffect(()=>{if(Ee===null)return;const k=X=>{const{startX:O,startLeftWidth:le,startRightWidth:Te}=pt.current,se=60,Ce=300;if(Ee==="left"){const fe=X.clientX-O,ge=le+fe,Fe=window.innerWidth-j-Ce;W(Math.max(se,Math.min(ge,Fe)))}else{const fe=O-X.clientX,ge=Te+fe,Fe=window.innerWidth-q-Ce;xe(Math.max(se,Math.min(ge,Fe)))}},$=()=>{we(null)};return document.body.style.cursor="ew-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",k),window.addEventListener("mouseup",$),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",$),document.body.style.cursor="auto",document.body.style.userSelect="auto"}},[Ee,q,j]);const st=(k,$)=>{t(X=>X.map(O=>O.id!==k?O:typeof $=="function"?$(O):{...O,...$}))},yn=(k,$)=>{o(X=>X.map(O=>O.id===k?{...O,...$}:O))},Pl=async k=>{const $={...k,id:`emp-${Date.now()}`,status:"researching"};o(X=>[...X,$]);try{const X=await T_(k);let O={...$,aiEnhancedDetails:X,status:"ready"};try{const se=await lc(O);O={...O,profileJsonPath:se.jsonPath,referenceImagePath:se.imagePath}}catch(se){console.error("Failed to save profile to disk:",se)}const{referenceImage:le,...Te}=O;yn($.id,{...Te})}catch(X){console.error("Error researching employee:",X);let O={...$,status:"error",aiEnhancedDetails:"AI research failed."};try{const se=await lc(O);O={...O,profileJsonPath:se.jsonPath,referenceImagePath:se.imagePath}}catch(se){console.error("Failed to save profile to disk:",se)}const{referenceImage:le,...Te}=O;yn($.id,{...Te})}},$s=(k,$)=>{const X=l.find(le=>le.id===k),O=X?{...X,name:$.name,details:$.details}:null;yn(k,$),O&&lc(O).then(le=>{yn(k,{profileJsonPath:le.jsonPath})}).catch(le=>console.error("Failed to save profile to disk:",le))},vn=async k=>{const $=l.find(X=>X.id===k);o(X=>X.filter(O=>O.id!==k));try{await U_($==null?void 0:$.profileJsonPath,$?$.name:void 0)}catch(X){console.error("Failed to delete profile from disk:",X)}},ql=k=>{const $={...k,id:`wit-${Date.now()}`};c(X=>[...X,$])},Hl=k=>{c($=>$.filter(X=>X.id!==k))},Ia=(k,$)=>{c(X=>X.map(O=>O.id===k?{...O,...$}:O))},Js=async k=>{const $=r.find(X=>X.id===k);if($)try{if($.testimony&&$.testimony.trim().length>10){const X=await cg($.testimony);c(O=>O.map(le=>le.id===k?{...le,contextSummary:X}:le));try{await hg({kind:"employee",employeeName:$.employeeName,employeeId:$.employeeId,text:$.testimony,summary:X})}catch(O){console.error("Failed to save employee testimony to disk:",O)}}else c(X=>X.map(O=>O.id===k?{...O,contextSummary:""}:O))}catch(X){console.error("Failed to summarize employee testimony:",X)}},Gl=async k=>{if(m(k),k.trim().length>10)try{const $=await cg(k);p($);try{await hg({kind:"user",text:k,summary:$})}catch(X){console.error("Failed to save user testimony to disk:",X)}}catch($){console.error("Error summarizing testimony:",$),p("Could not summarize testimony.")}else p("")},zi=Q.useCallback(async k=>{let $;k.type.startsWith("image")?$="image":k.type.startsWith("video")?$="video":k.type.startsWith("audio")?$="audio":(ow.includes(k.type)||k.name.endsWith(".md")||k.name.endsWith(".txt"),$="document");const X=await M_(k),O={id:`file-${Date.now()}`,name:k.name,type:$,url:URL.createObjectURL(k),file:k,status:"new",hash:await g_(k),storedFileName:X.fileName,storedFilePath:X.relativePath,analysisDocuments:[]};return t(le=>[...le,O]),O},[]),Vl=Q.useCallback(async k=>{const $=await tc();$&&(t(X=>{const O=X.find(le=>le.id===k);if(O&&O.url&&URL.revokeObjectURL(O.url),O!=null&&O.storedFileName)ic({name:O.storedFileName,kind:"analyzed",password:$}).catch(le=>console.error("Failed to delete evidence from disk:",le));else if(O!=null&&O.analysisDocuments&&O.analysisDocuments.length>0){const Te=O.analysisDocuments[0].split("/").pop();Te&&ic({name:Te,kind:"report",password:$}).catch(se=>console.error("Failed to delete report from disk:",se))}return X.filter(le=>le.id!==k)}),H===k&&V(null))},[H]),Da=Q.useCallback(async(k,$)=>{const X=i.find(fe=>fe.id===k);if(!X)return;const O=X.storedFileName||X.name,le=O.includes(".")?O.substring(O.lastIndexOf(".")):"",Te=$.trim();if(!Te)return;const se=Te.includes(".")?Te:`${Te}${le}`,Ce=await tc();if(Ce)try{const fe=await D_({oldName:O,newName:se,kind:"analyzed",password:Ce}),ge=fe.newStoredFileName||se;t(Fe=>Fe.map(Lt=>{if(Lt.id!==k)return Lt;const un=(Lt.analysisDocuments||[]).map(cn=>{var Pe;const Ne=(Pe=fe.changes)==null?void 0:Pe.find(Qs=>{const Fl=Qs.old.split("/").pop()||"";return Fl&&cn.endsWith(Fl)});return Ne?cn.replace(Ne.old,Ne.next):cn});return{...Lt,name:ge,storedFileName:ge,storedFilePath:`app/data/analyzed files/${ge}`,analysisDocuments:un}}))}catch(fe){console.error("Failed to rename evidence on disk:",fe),alert("Could not rename the file on disk. Please try again.")}},[i]),ka=Q.useCallback(async k=>{const $=te.find(le=>le.id===k);if(!$)return;const X=await tc();if(!X)return;const O=$.analysisDocumentFileName||$.analysisDocumentPath&&$.analysisDocumentPath.split("/").pop()||void 0;if(O)try{await ic({name:O,kind:"report",password:X})}catch(le){console.error("Failed to delete unified report from disk:",le),alert("Unable to delete the stored unified report from disk. The case will still be removed from the app.")}if(Array.isArray($.fileIds)&&$.fileIds.length>0){const le=new Set($.fileIds);t(Te=>Te.map(se=>le.has(se.id)?{...se,status:"new",analysis:void 0,recognitionVerified:!1}:se))}re(le=>le.filter(Te=>Te.id!==k)),B===k&&Y(null)},[te,B]),Ct=Q.useCallback(async k=>{const $=`sys-upload-${Date.now()}`;S(X=>[...X,{id:$,role:"system",content:`Uploading ${k.length} file(s)...`}]);try{await Promise.all(k.map(X=>zi(X))),S(X=>[...X,{id:`sys-upload-done-${Date.now()}`,role:"system",content:`${k.length} file(s) added and are ready for analysis.`}])}catch(X){console.error("Error saving uploaded files:",X),S(O=>[...O,{id:`sys-upload-error-${Date.now()}`,role:"system",content:"One or more files could not be saved to app/data/. Please check write permissions and try again."}])}},[zi]),Ua=k=>{const $=i.find(X=>X.id===k);$&&(ae($),ne(!0))},Pi=async(k,$,X)=>{st(k.id,{status:"analyzing"}),S(O=>[...O,{id:`system-analysis-${k.id}`,role:"system",content:`Analyzing '${k.name}'...`}]);try{const O=fa(i.filter(ge=>ge.id!==k.id)),le=r.length>0?`

**EMPLOYEE TESTIMONIES:**
${r.map(ge=>`- ${ge.employeeName}: ${ge.testimony}`).join(`
`)}`:"",Te=h?`${h}${le}`:le||"",se=await E_(k,l,O,Te,$,X);let Ce;try{Ce=(await I_(k.name,k.storedFileName??k.name,se)).relativePath}catch(ge){console.error(`Error saving analysis document for ${k.name}:`,ge),S(Fe=>[...Fe,{id:`analysis-storage-error-${Date.now()}`,role:"system",content:"Error saving analysis. Please check write permissions in app/data/."}])}const fe=ge=>{const Fe=ge.analysisDocuments??[];return Ce?[...Fe,Ce]:Fe};!X&&se.recognizedEmployees.length===0?(st(k.id,ge=>({...ge,status:"analyzed-needs-manual-tagging",analysis:se,recognitionVerified:!1,analysisDocuments:fe(ge)})),V(k.id),S(ge=>ge.filter(Fe=>Fe.id!==`system-analysis-${k.id}`).concat({id:`system-manual-tag-${k.id}`,role:"system",content:`Initial analysis of '${k.name}' complete. AI did not detect any employees. Please manually tag who is present.`}))):se.recognizedEmployees.length>0?(st(k.id,ge=>({...ge,status:"analyzed-pending-review",analysis:se,recognitionVerified:!1,analysisDocuments:fe(ge)})),V(k.id),S(ge=>ge.filter(Fe=>Fe.id!==`system-analysis-${k.id}`).concat({id:`system-done-${k.id}`,role:"system",content:`'${k.name}' analyzed. Please review the detected employees.`}))):(st(k.id,ge=>({...ge,status:"analyzed",analysis:se,recognitionVerified:!0,analysisDocuments:fe(ge)})),V(k.id),S(ge=>ge.filter(Fe=>Fe.id!==`system-analysis-${k.id}`).concat({id:`system-done-${k.id}`,role:"system",content:`Re-analysis of '${k.name}' complete. Review the final report.`})))}catch(O){console.error(`Error analyzing file ${k.name}:`,O);const le=O&&(O.message||O.toString())||"Unknown error",Te={id:`model-error-${Date.now()}`,role:"model",content:`Sorry, I encountered an error analyzing '${k.name}'. Details: ${le}`};S(se=>se.filter(Ce=>Ce.id!==`system-analysis-${k.id}`).concat(Te)),st(k.id,{status:"error"})}},Xs=async(k,$)=>{const X=k.slice(0,qs);if(X.length<2)return;const O=`case-${Date.now()}`,le=X.map(se=>se.name).join(" + "),Te=X.map(se=>se.id);X.forEach(se=>{st(se.id,{status:"analyzing"})}),re(se=>se.concat([{id:O,name:le,fileIds:Te,status:"analyzing"}])),S(se=>se.concat([{id:`system-analysis-unified-${O}`,role:"system",content:`Analyzing '${le}' (${X.length} files) as a single unified case...`}]));try{const se=new Set(Te),Ce=fa(i.filter(Ne=>!se.has(Ne.id))),fe=r.length>0?`

**EMPLOYEE TESTIMONIES:**
${r.map(Ne=>`- ${Ne.employeeName}: ${Ne.testimony}`).join(`
`)}`:"",ge=h?`${h}${fe}`:fe||"",Fe=await dg(X,l,Ce,ge,$);let Lt,un;try{const Ne=await nc(X.map(Pe=>Pe.name),X.map(Pe=>Pe.storedFileName??Pe.name),le,Fe);Lt=Ne.fileName,un=Ne.relativePath}catch(Ne){console.error("Failed to save unified analysis document:",Ne)}re(Ne=>Ne.map(Pe=>Pe.id===O?{...Pe,fileIds:Te,status:"analyzed",analysis:Fe,recognitionVerified:!1,analysisDocumentFileName:Lt,analysisDocumentPath:un}:Pe));const cn=Ne=>({summary:`See unified case report: ${le}`,newFindingsSummary:`Analyzed jointly as part of '${le}'.`,severityScore:Fe.severityScore??0,confidenceScore:Fe.confidenceScore??0,childrenDetected:Fe.childrenDetected??!1,keyObservations:[],timelineEvents:[],crossReferences:[{fileName:le,observation:`This file is part of the unified analysis '${le}'.`}],emotionalAnalysis:[],recognizedEmployees:[],potentialViolations:[],fullTranscript:"N/A"});X.forEach(Ne=>{st(Ne.id,Pe=>({...Pe,status:"analyzed",analysis:cn(Ne.name)}))}),Y(O),V(null),S(Ne=>Ne.filter(Pe=>Pe.id!==`system-analysis-unified-${O}`).concat({id:`system-done-unified-${O}`,role:"system",content:`Unified analysis complete for '${le}'.`}))}catch(se){console.error("Error during unified analysis",se),re(Ce=>Ce.map(fe=>fe.id===O?{...fe,status:"error"}:fe)),X.forEach(Ce=>{st(Ce.id,{status:"error"})}),S(Ce=>Ce.filter(fe=>fe.id!==`system-analysis-unified-${O}`).concat({id:`model-error-unified-${Date.now()}`,role:"model",content:`Sorry, I encountered an error analyzing '${le}'. ${(se==null?void 0:se.message)||""}`}))}},qi=async(k,$)=>{const X=te.find(fe=>fe.id===k);if(!X)return;const O=X.fileIds.map(fe=>i.find(ge=>ge.id===fe)).filter(fe=>!!fe),le=O.map(fe=>fe.name).join(" + ");let Te,se;try{const fe=await nc(O.map(ge=>ge.name),O.map(ge=>ge.storedFileName??ge.name),le,$);Te=fe.fileName,se=fe.relativePath}catch(fe){console.error("Failed to save edited unified analysis document:",fe)}re(fe=>fe.map(ge=>ge.id===k?{...ge,name:le,status:"analyzed",analysis:$,analysisDocumentFileName:Te,analysisDocumentPath:se}:ge));const Ce=fe=>({summary:`See unified case report: ${le}`,newFindingsSummary:`Analyzed jointly as part of '${le}'.`,severityScore:$.severityScore??0,confidenceScore:$.confidenceScore??0,childrenDetected:$.childrenDetected??!1,keyObservations:[],timelineEvents:[],crossReferences:[{fileName:le,observation:`This file is part of the unified analysis '${le}'.`}],emotionalAnalysis:[],recognizedEmployees:[],potentialViolations:[],fullTranscript:"N/A"});O.forEach(fe=>{st(fe.id,ge=>({...ge,status:"analyzed",analysis:Ce(fe.name)}))}),S(fe=>fe.concat({id:`sys-unified-edited-${Date.now()}`,role:"system",content:`Unified report '${le}' was edited and saved.`}))},La=(k,$)=>{const X=te.find(Te=>Te.id===k);if(!X)return;const O=X.fileIds.map(Te=>i.find(se=>se.id===Te)).filter(Te=>!!Te);Bl(k,O,$||"")},Bl=async(k,$,X)=>{const O=$.slice(0,qs);if(O.length<2)return;const le=O.map(se=>se.name).join(" + "),Te=O.map(se=>se.id);re(se=>se.map(Ce=>Ce.id===k?{...Ce,name:le,fileIds:Te,status:"analyzing"}:Ce)),O.forEach(se=>{st(se.id,{status:"analyzing"})}),S(se=>se.concat([{id:`system-analysis-unified-${k}`,role:"system",content:`Updating unified analysis '${le}' (${O.length} files)...`}]));try{const se=new Set(Te),Ce=fa(i.filter(Ne=>!se.has(Ne.id))),fe=r.length>0?`

**EMPLOYEE TESTIMONIES:**
${r.map(Ne=>`- ${Ne.employeeName}: ${Ne.testimony}`).join(`
`)}`:"",ge=h?`${h}${fe}`:fe||"",Fe=await dg(O,l,Ce,ge,X);let Lt,un;try{const Ne=await nc(O.map(Pe=>Pe.name),O.map(Pe=>Pe.storedFileName??Pe.name),le,Fe);Lt=Ne.fileName,un=Ne.relativePath}catch(Ne){console.error("Failed to save unified analysis document:",Ne)}re(Ne=>Ne.map(Pe=>Pe.id===k?{...Pe,name:le,fileIds:Te,status:"analyzed",analysis:Fe,recognitionVerified:!1,analysisDocumentFileName:Lt,analysisDocumentPath:un}:Pe));const cn=Ne=>({summary:`See unified case report: ${le}`,newFindingsSummary:`Analyzed jointly as part of '${le}'.`,severityScore:Fe.severityScore??0,confidenceScore:Fe.confidenceScore??0,childrenDetected:Fe.childrenDetected??!1,keyObservations:[],timelineEvents:[],crossReferences:[{fileName:le,observation:`This file is part of the unified analysis '${le}'.`}],emotionalAnalysis:[],recognizedEmployees:[],potentialViolations:[],fullTranscript:"N/A"});O.forEach(Ne=>{st(Ne.id,Pe=>({...Pe,status:"analyzed",analysis:cn(Ne.name)}))}),Y(k),V(null),S(Ne=>Ne.filter(Pe=>Pe.id!==`system-analysis-unified-${k}`).concat({id:`system-done-unified-${k}`,role:"system",content:`Unified analysis updated for '${le}'.`}))}catch(se){console.error("Error during unified analysis update",se),re(Ce=>Ce.map(fe=>fe.id===k?{...fe,status:"error"}:fe)),O.forEach(Ce=>{st(Ce.id,{status:"error"})}),S(Ce=>Ce.filter(fe=>fe.id!==`system-analysis-unified-${k}`).concat({id:`model-error-unified-${Date.now()}`,role:"model",content:`Sorry, I encountered an error updating '${le}'. ${(se==null?void 0:se.message)||""}`}))}},za=(k,$,X)=>{ne(!1),ae(null);const le=(Array.isArray(k)?k:[k]).slice(0,qs);le.length!==0&&(le.forEach(Te=>st(Te.id,{location:$})),le.length===1?Pi(le[0],X):Xs(le,X))},Pa=(k,$)=>{const X=i.find(O=>O.id===k);X&&Pi(X,void 0,$)},pi=(k,$)=>{const X=i.find(O=>O.id===k);if(X&&X.analysis){const O={...X.analysis,recognizedEmployees:$};st(k,{status:"analyzed",recognitionVerified:!0,analysis:O}),S(le=>[...le,{id:`sys-review-done-${k}`,role:"system",content:`Recognition review for '${X.name}' is complete.`}])}},At=async(k,$)=>{I(!0);const X={id:`user-qa-${Date.now()}`,role:"user",content:k},O={id:`model-qa-loading-${Date.now()}`,role:"model",content:"",isLoading:!0};A(le=>[...le,X,O]);try{let le;if($){const se=fa(i);let Ce=`--- START OF CASE CONTEXT ---

`;h&&(Ce+=`**User's Personal Testimony:**
${h}

`),l.length>0&&(Ce+=`**Employee Profiles:**
${l.map(fe=>{let ge=`- Name: ${fe.name}
  - User-Provided Details: ${fe.details}`;return fe.aiEnhancedDetails&&(ge+=`
  - AI-Enhanced Description: ${fe.aiEnhancedDetails}`),ge}).join(`
`)}

`),se&&(Ce+=`**Summary of All Evidence:**
${se}
`),Ce+=`--- END OF CASE CONTEXT ---

`,le=await fg(k,Ce)}else le=await fg(k);const Te={id:`model-qa-${Date.now()}`,role:"model",content:le};A(se=>se.filter(Ce=>!Ce.isLoading).concat(Te))}catch(le){console.error("Error processing Q&A message:",le);const Te={id:`model-qa-error-${Date.now()}`,role:"model",content:"Sorry, I encountered an error. Please check the console and try again."};A(se=>se.filter(Ce=>!Ce.isLoading).concat(Te))}finally{I(!1)}},rn=async()=>{_(!0);try{const k=await C_(i);_e(k)}catch(k){console.error("Error generating relationship map:",k),S($=>[...$,{id:`sys-map-err-${Date.now()}`,role:"system",content:"Could not generate the relationship map. Please check the console for details."}])}finally{_(!1)}},_t=Q.useMemo(()=>i.some(k=>k.status==="analyzed"||k.status==="analyzed-pending-review"),[i]),qa=Q.useMemo(()=>i.filter(k=>k.status==="new"),[i]),Ha=Q.useMemo(()=>i.find(k=>k.id===H),[i,H]),Ks=()=>{switch(U){case"chat":return v.jsxs("div",{className:"flex-grow flex flex-col min-w-0 h-full",children:[v.jsx(lw,{files:qa,onAnalyze:Ua}),v.jsx($N,{messages:x,onFilesDropped:Ct,isLoading:D})]});case"dashboard":return v.jsx(tw,{files:i,mapData:de,isLoading:Re,onGenerateMap:rn});case"qa":return v.jsx(KN,{messages:E,onSendMessage:At,isLoading:R});case"about":return v.jsx(sw,{});default:return null}};return v.jsxs("div",{className:"flex flex-col h-screen font-sans",children:[v.jsx(A_,{view:U,onViewChange:Z,hasAnalyzedFiles:_t}),v.jsx("main",{className:"flex flex-grow overflow-hidden",children:U!=="about"?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{width:`${q}px`},className:"flex-shrink-0 h-full",children:v.jsx(oN,{files:i,cases:te,selectedFileId:H,onSelectFile:k=>{V(k),k&&Y(null)},onSelectCase:k=>{Y(k),V(null)},onAppendCase:k=>{const $=te.find(X=>X.id===k)||null;Ie($),ce(!!$)},onDeleteCase:ka,onDeleteFile:Vl,onRenameFile:Da,employees:l,onAddEmployee:Pl,onUpdateEmployee:$s,onSetEmployees:o,onDeleteEmployee:vn,witnesses:r,onAddWitness:ql,onDeleteWitness:Hl,onUpdateWitness:Ia,onSaveWitness:Js,testimony:h,contextSummary:y,onSaveTestimony:Gl})}),v.jsx(_g,{onMouseDown:k=>tt(k,"left")}),v.jsx("div",{className:"flex-grow flex flex-col min-w-0 h-full",children:Ks()}),v.jsx(_g,{onMouseDown:k=>tt(k,"right")}),v.jsx("div",{style:{width:`${j}px`},className:"flex-shrink-0 h-full",children:v.jsx(WN,{file:Ha||null,caseItem:B&&te.find(k=>k.id===B)||null,employees:l,onRecognitionReview:pi,onRerunAnalysis:Pa,onUpdateUnifiedAnalysis:qi,onRerunUnifiedCase:La,onRerunSingle:(k,$)=>{const X=i.find(O=>O.id===k);X&&Pi(X,$)}})})]}):v.jsx("div",{className:"flex-grow min-w-0",children:Ks()})}),v.jsx(Cg,{isOpen:ee&&he!==null,files:he?[he]:[],allFiles:i,onCancel:()=>{ne(!1),ae(null)},onConfirm:(k,$,X)=>za(k,$,X),maxUnifiedFiles:qs}),v.jsx(Cg,{isOpen:ie&&me!==null,files:me?me.fileIds.map(k=>i.find($=>$.id===k)).filter(k=>!!k):[],allFiles:i,onCancel:()=>{ce(!1),Ie(null)},onConfirm:(k,$,X)=>{me&&(ce(!1),Ie(null),$&&k.forEach(O=>st(O.id,{location:$})),Bl(me.id,k,X))},maxUnifiedFiles:qs})]})},by=document.getElementById("root");if(!by)throw new Error("Could not find root element to mount to");const rw=Zv.createRoot(by);rw.render(v.jsx(Cl.StrictMode,{children:v.jsx(aw,{})}));export{cw as c,wg as g};
